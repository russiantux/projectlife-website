<!DOCTYPE html>
<html lang="fr">

  <head>
    <title>Migration vers Express 5</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/dropit.css">
    <link rel="stylesheet" href="/css/prism.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;amp;subset=latin,latin-ext">
    <link rel="stylesheet" href="/css/fr.css">        
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script data-cfasync="false" src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script data-cfasync="false" src="/js/app.js"></script>
    <script data-cfasync="false" src="/js/retina.js"></script>
    <script data-cfasync="false" src="/js/dropit.js"></script>
    <script data-cfasync="false" src="/js/prism.js"></script>
</head>


  
  <body class="non-en-doc">
  

    <section class="page content">

      <header>
  <div id="mobile-menu">
      <div id="nav-button" class="fa fa-bars fa-2x button"></div>
  </div>
  <section id="logo"><a href="/" class="express">Express</a>
  </section>
  <div id="navbar">
      <ul id="navmenu">
          <li><a href="/fr/" id="home-menu">Accueil</a></li>
          <li>
              <ul id="getting-started-menu" class="menu">
                  <li><a href="/fr/starter/installing.html">Mise en route</a>
                      <ul>
                          <li>
                            <a href="/fr/starter/installing.html">
                              Installation
                            </a>
                          </li>
                          <li>
                            <a href="/fr/starter/hello-world.html">
                              Hello world
                            </a>
                          </li>
                          <li>
                          <a href="/fr/starter/generator.html">
                            Générateur Express
                          </a>
                          </li>
                          <li>
                            <a href="/fr/starter/basic-routing.html">
                              Routage de base
                            </a>
                          </li>
                          <li>
                            <a href="/fr/starter/static-files.html">
                              Fichiers statiques
                            </a>
                          </li>
                          <li>
                            <a href="/fr/starter/faq.html">
                              FAQ
                            </a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="guide-menu" class="menu">
                  <li><a href="/fr/guide/routing.html" class="active">Guide</a>
                      <ul>
                          <li><a href="/fr/guide/routing.html">Routage</a>
                          </li>
                          <li><a href="/fr/guide/writing-middleware.html">Ecriture de middleware</a>
                          </li>
                          <li><a href="/fr/guide/using-middleware.html">Utilisation de middleware</a>
                          </li>
                          <li><a href="/fr/guide/using-template-engines.html">Utilisation de moteurs de modèles</a>
                          </li>
                          <li><a href="/fr/guide/error-handling.html">Traitement d'erreurs</a>
                          </li>
                          <li><a href="/fr/guide/debugging.html">Débogage</a>
                          </li>
                          <li><a href="/fr/guide/behind-proxies.html">Express derrière Proxys</a>
                          </li>
                          <li><a href="/fr/guide/migrating-4.html">Migration vers Express 4</a>
                          </li>
                          <li><a href="/fr/guide/migrating-5.html">Migration vers Express 5</a>
                          </li>
                          <li><a href="/fr/guide/database-integration.html">Intégration de bases de données</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="application-menu" class="menu">
                  <li><a href="/fr/4x/api.html">Référence de l'API</a>
                      <ul>
                          <li><a href="/fr/4x/api.html">4.x</a>
                          </li>
                          <li><a href="/fr/3x/api.html">3.x (obsolète)</a>
                          </li>
                          <li><a href="/fr/2x/">2.x (obsolète)</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="advanced-topics-menu" class="menu">
                  <li><a href="/fr/advanced/developing-template-engines.html">Rubriques avancées</a>
                      <ul>
                          <li><a href="/fr/advanced/developing-template-engines.html">Moteurs de modèles</a>
                          </li>
                          <li><a href="/fr/advanced/pm.html">Utilisation de gestionnaires de processus</a>
                          </li>
                          <li><a href="/fr/advanced/security-updates.html">Mises à jour de sécurité</a>
                          </li>
                          <li><a href="/fr/advanced/best-practice-security.html">Meilleures pratiques en termes de sécurité</a>
                          </li>
                          <li><a href="/fr/advanced/best-practice-performance.html">Meilleures pratiques en termes de performances</a>
                          </li>

                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="resources-menu" class="menu">
                  <li><a href="/fr/resources/glossary.html">Ressources</a>
                      <ul>
                          <li><a href="/fr/resources/glossary.html">Glossaire</a>
                          </li>
                          <li><a href="/fr/resources/middleware.html">Middleware</a>
                          </li>
                          <li><a href="/fr/resources/community.html">Communauté</a>
                          </li>
                          <li><a href="/fr/resources/books-blogs.html">Ouvrages et blogs</a>
                          </li>
                          <li><a href="/fr/resources/applications.html">Applications</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
      </ul>
  </div><a href="http://strongloop.com/node-js/training/" title="Formation sur Node et Express à partir de StrongLoop" id="strongloop-header">Formation sur Express et Node.js à partir de StrongLoop</a>
</header>


      <div id="overlay"></div>

      
        <div id="i18n-notice-box" class="doc-box doc-warn">
          <p>Il se peut que ce document soit obsolète par rapport à la documentation en anglais. Pour connaître les mises à jour les plus récentes, reportez-vous à la <a href="/">documentation en anglais</a>.
</p>
<p>This document might be outdated relative to the documentation in English. For the latest updates, please refer to the <a href="/">documentation in English</a>.
</p>
<div id="close-i18n-notice-box" title="Close">✖</div>

        </div>
      

      <h1 id="migration-vers-express-5">Migration vers Express 5</h1>

<h2 id="overview">Présentation</h2>

<p>Express 5.0 est encore au stade d’édition alpha mais voici un
aperçu des modifications qui figureront dans l’édition et la procédure
de migration de l’application Express 4 vers Express 5.</p>

<p>Express 5 n’est pas très différent d’Express 4 : les
modifications apportées à l’API ne sont pas aussi importantes qu’entre
les versions 3.0 et 4.0.
Bien que l’API de base reste identique, des modifications radicales ont été apportées ; en d’autres termes, un programme Express 4 risque de ne pas fonctionner si
vous le mettez à jour pour utiliser Express 5.</p>

<p>Pour installer la dernière version alpha et pour
prévisualiser Express 5, entrez la commande suivante dans le
répertoire principal de l’application :</p>

<pre>
<code class="language-sh" translate="no">
$ npm install express@5.0.0-alpha.2 --save
</code>
</pre>

<p>Vous pouvez alors exécuter les tests automatisés pour voir les
échecs et corriger les problèmes en fonction des mises à jour
répertoriées ci-dessous. Après avoir traité les échecs de test,
exécutez votre application pour détecter les erreurs qui se
produisent. Vous saurez tout de suite si l’application utilise des
méthodes ou des propriétés.</p>

<h2 id="changes">Modifications dans Express 5</h2>

<p>Voici la liste des modifications (par rapport à l’édition alpha
2) qui vous concerneront en tant qu’utilisateur d’Express.
Consultez la
<a href="https://github.com/strongloop/express/pull/2237">demande d’extraction</a>
pour une liste de toutes les fonctions planifiées.</p>

<p><strong>Méthodes et propriétés supprimées</strong></p>

<ul class="doclist">
  <li><a href="#app.del">app.del()</a></li>
  <li><a href="#app.param">app.param(fn)</a></li>
  <li><a href="#plural">Noms de méthodes au pluriel</a></li>
  <li><a href="#leading">Signe deux-points de tête dans l'argument du
nom pour app.param(name, fn)</a></li>
  <li><a href="#req.param">req.param(name)</a></li>
  <li><a href="#res.json">res.json(obj, status)</a></li>
  <li><a href="#res.jsonp">res.jsonp(obj, status)</a></li>
  <li><a href="#res.send.body">res.send(body, status)</a></li>
  <li><a href="#res.send.status">res.send(status)</a></li>
  <li><a href="#res.sendfile">res.sendfile()</a></li>
</ul>

<p><strong>Modifié</strong></p>

<ul class="doclist">
  <li><a href="#app.router">app.router</a></li>
  <li><a href="#req.host">req.host</a></li>
  <li><a href="#req.query">req.query</a></li>
</ul>

<p><strong>Améliorations</strong></p>

<ul class="doclist">
  <li><a href="#res.render">res.render()</a></li>
</ul>

<h3>Méthodes et propriétés supprimées</h3>

<p>Si vous utilisez une de ces méthodes ou propriétés dans votre
application, elle tombera en panne. Vous devrez donc modifier votre
application après la mise à jour vers la version 5.</p>

<h4 id="app.del">app.del()</h4>

<p>Express 5 ne prend plus en charge la fonction
<code class="highlighter-rouge">app.del()</code>. Si vous utilisez cette fonction, une
erreur est émise. Pour enregistrer des routes HTTP DELETE, utilisez la fonction
<code class="highlighter-rouge">app.delete()</code> à la place.</p>

<p>Initialement, <code class="highlighter-rouge">del</code> était utilisé au lieu de
<code class="highlighter-rouge">delete</code> car <code class="highlighter-rouge">delete</code> est un mot
clé réservé dans JavaScript. Cependant, à partir d’ECMAScript 6,
<code class="highlighter-rouge">delete</code> et les autres mots clés réservés peuvent
être utilisés en toute légalité comme noms de propriété. Vous pouvez lire la
discussion qui a donné lieu à l’obsolescence de la fonction
<code class="highlighter-rouge">app.del</code> ici.</p>

<h4 id="app.param">app.param(fn)</h4>

<p>La signature <code class="highlighter-rouge">app.param(fn)</code> servait à
modifier le comportement de la fonction
<code class="highlighter-rouge">app.param(name, fn)</code>. Elle est obsolète depuis la
version 4.11.0 et Express 5 ne la prend plus en charge.</p>

<h4 id="plural">Noms de méthodes au pluriel</h4>

<p>Les noms de méthode suivants ont été mis au pluriel. Dans Express 4, l’utilisation des anciennes méthodes ont généré un avertissement
d’obsolescence. Express 5 ne les prend plus du tout en charge :</p>

<p><code class="highlighter-rouge">req.acceptsCharset()</code> est remplacé par
<code class="highlighter-rouge">req.acceptsCharsets()</code>.</p>

<p><code class="highlighter-rouge">req.acceptsEncoding()</code> est remplacé par
<code class="highlighter-rouge">req.acceptsEncodings()</code>.</p>

<p><code class="highlighter-rouge">req.acceptsLanguage()</code> est remplacé par
<code class="highlighter-rouge">req.acceptsLanguages()</code>.</p>

<h4 id="leading">Signe deux-points (:) de tête dans le nom de la
fonction app.param(name, fn)</h4>

<p>Le signe deux-points (:) de tête dans le nom de la fonction
<code class="highlighter-rouge">app.param(name, fn)</code> est une subsistance d’Express 3 et, pour des raisons de
compatibilité avec les versions antérieures, Express 4 la prenait en
charge avec un avis sur l’obsolescence. Express 5 l’ignore
automatiquement et utilise le paramètre de nom sans le préfixer d’un
signe deux-points.</p>

<p>Cela n’affectera normalement pas votre code si vous lisez la documentation Express 4
d’<a href="/fr/4x/api.html#app.param">app.param</a> car cela ne mentionne pas le signe deux-points de tête.</p>

<h4 id="req.param">req.param(name)</h4>

<p>Cette méthode potentiellement déroutante et dangereuse
d’extraction des données de formulaire a été supprimée. Vous devrez
désormais rechercher spécifiquement le nom du paramètre soumis dans
l’objet <code class="highlighter-rouge">req.params</code>, <code class="highlighter-rouge">req.body</code> ou <code class="highlighter-rouge">req.query</code>.</p>

<h4 id="res.json">res.json(obj, status)</h4>

<p>Express 5 ne prend plus en charge la signature
<code class="highlighter-rouge">res.json(obj, status)</code>. A la place, définissez le
statut et enchaînez-le à la méthode
<code class="highlighter-rouge">res.json()</code> comme suit :
<code class="highlighter-rouge">res.status(status).json(obj)</code>.</p>

<h4 id="res.jsonp">res.jsonp(obj, status)</h4>

<p>Express 5 ne prend plus en charge la signature
<code class="highlighter-rouge">res.jsonp(obj, status)</code>. A la place, définissez le
statut et enchaînez-le à la méthode <code class="highlighter-rouge">res.jsonp()</code>
comme suit : <code class="highlighter-rouge">res.status(status).jsonp(obj)</code>.</p>

<h4 id="res.send.body">res.send(body, status)</h4>

<p>Express 5 ne prend plus en charge la signature
<code class="highlighter-rouge">res.send(obj, status)</code>. A la place, définissez le
statut et enchaînez-le à la méthode <code class="highlighter-rouge">res.send()</code>
comme suit : <code class="highlighter-rouge">res.status(status).send(obj)</code>.</p>

<h4 id="res.send.status">res.send(status)</h4>

<p>Express 5 ne prend plus en charge la signature
<code>res.send(<em>statut</em>)</code>, où <em><code class="highlighter-rouge">statut</code></em>
est un nombre. A la place, utilisez la fonction
<code class="highlighter-rouge">res.sendStatus(statusCode)</code>
qui définit le code de statut de l’en-tête de réponse HTTP et envoie
la version texte du code: “Not Found”, “Internal Server Error”, etc.
Si vous devez envoyer un nombre à l’aide de la fonction <code class="highlighter-rouge">res.send()</code>,
mettez ce nombre entre guillemets pour qu’Express ne l’interprète pas
comme une tentative d’utilisation de l’ancienne signature non prise en charge.</p>

<h4 id="res.sendfile">res.sendfile()</h4>

<p>La fonction <code class="highlighter-rouge">res.sendfile()</code> a été remplacée
par une
version CamelCase <code class="highlighter-rouge">res.sendFile()</code> dans Express 5.</p>

<h3>Modifié</h3>

<h4 id="app.router">app.router</h4>

<p>L’objet <code class="highlighter-rouge">app.router</code>, qui a été supprimé dans Express 4, est revenu dans Express 5. Dans la version, cet objet
n’est qu’une référence dans le routeur Express de base, contrairement à Express 3, où une application devait le charger explicitement.</p>

<h4 id="req.host">req.host</h4>

<p>Dans Express 4, la <code class="highlighter-rouge">req.host</code> retirait de
manière incorrecte le numéro de port s’il était présent. Dans Express 5, ce numéro de port est conservé.</p>

<h4 id="req.query">req.query</h4>

<p>Dans Express 4.7 et à partir d’Express 5, l’option
d’analyseur de requêtes peut accepter <code class="highlighter-rouge">false</code> pour
désactiver l’analyse syntaxique de chaîne de requête lorsque vous
souhaitez utiliser votre propre fonction pour la logique d’analyse
syntaxique de chaîne de requête.</p>

<h3>Améliorations</h3>

<h4 id="res.render">res.render()</h4>

<p>Cette méthode impose désormais un comportement asynchrone pour
tous les moteurs de vue. Cela évite les bogues générés par les
moteurs de vue qui avaient une implémentation synchrone et qui
ne prenaient pas en compte l’interface recommandée.</p>


    </section>

    <!-- NLS_CHARSET=UTF-8 -->
<noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5XL76H" height="0" width="0" style="display: none; visibility: hidden;"></iframe>
</noscript>
<script>
(function(w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
        '//www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-5XL76H');
</script>
<a id="top" href="#"><img src="/images/arrow.png"></a>

<footer>
    <div id="footer-content">
        <div id="github">
            <iframe src="http://ghbtns.com/github-btn.html?user=strongloop&amp;repo=express&amp;type=watch&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>
        </div>
        <div id="sponsor">Le <a href="https://github.com/strongloop/express/">projet Express</a> est sponsorisé par <a href="http://strongloop.com/">StrongLoop</a>. </div>
        <div id="fork"><a href="https://github.com/strongloop/expressjs.com">Consultez le site Web GitHub</a>.
        </div>
        <div>Copyright &copy; StrongLoop, Inc., et autres contributeurs expressjs.com.</div>
    </div>
</footer>


  </body>

</html>
