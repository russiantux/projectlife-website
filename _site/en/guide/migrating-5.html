<!DOCTYPE html>
<html lang="en">

  <head>
    <title>Migrating to Express 5</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/dropit.css">
    <link rel="stylesheet" href="/css/prism.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;amp;subset=latin,latin-ext">
    <link rel="stylesheet" href="/css/en.css">        
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script data-cfasync="false" src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script data-cfasync="false" src="/js/app.js"></script>
    <script data-cfasync="false" src="/js/retina.js"></script>
    <script data-cfasync="false" src="/js/dropit.js"></script>
    <script data-cfasync="false" src="/js/prism.js"></script>
</head>


  
  <body class="en-doc">
  

    <section class="page content">

      <header>
  <div id="mobile-menu">
      <div id="nav-button" class="fa fa-bars fa-2x button"></div>
  </div>
  <section id="logo"><a href="/" class="express">Express</a>
  </section>
  <div id="navbar">
      <ul id="navmenu">
          <li><a href="/" id="home-menu">Home</a></li>
          <li>
              <ul id="getting-started-menu" class="menu">
                  <li><a href="/en/starter/installing.html">Getting started</a>
                      <ul>
                          <li>
                            <a href="/en/starter/installing.html">
                              Installing
                            </a>
                          </li>
                          <li>
                            <a href="/en/starter/hello-world.html">
                              Hello world
                            </a>
                          </li>
                          <li>
                          <a href="/en/starter/generator.html">
                            Express generator
                          </a>
                          </li>
                          <li>
                            <a href="/en/starter/basic-routing.html">
                              Basic routing
                            </a>
                          </li>
                          <li>
                            <a href="/en/starter/static-files.html">
                              Static files
                            </a>
                          </li>
                          <li>
                            <a href="/en/starter/faq.html">
                              FAQ
                            </a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="guide-menu" class="menu">
                  <li><a href="/en/guide/routing.html" class="active">Guide</a>
                      <ul>
                          <li><a href="/en/guide/routing.html">Routing</a>
                          </li>
                          <li><a href="/en/guide/writing-middleware.html">Writing middleware</a>
                          </li>
                          <li><a href="/en/guide/using-middleware.html">Using middleware</a>
                          </li>
                          <li><a href="/en/guide/using-template-engines.html">Using template engines</a>
                          </li>
                          <li><a href="/en/guide/error-handling.html">Error handling</a>
                          </li>
                          <li><a href="/en/guide/debugging.html">Debugging</a>
                          </li>
                          <li><a href="/en/guide/behind-proxies.html">Express behind proxies</a>
                          </li>
                          <li><a href="/en/guide/migrating-4.html">Moving to Express 4</a>
                          </li>
                          <li><a href="/en/guide/migrating-5.html">Moving to Express 5</a>
                          </li>
                          <li><a href="/en/guide/database-integration.html">Database integration</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="application-menu" class="menu">
                  <li><a href="/en/4x/api.html">API reference</a>
                      <ul>
                          <li><a href="/en/4x/api.html">4.x</a>
                          </li>
                          <li><a href="/en/3x/api.html">3.x (deprecated)</a>
                          </li>
                          <li><a href="/en/2x/">2.x (deprecated)</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="advanced-topics-menu" class="menu">
                  <li><a href="/en/advanced/developing-template-engines.html">Advanced topics</a>
                      <ul>
                          <li><a href="/en/advanced/developing-template-engines.html">Template engines</a>
                          </li>
                          <li><a href="/en/advanced/pm.html">Using process managers</a>
                          </li>
                          <li><a href="/en/advanced/security-updates.html">Security updates</a>
                          </li>
                          <li><a href="/en/advanced/best-practice-security.html">Security best practices</a>
                          </li>
                          <li><a href="/en/advanced/best-practice-performance.html">Performance best practices</a>
                          </li>

                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="resources-menu" class="menu">
                  <li><a href="/en/resources/glossary.html">Resources</a>
                      <ul>
                          <li><a href="/en/resources/glossary.html">Glossary</a>
                          </li>
                          <li><a href="/en/resources/middleware.html">Middleware</a>
                          </li>
                          <li><a href="/en/resources/community.html">Community</a>
                          </li>
                          <li><a href="/en/resources/books-blogs.html">Books and blogs</a>
                          </li>
                          <li><a href="/en/resources/applications.html">Applications</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
      </ul>
  </div><a href="http://strongloop.com/node-js/training/" title="Node and Express Training from StrongLoop" id="strongloop-header">Express and Node.js Training from StrongLoop</a>
</header>


      <div id="overlay"></div>

      

      <h1 id="moving-to-express-5">Moving to Express 5</h1>

<h2 id="overview">Overview</h2>

<p>Express 5.0 is still in the alpha release stage, but here is a preview of the changes that will be in the release and how to migrate your Express 4 app to Express 5.</p>

<p>Express 5 is not very different from Express 4: The changes to the API are not as significant as from 3.0 to 4.0.  Although the basic API remains the same, there are still breaking changes; in other words an existing Express 4 program might not work if you update it to use Express 5.</p>

<p>To install the latest alpha and to preview Express 5, enter the following command in your application root directory:</p>

<pre><code class="language-sh" translate="no">
$ npm install express@5.0.0-alpha.2 --save
</code></pre>

<p>You can then run your automated tests to see what fails, and fix problems according to the updates listed below. After addressing test failures, run your app to see what errors occur. You’ll find out right away if the app uses any methods or properties that are not supported.</p>

<h2 id="changes">Changes in Express 5</h2>

<p>Here is the list of changes (as of the alpha 2 release ) that will affect you as a user of Express.
See the <a href="https://github.com/strongloop/express/pull/2237">pull request</a> for a list of all the planned features.</p>

<p><strong>Removed methods and properties</strong></p>

<ul class="doclist">
  <li><a href="#app.del">app.del()</a></li>
  <li><a href="#app.param">app.param(fn)</a></li>
  <li><a href="#plural">Pluralized method names</a></li>
  <li><a href="#leading">Leading colon in name argument to app.param(name, fn)</a></li>
  <li><a href="#req.param">req.param(name)</a></li>
  <li><a href="#res.json">res.json(obj, status)</a></li>
  <li><a href="#res.jsonp">res.jsonp(obj, status)</a></li>
  <li><a href="#res.send.body">res.send(body, status)</a></li>
  <li><a href="#res.send.status">res.send(status)</a></li>
  <li><a href="#res.sendfile">res.sendfile()</a></li>
</ul>

<p><strong>Changed</strong></p>

<ul class="doclist">
  <li><a href="#app.router">app.router</a></li>
  <li><a href="#req.host">req.host</a></li>
  <li><a href="#req.query">req.query</a></li>
</ul>

<p><strong>Improvements</strong></p>

<ul class="doclist">
  <li><a href="#res.render">res.render()</a></li>
</ul>

<h3>Removed methods and properties</h3>

<p>If you use any of these methods or properties in your app, it will crash. So, you’ll need to change your app after you update to version 5.</p>

<h4 id="app.del">app.del()</h4>

<p>Express 5 no longer supports the <code class="highlighter-rouge">app.del()</code> function. If you use this function an error is thrown. For registering HTTP DELETE routes, use the <code class="highlighter-rouge">app.delete()</code> function instead.</p>

<p>Initially <code class="highlighter-rouge">del</code> was used instead of <code class="highlighter-rouge">delete</code>, because <code class="highlighter-rouge">delete</code> is a reserved keyword in JavaScript. However, as of ECMAScript 6, <code class="highlighter-rouge">delete</code> and other reserved keywords can legally be used as property names. You can read the discussion that led to the deprecation of the <code class="highlighter-rouge">app.del</code> function here.</p>

<h4 id="app.param">app.param(fn)</h4>

<p>The <code class="highlighter-rouge">app.param(fn)</code> signature was used for modifying the behavior of the <code class="highlighter-rouge">app.param(name, fn)</code> function. It has been deprecated since v4.11.0, and Express 5 no longer supports it at all.</p>

<h4 id="plural">Pluralized method names</h4>

<p>The following method names have been pluralized. In Express 4, using the old methods resulted in a deprecation warning.  Express 5 no longer supports them at all:</p>

<p><code class="highlighter-rouge">req.acceptsCharset()</code> is replaced by <code class="highlighter-rouge">req.acceptsCharsets()</code>.</p>

<p><code class="highlighter-rouge">req.acceptsEncoding()</code> is replaced by <code class="highlighter-rouge">req.acceptsEncodings()</code>.</p>

<p><code class="highlighter-rouge">req.acceptsLanguage()</code> is replaced by <code class="highlighter-rouge">req.acceptsLanguages()</code>.</p>

<h4 id="leading">Leading colon (:) in the name for app.param(name, fn)</h4>

<p>A leading colon character (:) in the name for the <code class="highlighter-rouge">app.param(name, fn)</code> function is a remnant of Express 3, and for the sake of backwards compatibility, Express 4 supported it with a deprecation notice. Express 5 will silently ignore it and use the name parameter without prefixing it with a colon.</p>

<p>This should not affect your code if you follow the Express 4 documentation of <a href="/en/4x/api.html#app.param">app.param</a>, as it makes no mention of the leading colon.</p>

<h4 id="req.param">req.param(name)</h4>

<p>This potentially confusing and dangerous method of retrieving form data has been removed. You will now need to specifically look for the submitted parameter name in the <code class="highlighter-rouge">req.params</code>, <code class="highlighter-rouge">req.body</code>, or <code class="highlighter-rouge">req.query</code> object.</p>

<h4 id="res.json">res.json(obj, status)</h4>

<p>Express 5 no longer supports the signature <code class="highlighter-rouge">res.json(obj, status)</code>. Instead, set the status and then chain it to the <code class="highlighter-rouge">res.json()</code> method like this: <code class="highlighter-rouge">res.status(status).json(obj)</code>.</p>

<h4 id="res.jsonp">res.jsonp(obj, status)</h4>

<p>Express 5 no longer supports the signature <code class="highlighter-rouge">res.jsonp(obj, status)</code>. Instead, set the status and then chain it to the <code class="highlighter-rouge">res.jsonp()</code> method like this: <code class="highlighter-rouge">res.status(status).jsonp(obj)</code>.</p>

<h4 id="res.send.body">res.send(body, status)</h4>

<p>Express 5 no longer supports the signature <code class="highlighter-rouge">res.send(obj, status)</code>. Instead, set the status and then chain it to the <code class="highlighter-rouge">res.send()</code> method like this: <code class="highlighter-rouge">res.status(status).send(obj)</code>.</p>

<h4 id="res.send.status">res.send(status)</h4>

<p>Express 5 no longer supports the signature <code>res.send(<em>status</em>)</code>, where <em><code class="highlighter-rouge">status</code></em> is a number. Instead, use the <code class="highlighter-rouge">res.sendStatus(statusCode)</code> function, which sets the HTTP response header status code and sends the text version of the code: “Not Found”, “Internal Server Error”, and so on.
If you need to send a number by using the <code class="highlighter-rouge">res.send()</code> function, quote the number to convert it to a string, so that Express does not interpret it as an attempt to use the unsupported old signature.</p>

<h4 id="res.sendfile">res.sendfile()</h4>

<p>The <code class="highlighter-rouge">res.sendfile()</code> function has been replaced by a camel-cased version <code class="highlighter-rouge">res.sendFile()</code> in Express 5.</p>

<h3>Changed</h3>

<h4 id="app.router">app.router</h4>

<p>The <code class="highlighter-rouge">app.router</code> object, which was removed in Express 4, has made a comeback in Express 5. In the new version, this object is a just a reference to the base Express router, unlike in Express 3, where an app had to explicitly load it.</p>

<h4 id="req.host">req.host</h4>

<p>In Express 4, the <code class="highlighter-rouge">req.host</code> function incorrectly stripped off the port number if it was present. In Express 5 the port number is maintained.</p>

<h4 id="req.query">req.query</h4>

<p>In Express 4.7 and Express 5 onwards, the query parser option can accept <code class="highlighter-rouge">false</code> to disable query string parsing when you want to use your own function for query string parsing logic.</p>

<h3>Improvements</h3>

<h4 id="res.render">res.render()</h4>

<p>This method now enforces asynchronous behavior for all view engines, avoiding bugs caused by view engines that had a synchronous implementation and that violated the recommended interface.</p>


    </section>

    <noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5XL76H" height="0" width="0" style="display: none; visibility: hidden;"></iframe>
</noscript>
<script>
(function(w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
        '//www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-5XL76H');
</script>
<a id="top" href="#"><img src="/images/arrow.png"></a>

<footer>
    <div id="footer-content">
        <div id="github">
            <iframe src="http://ghbtns.com/github-btn.html?user=strongloop&amp;repo=express&amp;type=watch&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>
        </div>
        <div id="sponsor">The <a href="https://github.com/strongloop/express/">Express project</a> is sponsored by <a href="http://strongloop.com/">StrongLoop</a>. </div>
        <div id="fork"><a href="https://github.com/strongloop/expressjs.com">Fork the website on GitHub</a>.
        </div>
        <div>Copyright &copy; StrongLoop, Inc., and other expressjs.com contributors.</div>
    </div>
</footer>


  </body>

</html>
