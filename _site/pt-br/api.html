<!DOCTYPE html>
<html lang="pt-br">

  <head>
    <title>Express 4.x - Referência de API</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/dropit.css">
    <link rel="stylesheet" href="/css/prism.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;amp;subset=latin,latin-ext">
    <link rel="stylesheet" href="/css/pt-br.css">        
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script data-cfasync="false" src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script data-cfasync="false" src="/js/app.js"></script>
    <script data-cfasync="false" src="/js/retina.js"></script>
    <script data-cfasync="false" src="/js/dropit.js"></script>
    <script data-cfasync="false" src="/js/prism.js"></script>
</head>


  <body>

    <section class="content">

      <header>
  <div id="mobile-menu">
      <div id="nav-button" class="fa fa-bars fa-2x button"></div>
  </div>
  <section id="logo"><a href="/" class="express">Express</a>
  </section>
  <div id="navbar">
      <ul id="navmenu">
          <li><a href="/pt-br/" id="home-menu">Página Inicial</a></li>
          <li>
              <ul id="getting-started-menu" class="menu">
                  <li><a href="/pt-br/starter/installing.html">Introdução</a>
                      <ul>
                          <li>
                            <a href="/pt-br/starter/installing.html">
                              Instalação
                            </a>
                          </li>
                          <li>
                            <a href="/pt-br/starter/hello-world.html">
                              Hello world
                            </a>
                          </li>
                          <li>
                          <a href="/pt-br/starter/generator.html">
                            Gerador do Express
                          </a>
                          </li>
                          <li>
                            <a href="/pt-br/starter/basic-routing.html">
                              Roteamento Básico
                            </a>
                          </li>
                          <li>
                            <a href="/pt-br/starter/static-files.html">
                              Arquivos Estáticos
                            </a>
                          </li>
                          <li>
                            <a href="/pt-br/starter/faq.html">
                              Perguntas mais frequentes
                            </a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="guide-menu" class="menu">
                  <li><a href="/pt-br/guide/routing.html">Guia</a>
                      <ul>
                          <li><a href="/pt-br/guide/routing.html">Roteamento</a>
                          </li>
                          <li><a href="/pt-br/guide/writing-middleware.html">Escrevendo o middleware</a>
                          </li>
                          <li><a href="/pt-br/guide/using-middleware.html">Usando o middleware</a>
                          </li>
                          <li><a href="/pt-br/guide/using-template-engines.html">Usando o mecanismo de modelo</a>
                          </li>
                          <li><a href="/pt-br/guide/error-handling.html">Manipulação de erros</a>
                          </li>
                          <li><a href="/pt-br/guide/debugging.html">Depuração</a>
                          </li>
                          <li><a href="/pt-br/guide/behind-proxies.html">Express atrás de proxies</a>
                          </li>
                          <li><a href="/pt-br/guide/migrating-4.html">Migrando para o Express 4</a>
                          </li>
                          <li><a href="/pt-br/guide/migrating-5.html">Migrando para o Express 5</a>
                          </li>
                          <li><a href="/pt-br/guide/database-integration.html">Integração de Banco de dados</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="application-menu" class="menu">
                  <li><a href="/pt-br/4x/api.html">Referência da API</a>
                      <ul>
                          <li><a href="/pt-br/4x/api.html">4.x</a>
                          </li>
                          <li><a href="/pt-br/3x/api.html">3.x (descontinuada)</a>
                          </li>
                          <li><a href="/pt-br/2x/">2.x (descontinuada)</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="advanced-topics-menu" class="menu">
                  <li><a href="/pt-br/advanced/developing-template-engines.html">Tópicos Avançados</a>
                      <ul>
                          <li><a href="/pt-br/advanced/developing-template-engines.html">Mecanismos de modelo</a>
                          </li>
                          <li><a href="/pt-br/advanced/pm.html">Usando gerenciadores de processos</a>
                          </li>
                          <li><a href="/pt-br/advanced/security-updates.html">Atualizações de segurança</a>
                          </li>
                          <li><a href="/pt-br/advanced/best-practice-security.html">Melhores práticas de segurança</a>
                          </li>
                          <li><a href="/pt-br/advanced/best-practice-performance.html">Melhores práticas de desempenho</a>
                          </li>

                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="resources-menu" class="menu">
                  <li><a href="/pt-br/resources/glossary.html">Recursos</a>
                      <ul>
                          <li><a href="/pt-br/resources/glossary.html">Glossário</a>
                          </li>
                          <li><a href="/pt-br/resources/middleware.html">Middleware</a>
                          </li>
                          <li><a href="/pt-br/resources/community.html">Comunidade</a>
                          </li>
                          <li><a href="/pt-br/resources/books-blogs.html">Livros e blogs</a>
                          </li>
                          <li><a href="/pt-br/resources/applications.html">Aplicativos</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
      </ul>
  </div><a href="http://strongloop.com/node-js/training/" title="Treinamento de Node e Express do StrongLoop" id="strongloop-header">Treinamento de Express e Node.js do StrongLoop</a>
</header>


      <ul id="menu">

    <li id="express-api"><a href="#express">express()</a>
    <ul id="express-menu">
        <li><em>Métodos</em></li>
        <li id="express-static-middleware"><a href="#express.static">express.static()</a></li>
    </ul>
    </li>

    <li id="app-api"><a href="#app">Aplicação</a>
        <ul id="app-menu">
            <li><em>Propriedades</em>
            </li>
            <li><a href="#app.locals">app.locals</a>
            </li>
            <li><a href="#app.mountpath">app.mountpath</a>
            </li>
            <li><em>Eventos</em>
            </li>
            <li><a href="#app.onmount">mount</a>
            </li>
            <li><em>Métodos</em>
            </li>
            <li><a href="#app.all">app.all()</a>
            </li>
            <li><a href="#app.delete.method">app.delete()</a>
            </li>
            <li><a href="#app.disable">app.disable()</a>
            </li>
            <li><a href="#app.disabled">app.disabled()</a>
            </li>
            <li><a href="#app.enable">app.enable()</a>
            </li>
            <li><a href="#app.enabled">app.enabled()</a>
            </li>
            <li><a href="#app.engine">app.engine()</a>
            </li>
            <li><a href="#app.get">app.get()</a>
            </li>
            <li><a href="#app.get.method">app.get()</a>
            </li>
            <li><a href="#app.listen">app.listen()</a>
            </li>
            <li><a href="#app.METHOD">app.METHOD()</a>
            </li>
            <li><a href="#app.param">app.param()</a>
            </li>
            <li><a href="#app.path">app.path()</a>
            </li>
            <li><a href="#app.post.method">app.post()</a>
            </li>
            <li><a href="#app.put.method">app.put()</a>
            </li>
            <li><a href="#app.render">app.render()</a>
            </li>
            <li><a href="#app.route">app.route()</a>
            </li>
            <li><a href="#app.set">app.set()</a>
            </li>
            <li><a href="#app.use">app.use()</a>
            </li>
        </ul>
    </li>
    <li id="req-api"><a href="#req">Requisição (request)</a>
        <ul id="req-menu">
            <li><em>Propriedades</em>
            </li>
            <li><a href="#req.app">req.app</a>
            </li>
            <li><a href="#req.baseUrl">req.baseUrl</a>
            </li>
            <li><a href="#req.body">req.body</a>
            </li>
            <li><a href="#req.cookies">req.cookies</a>
            </li>
            <li><a href="#req.fresh">req.fresh</a>
            </li>
            <li><a href="#req.hostname">req.hostname</a>
            </li>
            <li><a href="#req.ip">req.ip</a>
            </li>
            <li><a href="#req.ips">req.ips</a>
            </li>
            <li><a href="#req.originalUrl">req.originalUrl</a>
            </li>
            <li><a href="#req.params">req.params</a>
            </li>
            <li><a href="#req.path">req.path</a>
            </li>
            <li><a href="#req.protocol">req.protocol</a>
            </li>
            <li><a href="#req.query">req.query</a>
            </li>
            <li><a href="#req.route">req.route</a>
            </li>
            <li><a href="#req.secure">req.secure</a>
            </li>
            <li><a href="#req.signedCookies">req.signedCookies</a>
            </li>
            <li><a href="#req.stale">req.stale</a>
            </li>
            <li><a href="#req.subdomains">req.subdomains</a>
            </li>
            <li><a href="#req.xhr">req.xhr</a>
            </li>
            <li><em>Métodos</em>
            </li>
            <li><a href="#req.accepts">req.accepts()</a>
            </li>
            <li><a href="#req.acceptsCharsets">req.acceptsCharsets()</a>
            </li>
            <li><a href="#req.acceptsEncodings">req.acceptsEncodings()</a>
            </li>
            <li><a href="#req.acceptsLanguages">req.acceptsLanguages()</a>
            </li>
            <li><a href="#req.get">req.get()</a>
            </li>
            <li><a href="#req.is">req.is()</a>
            </li>
            <li><a href="#req.param">req.param()</a>
            </li>
        </ul>
    </li>
    <li id="res-api"><a href="#res">Resposta (response)</a>
        <ul id="res-menu">
            <li><em>Propriedades</em>
            </li>
            <li><a href="#res.app">res.app      </a>
            </li>
            <li><a href="#res.headersSent">res.headersSent</a>
            </li>
            <li><a href="#res.locals">res.locals</a>
            </li>
            <li><em>Métodos</em>
            </li>
            <li><a href="#res.append">res.append()</a>
            </li>
            <li><a href="#res.attachment">res.attachment()</a>
            </li>
            <li><a href="#res.cookie">res.cookie()</a>
            </li>
            <li><a href="#res.clearCookie">res.clearCookie()</a>
            </li>
            <li><a href="#res.download">res.download()</a>
            </li>
            <li><a href="#res.end">res.end()</a>
            </li>
            <li><a href="#res.format">res.format()</a>
            </li>
            <li><a href="#res.get">res.get()</a>
            </li>
            <li><a href="#res.json">res.json()</a>
            </li>
            <li><a href="#res.jsonp">res.jsonp()</a>
            </li>
            <li><a href="#res.links">res.links()</a>
            </li>
            <li><a href="#res.location">res.location()</a>
            </li>
            <li><a href="#res.redirect">res.redirect()</a>
            </li>
            <li><a href="#res.render">res.render()</a>
            </li>
            <li><a href="#res.send">res.send()</a>
            </li>
            <li><a href="#res.sendFile">res.sendFile()</a>
            </li>
            <li><a href="#res.sendStatus">res.sendStatus()</a>
            </li>
            <li><a href="#res.set">res.set()</a>
            </li>
            <li><a href="#res.status">res.status()</a>
            </li>
            <li><a href="#res.type">res.type()</a>
            </li>
            <li><a href="#res.vary">res.vary()</a>
            </li>
        </ul>
    </li>
    <li id="router-api"><a href="#router">Roteador</a>
        <ul id="router-menu">
            <li><a href="#router">Router()</a>
            </li>
            <li><em>Métodos</em>
            </li>
            <li><a href="#router.all">router.all()</a>
            </li>
            <li><a href="#router.METHOD">router.METHOD()</a>
            </li>
            <li><a href="#router.param">router.param()</a>
            </li>
            <li><a href="#router.route">router.route()</a>
            </li>
            <li><a href="#router.use">router.use()</a>
            </li>
        </ul>
    </li>
</ul>


      <div id="overlay"></div>

      
        <div id="i18n-notice-box" class="doc-box doc-warn">
          <p>Este documento pode estar desatualizado em relação à documentação em Inglês. Para obter as atualizações mais recentes, consulte a <a href="/">documentação em Inglês</a>.
</p>
<p>This document might be outdated relative to the documentation in English. For the latest updates, please refer to the <a href="/">documentation in English</a>.
</p>
<div id="close-i18n-notice-box" title="Close">✖</div>

        </div>
      
    
      <div id="api-doc">

  <h1>API 4.x</h1>

  <p><a id="express" class="h2"></a></p>
  <h2>express()</h2>

  <p>Cria uma aplicação Express. A função <code class="highlighter-rouge">express()</code> é uma função de alto nível exportada pelo módulo <em>express</em>.</p>

  <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</code></pre>
  </div>

  <h3 id="express.methods">Methods</h3>

  <section>
    <h3 id="express.static" class="h2">express.static(root, [options])</h3>

    <p><code class="highlighter-rouge">express.static</code> é o único ‘middleware’ embutido no Express. Ele é baseado no <a href="https://github.com/expressjs/serve-static">serve-static</a>, e é responsável em servir conteúdo estático de uma aplicação Express.</p>

    <p>O argumento <code class="highlighter-rouge">root</code> se refere ao diretório raiz no qual o conteúdo estático será distribuído.</p>

    <p>O objeto opcional <code class="highlighter-rouge">options</code> pode conter as seguintes propriedades:</p>

    <table>
      <thead>
        <tr>
          <th>Propriedade</th>
          <th>Descrição</th>
          <th>Tipo</th>
          <th>Padrão</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code class="highlighter-rouge">dotfiles</code></td>
          <td>Opção para servir ‘dotfiles’. Os valores possíveis são: “allow”, “deny”, e “ignore”</td>
          <td>String</td>
          <td>“ignore”</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">etag</code></td>
          <td>Ativa ou desativa a geração de ‘etags’.</td>
          <td>Boolean</td>
          <td><code class="highlighter-rouge">true</code></td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">extensions</code></td>
          <td>Conjunto de extensões de arquivos.</td>
          <td>Boolean</td>
          <td><code class="highlighter-rouge">false</code></td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">index</code></td>
          <td>Envia arquivo de indexação de diretórios. Atribua <code class="highlighter-rouge">false</code> para desabilitar a indexação de diretórios.</td>
          <td>Mixed</td>
          <td>“index.html”</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">lastModified</code></td>
          <td>Defina o cabeçalho <code class="highlighter-rouge">Last-Modified</code> para a data da ultima alteração do arquivo no sistema operacional. Os valores possiveis são: <code class="highlighter-rouge">true</code> ou <code class="highlighter-rouge">false</code>.</td>
          <td>Boolean</td>
          <td><code class="highlighter-rouge">true</code></td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">maxAge</code></td>
          <td>Defina a propriedade max-age para o controle de cache em milisegundos ou uma string no formato <a href="https://www.npmjs.org/package/ms">ms format</a></td>
          <td>Number</td>
          <td>0</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">redirect</code></td>
          <td>Redireciona a rota “/” quando o caminho for um diretório.</td>
          <td>Boolean</td>
          <td><code class="highlighter-rouge">true</code></td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">setHeaders</code></td>
          <td>Função para definir cabeçalhos HTTP a ser servido com o conteúdo estático.</td>
          <td>Function</td>
          <td> </td>
        </tr>
      </tbody>
    </table>

    <p>Para mais detalhes de utilização do middleware, consulte: <a href="/starter/static-files.html">Servindo arquivos estáticos pelo Express</a>.</p>
  </section>

  <p><a id="app" class="h2"></a></p>
  <h2>Aplicativo Express</h2>

  <p>O objeto<code class="highlighter-rouge">app</code> convensionalmente é o aplicativo Express.
Para criar este objeto chamamos a função de alto nível <code class="highlighter-rouge">express()</code>, que é exportada pelo módulo Express:</p>

  <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'hello world'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</code></pre>
  </div>

  <p>O objeto <code class="highlighter-rouge">app</code> possui métodos para:
* Roteamento de requisições HTTP; veja por exemplo, <a href="#app.METHOD">app.METHOD</a> e <a href="#app.param">app.param</a>.
* Configuração de middlewares; veja <a href="#app.route">app.route</a>.
* Renderização de views HTML; veja <a href="#app.render">app.render</a>.
* Definição de template engine; veja <a href="#app.engine">app.engine</a>.</p>

  <p>O <code class="highlighter-rouge">app</code> também tem configurações (propriedades) que afetam o comportamento do aplicativo;
para mais informações, consulte <a href="#app.settings.table">Application settings</a>.</p>

  <h3 id="app.properties">Propriedades (Properties)</h3>

  <section>
    <h3 id="app.locals">app.locals</h3>

    <p><code class="highlighter-rouge">app.locals</code> é um objeto JavaScript, e suas propriedades são variáveis locais dentro da aplicação.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">title</span>
<span class="c1">// =&gt; 'My App'</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">email</span>
<span class="c1">// =&gt; 'me@myapp.com'</span>
</code></pre>
    </div>

    <p>Quando é definido um valor para uma propriedade de <code class="highlighter-rouge">app.locals</code>, este valor persiste por toda a vida da aplicação; ao contrário de propriedades definidas com <a href="#res.locals">res.locals</a> que são válidas somente durante a tempo de vida da requisição.</p>

    <p>Você pode acessar variáveis locais em renderização de templates dentro da aplicação.
Isto é muito útil para criar funções de ajuda <code class="highlighter-rouge">helper</code> para templates, bem como dados a nível de app. Variáveis locais estão disponíveis em middlewares via <code class="highlighter-rouge">req.app.locals</code> (Veja <a href="#req.app">req.app</a>).</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="s1">'My App'</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">strftime</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'strftime'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">email</span> <span class="o">=</span> <span class="s1">'me@myapp.com'</span><span class="p">;</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.mountpath">app.mountpath</h3>

    <p>A propriedade <code class="highlighter-rouge">app.mountpath</code> é o caminho padrão no qual uma sub aplicação foi montada.</p>

    <div class="doc-box doc-info">
      <p>Uma sub aplicação é uma instância de <code class="highlighter-rouge">express</code> que pode ser utilizada para manipular a solicitação para uma rota.</p>
    </div>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span> <span class="c1">// a aplicação principal</span>
<span class="kd">var</span> <span class="nx">admin</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span> <span class="c1">// a sub aplicação</span>

<span class="nx">admin</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">admin</span><span class="p">.</span><span class="nx">mountpath</span><span class="p">);</span> <span class="c1">// /admin</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Admin Homepage'</span><span class="p">);</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/admin'</span><span class="p">,</span> <span class="nx">admin</span><span class="p">);</span> <span class="c1">// montar a sub aplicação</span>
</code></pre>
    </div>

    <p>É semelhante à propriedade <a href="#req.baseUrl">baseUrl</a> do objeto <code class="highlighter-rouge">req</code>, exceto que <code class="highlighter-rouge">req.baseUrl</code> retorna o caminho de URL correspondente, em vez do padrão correspondente.</p>

    <p>Se uma sub aplicação é montada em vários caminhos padrões, <code class="highlighter-rouge">app.mountpath</code> devolve a lista de padrões que está montado, como mostrado no exemplo a seguir.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">admin</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">admin</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">admin</span><span class="p">.</span><span class="nx">mountpath</span><span class="p">);</span> <span class="c1">// [ '/adm*n', '/manager' ]</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Admin Homepage'</span><span class="p">);</span>
<span class="p">})</span>

<span class="kd">var</span> <span class="nx">secret</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="nx">secret</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">secret</span><span class="p">.</span><span class="nx">mountpath</span><span class="p">);</span> <span class="c1">// /secr*t</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Admin Secret'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">admin</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/secr*t'</span><span class="p">,</span> <span class="nx">secret</span><span class="p">);</span> <span class="c1">// carrega o roteador 'secret' em '/secr*t', sobre a sub aplicação 'admin'</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">([</span><span class="s1">'/adm*n'</span><span class="p">,</span> <span class="s1">'/manager'</span><span class="p">],</span> <span class="nx">admin</span><span class="p">);</span> <span class="c1">// carrega o roteador 'admin' em '/adm*n' e '/manager', sobre a aplicação pai</span>
</code></pre>
    </div>

  </section>

  <h3 id="app.events">Eventos (Events)</h3>

  <section>
    <h3 id="app.onmount">app.on('mount', callback(parent))</h3>

    <p>O evento <code class="highlighter-rouge">mount</code> é acionado em uma sub aplicação, quando é montado em uma aplicação pai. A aplicação pai é passado para a função de <em>callback</em>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">admin</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">admin</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'mount'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Admin Mounted'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span> <span class="c1">// refere-se a aplicação pai</span>
<span class="p">});</span>

<span class="nx">admin</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Admin Homepage'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/admin'</span><span class="p">,</span> <span class="nx">admin</span><span class="p">);</span>
</code></pre>
    </div>

  </section>

  <h3 id="app.methods">Métodos (Methods)</h3>

  <section>
    <h3 id="app.all">app.all(path, callback [, callback ...])</h3>

    <p>Este método trabalho como o padrão <a href="#app.METHOD">app.METHOD()</a>, exceto que casa com todos os métodos de requisição HTTP.</p>

    <p>Isto é útil para inserir uma lógica “global” para qualquer requisição.
Por exemplo, se você colocar o seguinte código antes de todas as outras definições de rota, será exigida para qualquer requisição uma autenticação, e um usuário será carregado automaticamente. 
Tenha em mente que os callbacks não precisam agir como pontos finais da rota: <code class="highlighter-rouge">loadUser</code>, por exemplo, pode realizar uma tarefa e então chamar <code class="highlighter-rouge">next()</code> para continuar a sequência de casamento das próximas rotas.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'*'</span><span class="p">,</span> <span class="nx">requireAuthentication</span><span class="p">,</span> <span class="nx">loadUser</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Ou equivalente:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'*'</span><span class="p">,</span> <span class="nx">requireAuthentication</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'*'</span><span class="p">,</span> <span class="nx">loadUser</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Um outro exemplo é a utilização para requisições de funcionalidades globais.
O próximo exemplo funciona como o anterior, porém está restringindo a exigência de autenticação a rotas que iniciem com “/api”:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'/api/*'</span><span class="p">,</span> <span class="nx">requireAuthentication</span><span class="p">);</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.delete.method">app.delete(path, callback [, callback ...])</h3>

    <p>Routes HTTP DELETE requisitam à path específica com as funções callback específicas.
Para mais informações, veja o <a href="/guide/routing.html">routing guide</a>.</p>

    <p>Você pode fornecer multiplas funções callback que se comportam como middleware, com exceção de
que esses callbacks podem chamar <code class="highlighter-rouge">next('route')</code> para ignorar a(s) restante(s) route
callback(s). Você pode usar este mecanismo para impor condições prévias em uma route, então passar
o controle para routes subsequentes se não houver razão para continuar na route atual.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'DELETE request to homepage'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.disable">app.disable(name)</h3>

    <p>Define o Booleano <code class="highlighter-rouge">name</code> para <code class="highlighter-rouge">false</code>, onde <code class="highlighter-rouge">name</code> é uma das propriedades da <a href="#app.settings.table">tabela de configurações da aplicação</a>.
Chamar <code class="highlighter-rouge">app.set('foo', false)</code> para uma propriedade Booleana é o mesmo que chamar <code class="highlighter-rouge">app.disable('foo')</code>.</p>

    <p>Por exemplo:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">disable</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="c1">// =&gt; false</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.disabled">app.disabled(name)</h3>

    <p>Retorna <code class="highlighter-rouge">true</code> se o Booleano <code class="highlighter-rouge">name</code> está desativado (<code class="highlighter-rouge">false</code>), onde <code class="highlighter-rouge">name</code> é uma das
propriedades da <a href="#app.settings.table">tabela de configurações da aplicação</a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">disabled</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="c1">// =&gt; true</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">enable</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">disabled</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="c1">// =&gt; false</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.enable">app.enable(name)</h3>

    <p>Define o Booleano <code class="highlighter-rouge">name</code> para <code class="highlighter-rouge">true</code>, onde <code class="highlighter-rouge">name</code> é uma das propriedades da <a href="#app.settings.table">tabela de configurações da aplicação</a>.
Chamar <code class="highlighter-rouge">app.set('foo', true)</code> para uma propriedade Booleana é o mesmo que chamar <code class="highlighter-rouge">app.enable('foo')</code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">enable</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="c1">// =&gt; true</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.enabled">app.enabled(name)</h3>

    <p>Retorna <code class="highlighter-rouge">true</code> se a configuração <code class="highlighter-rouge">name</code> está ativada (<code class="highlighter-rouge">true</code>), onde <code class="highlighter-rouge">name</code> é uma das
propriedades da <a href="#app.settings.table">tabela de configurações da aplicação</a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">enabled</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="c1">// =&gt; false</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">enable</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">enabled</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="c1">// =&gt; true</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.engine">app.engine(ext, callback)</h3>

    <p>Registra o motor de template <code class="highlighter-rouge">callback</code> como <code class="highlighter-rouge">ext</code>.</p>

    <p>Por padrão, Express vai <code class="highlighter-rouge">require()</code> o motor baseado na extensão do arquivo.
Por exemplo, se você tentar renderizar o arquivo “foo.jade”, Express invoca o
seguinte internamente e guarda o <code class="highlighter-rouge">require()</code> nas chamadas subseqüentes para
aumentar o desempenho.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">engine</span><span class="p">(</span><span class="s1">'jade'</span><span class="p">,</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jade'</span><span class="p">).</span><span class="nx">__express</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Use este método para motores que não fornecem <code class="highlighter-rouge">.__express</code> ou se você
deseja mapear uma extensão diferente para o motor de template.</p>

    <p>Por examplo, para mapear o motor de template EJS para arquivos “.html”:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">engine</span><span class="p">(</span><span class="s1">'html'</span><span class="p">,</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'ejs'</span><span class="p">).</span><span class="nx">renderFile</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Neste caso, EJS fornece um método <code class="highlighter-rouge">.renderFile()</code> com
a mesma assinatura que o Express espera: <code class="highlighter-rouge">(path, options, callback)</code>,
embora note que ele chama o método <code class="highlighter-rouge">ejs.__express</code> internamente por isso,
se você está usando extensões “.ejs” você não precisa fazer nada.</p>

    <p>Alguns motores de template não seguem esta convenção. A
biblioteca <a href="https://github.com/tj/consolidate.js">consolidate.js</a> mapeia
motores de template Node para seguir esta convenção, para que eles funcionem
sem problemas com Express.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">engines</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'consolidate'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">engine</span><span class="p">(</span><span class="s1">'haml'</span><span class="p">,</span> <span class="nx">engines</span><span class="p">.</span><span class="nx">haml</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">engine</span><span class="p">(</span><span class="s1">'html'</span><span class="p">,</span> <span class="nx">engines</span><span class="p">.</span><span class="nx">hogan</span><span class="p">);</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.get">app.get(name)</h3>

    <p>Retorna o valor da configuração <code class="highlighter-rouge">name</code>, onde <code class="highlighter-rouge">name</code> é uma das propriedades da
<a href="#app.settings.table">tabela de configurações da aplicação</a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'title'</span><span class="p">);</span>
<span class="c1">// =&gt; undefined</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'title'</span><span class="p">,</span> <span class="s1">'My Site'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'title'</span><span class="p">);</span>
<span class="c1">// =&gt; "My Site"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.get.method">app.get(path, callback [, callback ...])</h3>

    <p>Rotas de requisições HTTP GET para o caminho especificado com as funções de <em>callback</em> especificados.
Para obter mais informações, consulte o <a href="/guide/routing.html">guia de roteamento</a>.</p>

    <p>Você pode oferecer múltiplas funções de <em>callback</em> que se comportam exatamente como <em>middleware</em>,
exceto esses <em>callbacks</em> podem chamar <code class="highlighter-rouge">next('route')</code> para ignorar o(s) <em>callback(s)</em> restante(s).
Você pode usar esse mecanismo para impor pré-condições em uma rota, em seguida, passar o controle
de rotas subseqüentes, se não há nenhuma razão para continuar com a rota atual.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'GET request to homepage'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.listen">app.listen(port, [hostname], [backlog], [callback])</h3>

    <p>“Escuta” conexões em um <code class="highlighter-rouge">host</code> e porta específicos.
Este método é idêntico ao método <a href="http://nodejs.org/api/http.html#http_server_listen_port_hostname_backlog_callback">http.Server.listen()</a> do Node.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</code></pre>
    </div>

    <p>A <code class="highlighter-rouge">app</code> retornada por <code class="highlighter-rouge">express()</code> é na verdade uma função JavaScript, para ser passada aos servidores HTTP do Node como um função callback para tratar requisições. Isto facilita disponibilizar ambas as versões HTTP e HTTPS das suas aplicações com o mesmo código de base, já que a app não herda deles (É simplesmente um callback).</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'https'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">app</span><span class="p">).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">);</span>
<span class="nx">https</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">app</span><span class="p">).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">443</span><span class="p">);</span>
</code></pre>
    </div>

    <p>O método <code class="highlighter-rouge">app.listen()</code> é conveniente para o seguinte (somente para HTTP):</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
<span class="p">};</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.METHOD">app.METHOD(path, callback [, callback ...])</h3>

    <p>Faz o roteamento de uma requisição HTTP, onde METHOD é um método de requisição HTTP como GET, PUT, POST e etc, (em letras minúsculas). Assim, os métodos atualmente disponíveis são <code class="highlighter-rouge">app.get()</code>,
<code class="highlighter-rouge">app.post()</code>, <code class="highlighter-rouge">app.put()</code> e etc.</p>

    <p>Veja a baixo a lista completa.</p>

    <p>Para mais informações, veja <a href="/guide/routing.html">routing guide</a>.</p>

    <p>O Express suporta os seguintes métodos de roteamento, correspondentes aos métodos HTTP de mesmo nome:</p>

    <table style="border: 0px; background: none">
<tr>
<td style="background: none; border: 0px;">
          <ul>
            <li><code class="highlighter-rouge">checkout</code></li>
            <li><code class="highlighter-rouge">connect</code></li>
            <li><code class="highlighter-rouge">copy</code></li>
            <li><code class="highlighter-rouge">delete</code></li>
            <li><code class="highlighter-rouge">get</code></li>
            <li><code class="highlighter-rouge">head</code></li>
            <li><code class="highlighter-rouge">lock</code></li>
            <li><code class="highlighter-rouge">merge</code></li>
            <li><code class="highlighter-rouge">mkactivity</code></li>
          </ul>
        </td>
<td style="background: none; border: 0px;">
          <ul>
            <li><code class="highlighter-rouge">mkcol</code></li>
            <li><code class="highlighter-rouge">move</code></li>
            <li><code class="highlighter-rouge">m-search</code></li>
            <li><code class="highlighter-rouge">notify</code></li>
            <li><code class="highlighter-rouge">options</code></li>
            <li><code class="highlighter-rouge">patch</code></li>
            <li><code class="highlighter-rouge">post</code></li>
            <li><code class="highlighter-rouge">propfind</code></li>
            <li><code class="highlighter-rouge">proppatch</code></li>
          </ul>
        </td>
<td style="background: none; border: 0px;">
          <ul>
            <li><code class="highlighter-rouge">purge</code></li>
            <li><code class="highlighter-rouge">put</code></li>
            <li><code class="highlighter-rouge">report</code></li>
            <li><code class="highlighter-rouge">search</code></li>
            <li><code class="highlighter-rouge">subscribe</code></li>
            <li><code class="highlighter-rouge">trace</code></li>
            <li><code class="highlighter-rouge">unlock</code></li>
            <li><code class="highlighter-rouge">unsubscribe</code></li>
          </ul>
        </td>
</tr>
</table>

    <div class="doc-box doc-info">
      <p>Para rotear métodos com nomes inválidos de variáveis javascript, use a notação de colchetes. Por exemplo, 
   <code class="highlighter-rouge">app['m-search']('/', function ...</code>.</p>
    </div>

    <p>Você pode fornecer múltiplas funções callback que se comportam como middlewares, exceto que esses callbacks podem invocar <code class="highlighter-rouge">next('route')</code> para repassar a rota para callbacks restantes. Você pode usar isto para definir pré condições em uma rota, e então passar o controle para próximas rotas se não há mais razão para continuar na rota atual..</p>

    <div class="doc-box doc-info">
      <p>A documentação da API está completamente explicitada somente para os métodos HTTP mais populares: <code class="highlighter-rouge">app.get()</code>,
  <code class="highlighter-rouge">app.post()</code>, <code class="highlighter-rouge">app.put()</code>, and <code class="highlighter-rouge">app.delete()</code>.
  The API documentation has explicit entries only for the most popular HTTP methods <code class="highlighter-rouge">app.get()</code>,
  <code class="highlighter-rouge">app.post()</code>, <code class="highlighter-rouge">app.put()</code>, and <code class="highlighter-rouge">app.delete()</code>.
  Porém os outros métodos listados acima trabalham exatamente na mesma forma.</p>
    </div>

    <p>Existe um método de roteamento especial, <code class="highlighter-rouge">app.all()</code>, que não corresponde a nenhum método HTTP. Ele carrega middlewares em uma rota, para todos os método de requisição HTTP.</p>

    <p>No exemplo a seguir, o <code class="highlighter-rouge">handler</code> é executado em requsições para “/secret” quando utilizamos GET, POST, PUT, DELETE, ou qualquer outro método de requisição HTTP.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'/secret'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Accessing the secret section ...'</span><span class="p">)</span>
  <span class="nx">next</span><span class="p">()</span> <span class="c1">// repassa o controle para o próximo handler</span>
<span class="p">})</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.param">app.param([name], callback)</h3>

    <p>Adiciona <code class="highlighter-rouge">callback triggers</code> (acionadores de callback) para parâmetros da rota, onde <code class="highlighter-rouge">name</code> é o nome de um parâmetro ou um array de nomes de parâmetros, e <code class="highlighter-rouge">callback</code> é a função callback. Os parâmetros da função callback são os objeto <code class="highlighter-rouge">request</code>, o próximo <code class="highlighter-rouge">middleware</code> e o valor do parâmetro, nesta ordem.</p>

    <p>Se <code class="highlighter-rouge">name</code> é um array, o <code class="highlighter-rouge">callback trigger</code> é registrado para cada parâmetro declarado no array, na ordem em que eles foram declarados. Além disso para cada parâmetro declarado, com exceção do último, uma chamada para <code class="highlighter-rouge">next</code> dentro do callback, chamará o callback para o próximo parâmetro declarado. Para o último parâmetro, uma chamada para <code class="highlighter-rouge">next</code> chamara o próximo middleware da rota que está sendo processada, como aconteceria caso <code class="highlighter-rouge">name</code> não fosse um array e sim uma string.</p>

    <p>Por exemplo, quando <code class="highlighter-rouge">:user</code> está presente em um path da rota, você pode controlar o automaticamente a lógica de carregamento do usuário fornecendo uma <code class="highlighter-rouge">req.user</code> para a rota ou fazer validações nos parâmetos de entrada.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'user'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Tenta pegar os detalhes do usuário e adicioná-los ao objeto `request`</span>
  <span class="nx">User</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">req</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="nx">user</span><span class="p">;</span>
      <span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'failed to load user'</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Os parâmetros de funções callbacks são locais para o <code class="highlighter-rouge">router</code> em que são definidos. Eles não herdam de apps montadas ou <code class="highlighter-rouge">routers</code>. Consequentemente, parâmetros de callbacks definidos em <code class="highlighter-rouge">app</code> serão acionados somente por parâmetros definidos nos <code class="highlighter-rouge">routes</code> de <code class="highlighter-rouge">app</code>.</p>

    <p>Todos os parâmetros de callbacks serão chamados antes de qualquer <code class="highlighter-rouge">handler</code> de qualquer rota em que o parâmetro ocorre, e serão chamados somente uma vez no ciclo de requisição e resposta, mesmo que o parâmetro esteja combinado em múltiplas rotas, como mostra o exemplo seguinte:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'CALLED ONLY ONCE'</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'although this matches'</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'and this matches too'</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Em <code class="highlighter-rouge">GET /user/42</code>, será impresso o seguinte:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>CALLED ONLY ONCE
although this matches
and this matches too
</code></pre>
    </div>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">param</span><span class="p">([</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'page'</span><span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'CALLED ONLY ONCE with'</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id/:page'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'although this matches'</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id/:page'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'and this matches too'</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Em <code class="highlighter-rouge">GET /user/42/3</code>, será impresso o seguinte:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>CALLED ONLY ONCE with 42
CALLED ONLY ONCE with 3
although this matches
and this matches too
</code></pre>
    </div>

    <div class="doc-box doc-warn">

      <p>A próxima seção descreve <code class="highlighter-rouge">app.param(callback)</code>, que está obsoleto a partir da versão 4.11.0.</p>

    </div>

    <p>O comportamento do método <code class="highlighter-rouge">app.param(name, callback)</code> pode ser totalmente alterado passando-se somente uma função para <code class="highlighter-rouge">app.param()</code>. Esta função é uma implementação personalizada de como <code class="highlighter-rouge">app.param(name, callback)</code>  deve se comportar - aceita dois parâmetros e deve retornar um middleware.</p>

    <p>O primeiro parâmetro desta função é o nome do parâmetro da URL que deve ser capturado, o segundo parâmetro pode ser qualquer objeto JavaScript que pode ser utilizado para retornar uma implementação de middleware.</p>

    <p>O middleware retornado decide o que acontece quando o parâmetro de URL é capturado.</p>

    <p>Nesse exemplo, a assinatura de <code class="highlighter-rouge">app.param(name,callback)</code> é modificada para <code class="highlighter-rouge">app.param(name, accessId)</code>.  Em vez de aceitar um nome e um callback, agora <code class="highlighter-rouge">app.param()</code> aceitará um nome e um número.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="c1">// personalizando o comportamento de app.param()</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">param</span><span class="p">,</span> <span class="nx">option</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">val</span> <span class="o">==</span> <span class="nx">option</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">403</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// usando a app.param() pesonalizada.</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="mi">1337</span><span class="p">);</span>

<span class="c1">// rota para acionar a captura</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'OK'</span><span class="p">);</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Ready'</span><span class="p">);</span>
<span class="p">})</span>
</code></pre>
    </div>

    <p>Nesse exemplo, a assinatura <code class="highlighter-rouge">app.param(name, callback)</code> continua a mesma, mas em vez de um callback middleware, foi definida uma função personalizada de verificação de tipo de dado para validar os dados de user id.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">param</span><span class="p">,</span> <span class="nx">validator</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">validator</span><span class="p">(</span><span class="nx">val</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">403</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">candidate</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">candidate</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nb">isFinite</span><span class="p">(</span><span class="nx">candidate</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

    <div class="doc-box doc-info">
      <p>O caracter ‘<code class="highlighter-rouge">.</code>’ não pode ser usado para capturar um caracter em suas expressões regulares. Por exemplo você não pode usar <code class="highlighter-rouge">'/user-.+/'</code> para capturar <code class="highlighter-rouge">'users-gami'</code>, em vez disto utilize  <code class="highlighter-rouge">[\\s\\S]</code> ou <code class="highlighter-rouge">[\\w\\W]</code> (como em <code class="highlighter-rouge">'/user-[\\s\\S]+/'</code>).</p>

      <p>Exemplos:</p>

      <pre><code class="language-js">//captura '1-a_6' mas não '543-azser-sder'
router.get('/[0-9]+-[[\\w]]*', function); 

//captura '1-a_6' e '543-az(ser"-sder' mas não '5-a s'
router.get('/[0-9]+-[[\\S]]*', function); 

//captura tudo (equivalent a '.*')
router.get('[[\\s\\S]]*', function); 
</code></pre>

    </div>

  </section>

  <section>
    <h3 id="app.path">app.path()</h3>

    <p>Retorna o caminho canônico da aplicação, uma string.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">()</span>
  <span class="p">,</span> <span class="nx">blog</span> <span class="o">=</span> <span class="nx">express</span><span class="p">()</span>
  <span class="p">,</span> <span class="nx">blogAdmin</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/blog'</span><span class="p">,</span> <span class="nx">blog</span><span class="p">);</span>
<span class="nx">blog</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/admin'</span><span class="p">,</span> <span class="nx">blogAdmin</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">app</span><span class="p">.</span><span class="nx">path</span><span class="p">());</span> <span class="c1">// ''</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">blog</span><span class="p">.</span><span class="nx">path</span><span class="p">());</span> <span class="c1">// '/blog'</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">blogAdmin</span><span class="p">.</span><span class="nx">path</span><span class="p">());</span> <span class="c1">// '/blog/admin'</span>
</code></pre>
    </div>

    <p>O comportamento desse método pode se tornar muito complicado em casos complexos de aplicações montadas:
geralmente é melhor usar <a href="#req.baseUrl">req.baseUrl</a> para obter o caminho canônico da aplicação.</p>

  </section>

  <section>
    <h3 id="app.post.method">app.post(path, callback [, callback ...])</h3>

    <p>Roteia requisições HTTP POST para um <code class="highlighter-rouge">path</code> especificando funções callback.
Para mais informações, veja o guia <a href="/guide/routing.html">roteamento</a>.</p>

    <p>Você pode fornecer múltiplas funções callbacks que se comportam como middlewares, porém esses callbacks podem invocar <code class="highlighter-rouge">next('route')</code> para ignorar os callbacks restantes da rota. Você pode usar esse mecanismo para impor pré condições em uma rota, e então passar o controle para as rotas na sequência se não é mais necessário continuar na rota atual.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'POST request to homepage'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.put.method">app.put(path, callback [, callback ...])</h3>

    <p>Roteia requisições HTTP PUT para um path especificado com funções callback específicadas.
Para mais informações, veja o <a href="/guide/routing.html">guia roteamento</a>.</p>

    <p>Você pode fornecer múltiplos callbacks que se comportaram como middlewares, exceto que esses callbacks poderão chamar <code class="highlighter-rouge">next('route')</code> para ignorar os callbacks restantes da rota. Você pode utilizar esse mecanismo para impor pré condições em uma rota e passar o controle para as rotas subsequentes quando não houver mais razão para continuar processando a rota atual.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'PUT request to homepage'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.render">app.render(view, [locals], callback)</h3>

    <p>Retorna o HTML renderizado de uma view pela função <code class="highlighter-rouge">callback</code>. Este método aceita um parâmetro opcional que é um objeto contendo variáveis locais para a view. Funciona como o <a href="#res.render">res.render()</a>, com a exceção de que não pode enviar a view renderizada para o cliente por conta própria.</p>

    <div class="doc-box doc-info">
      <p>Pense em <code class="highlighter-rouge">app.render()</code> como uma função utilitária para gerar strings contendo a view renderizada.</p>

      <p>Internamente <code class="highlighter-rouge">res.render()</code> utiliza <code class="highlighter-rouge">app.render()</code> para renderizar views.</p>
    </div>

    <div class="doc-box doc-notice">
      <p>A variável local <code class="highlighter-rouge">cache</code> é reservada, pois é utilizada para cache de views. Defina essa variável como <code class="highlighter-rouge">true</code>, se você quer utilizar cache de views durante o desenvolvimento; cacheamento de views está por padrão habilitado em modo de produção.</p>

    </div>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">'email'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">html</span><span class="p">){</span>
  <span class="c1">// ...</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">'email'</span><span class="p">,</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'Tobi'</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">html</span><span class="p">){</span>
  <span class="c1">// ...</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.route">app.route(path)</h3>

    <p>Retorna uma instância de uma única rota, que você pode usar para lidar com verbos HTTP com middleware opcional.
Use <code class="highlighter-rouge">app.route()</code> para evitar nomes duplicados de rota (e assim, erros de digitação).</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">'/events'</span><span class="p">)</span>
<span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// roda para todos os verbos de HTTP primeiro</span>
  <span class="c1">// pense nisso como um middleware específico da rota!</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(...);</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// talvez adicionar um novo evento...</span>
<span class="p">})</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.set">app.set(name, value)</h3>

    <p>Atribui o valor de configuração <code class="highlighter-rouge">name</code> para <code class="highlighter-rouge">value</code>, onde <code class="highlighter-rouge">name</code> é uma das propriedades listada
na <a href="#app.settings.table">tabela de configurações do aplicativo</a>.</p>

    <p>Chamar <code class="highlighter-rouge">app.set('foo', true)</code> para um valor booleano é a mesma coisa que chamar <code class="highlighter-rouge">app.enable('foo')</code>. De forma similiar, chamar <code class="highlighter-rouge">app.set('foo', false)</code> para alterar uma propriedade booleana é a mesma coisa que <code class="highlighter-rouge">app.disable('foo')</code>.</p>

    <p>Obtendo o valor de uma configuração com <a href="#app.get"><code class="highlighter-rouge">app.get()</code></a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'title'</span><span class="p">,</span> <span class="s1">'Meu site'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'title'</span><span class="p">);</span> <span class="c1">// "Meu site"</span>
</code></pre>
    </div>

    <h4 id="app.settings.table">Configurações do Aplicativo</h4>

    <p>Se <code class="highlighter-rouge">name</code> for uma das configurações da aplicação (app), o comportamento do app é alterado. A tabela a seguir apresenta a lista dessas configurações.</p>

    <div class="table-scroller">
  <table class="doctable" border="1">
    <thead><tr><th id="app-settings-property">Propriedade</th><th>Tipo</th><th>Valor</th><th>Padrão</th></tr></thead>
    <tbody>
    <tr>
  <td>
              <p><code class="highlighter-rouge">case sensitive routing</code></p>
            </td>
      <td>Boolean</td>
      <td>Habilita diferenciação entre maiúsculas e minúsculas.</td>
      <td>Disabled. Trata  "/Foo" e "/foo" como a mesma coisa.</td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">env</code></p>
            </td>
      <td>String</td>
      <td>Modo ambiente de desenvolvimento.</td>
  <td>
              <p><code class="highlighter-rouge">process.env.NODE_ENV</code> (variável de ambiente de desenvolvimento <code class="highlighter-rouge">NODE_ENV</code>) ou “development”.</p>
            </td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">etag</code></p>
            </td>
      <td>Variado</td>
  <td>
              <p>Define o parâmetro ETag no cabeçalho de resposta (response header). Para os valores possíveis veja a <a href="#etag.options.table">tabela opções <code class="highlighter-rouge">etag</code></a>.</p>

              <p><a href="http://en.wikipedia.org/wiki/HTTP_ETag">Mais sobre cabeçalho HTTP ETag</a>.</p>
            </td>
  <td>
              <p><code class="highlighter-rouge">weak</code></p>
            </td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">jsonp callback name</code></p>
            </td>
      <td>String</td>
      <td>Especifica o nome padrão da função callback JSONP.</td>
  <td>
              <p><code class="highlighter-rouge">?callback=</code></p>
            </td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">json replacer</code></p>
            </td>
      <td>String</td>
      <td>Substituto do callback JSON.</td>
  <td>
              <p><code class="highlighter-rouge">null</code></p>
            </td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">json spaces</code></p>
            </td>
      <td>Número</td>
      <td>Quando definida, envia strings JSON formatadas com a quantidade de espaços de identação especificada.</td>
      <td>Disabled.</td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">query parser</code></p>
            </td>
      <td>String</td>
  <td>
              <p>Define <code class="highlighter-rouge">query parser</code> a ser utilizado, entre “simple” ou “extended”. Query parser “simple” é baseado no Node nativo, <a href="http://nodejs.org/api/querystring.html">querystring</a>. Query parser “extended” tem como base <a href="https://www.npmjs.org/package/qs">qs</a>.</p>
            </td>
      <td>"extended"</td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">strict routing</code></p>
            </td>
      <td>Boolean</td>
      <td>Habilita o roteamento restrito.</td>
      <td>Disabled. Trata "/foo" e "/foo/" como sendo a mesma rota.</td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">subdomain offset</code></p>
            </td>
      <td>Número</td>
      <td>O número de partes separadas por ponto do host a remover para acessar subdomínios.</td>
      <td>2</td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">trust proxy</code></p>
            </td>
      <td>Variado</td>
  <td>
              <p>Indica que o app está por trás de um proxy <code class="highlighter-rouge">front-facing</code>, e usa os cabeçalhos <code class="highlighter-rouge">X-Forwarded-*</code> para determinar a conexão e o IP do cliente. Nota: Cabeçalhos <code class="highlighter-rouge">X-Forwarded-*</code> são facilmente falsificados e os IPs detectados não são confiáveis.</p>

              <p><code class="highlighter-rouge">trust proxy</code> está desabilidado por padrão. Quanto habilitado, o Express tenta determinar o IP do cliente conectado através do proxy <code class="highlighter-rouge">front-facing</code>, ou série de proxies. A propriedade <code class="highlighter-rouge">req.ips</code> contém então um array de IPs pelos quais o cliente está conectado. Para habilitar isto, utilize os valores descritos na <a href="#trust.proxy.options.table">tabela opções <code class="highlighter-rouge">trust proxy</code></a>.</p>

              <p>A configuração <code class="highlighter-rouge">trust proxy</code> é implementada utilizando o pacote <a href="https://www.npmjs.org/package/proxy-addr">proxy-addr</a>. Para mais informações, veja esta documentação.</p>
            </td>
      <td>Disabled.</td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">views</code></p>
            </td>
      <td>String ou Array</td>
      <td>Um diretório ou array de diretórios para as views da aplicação. Se é um array, as views são procuradas conforme a ordem em que ocorrem no array.</td>
  <td>
              <p><code class="highlighter-rouge">process.cwd() + '/views'</code></p>
            </td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">view cache</code></p>
            </td>
      <td>Boleano</td>
      <td>Habilita o cacheamento de compilação de template de view.</td>
  <td>
              <p><code class="highlighter-rouge">true</code> em produção.</p>
            </td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">view engine</code></p>
            </td>
      <td>String</td>
      <td>A extensão padrão da engine a ser utilizada, quando omitida.</td>
      <td></td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">x-powered-by</code></p>
            </td>
      <td>Boleano</td>
      <td>Habilita o cabeçalho HTTP "X-Powered-By: Express".</td>
  <td>
              <p><code class="highlighter-rouge">true</code></p>
            </td>
    </tr>
    </tbody>
  </table>

  <h5 id="trust.proxy.options.table">Opções para configurações `trust proxy`</h5>

  <p>
  Read <a href="/guide/behind-proxies.html">Express behind proxies</a> for more
  information.
  </p>

  <table class="doctable" border="1">
    <thead><tr><th>Tipo</th><th>Valor</th></tr></thead>
    <tbody>
      <tr>
        <td>Boleano</td>
  <td>
              <p>Se <code class="highlighter-rouge">true</code>, o IP do cliente é entendido como a entrada mais à esquerda no cabeçalho <code class="highlighter-rouge">X-Forwarded-*</code>.</p>

              <p>Se <code class="highlighter-rouge">false</code>, a app é considerada como direta da Internet e o IP do cliente é derivado de <code class="highlighter-rouge">req.connection.remoteAddress</code>. Esta é a configuração padrão.</p>
            </td>
      </tr>
      <tr>
        <td>IP addresses</td>
  <td>
              <p>Um endereço IP, sub-rede, ou um array de IPs e sub-redes de confiança. A lista seguinte apresenta a lista de nomes pré configurados.</p>

              <ul>
                <li>loopback - <code class="highlighter-rouge">127.0.0.1/8</code>, <code class="highlighter-rouge">::1/128</code></li>
                <li>linklocal - <code class="highlighter-rouge">169.254.0.0/16</code>, <code class="highlighter-rouge">fe80::/10</code></li>
                <li>uniquelocal - <code class="highlighter-rouge">10.0.0.0/8</code>, <code class="highlighter-rouge">172.16.0.0/12</code>, <code class="highlighter-rouge">192.168.0.0/16</code>, <code class="highlighter-rouge">fc00::/7</code></li>
              </ul>

              <p>IPs são definidos das seguintes formas:</p>

              <pre><code class="language-js">app.set('trust proxy', 'loopback') // specify a single subnet
  app.set('trust proxy', 'loopback, 123.123.123.123') // specify a subnet and an address
  app.set('trust proxy', 'loopback, linklocal, uniquelocal') // specify multiple subnets as CSV
  app.set('trust proxy', ['loopback', 'linklocal', 'uniquelocal']) // specify multiple subnets as an array</code></pre>
              <p>Quando especificado, os endereços IP ou sub-redes são excluídas do processo de determinação de endereço, e o endereço IP não confiável mais próximo para o servidor é determinado como o endereço IP do cliente.</p>
            </td>
      </tr>
      <tr>
        <td>Número</td>
  <td>
              <p>Trust the <code class="highlighter-rouge">n</code>th hop from the front-facing proxy server as the client.</p>
            </td>
      </tr>
      <tr>
        <td>Função</td>
  <td>
              <p>Custom trust implementation. Use this only if you know what you are doing.</p>
              <pre><code class="language-js">app.set('trust proxy', function (ip) {
    if (ip === '127.0.0.1' || ip === '123.123.123.123') return true; // trusted IPs
    else return false;
  })</code></pre>
            </td>
      </tr>
    </tbody>
  </table>

  <h5 id="etag.options.table">Opções para configuação de `etag`</h5>

  <p>
  The ETag functionality is implemented using the
  <a href="https://www.npmjs.org/package/etag">etag</a> package.
  For more information, see its documentation.
  </p>

  <table class="doctable" border="1">
    <thead><tr><th>Tipo</th><th>Valor</th></tr></thead>
    <tbody>
      <tr>
        <td>Boleano</td>
  <td>
              <p><code class="highlighter-rouge">true</code> habilita ETag frágil. Esta é a configuração padrão.<br />
  <code class="highlighter-rouge">false</code> desabilita ETag completamente.</p>
            </td>
      </tr>
      <tr>
        <td>String</td>
        <td>
            Se "strong", habilita ETag forte.<br />
            Se "weak", habilita ETag frágil.
        </td>
      </tr>
      <tr>
        <td>Função</td>
  <td>
              <p>Implementação de função ETag personalizada. Utilize somente se você sabe o que está fazendo.</p>

              <pre><code class="language-js">app.set('etag', function (body, encoding) {
  return generateHash(body, encoding); // consider the function is defined
  })</code></pre>

            </td>
      </tr>
    </tbody>
  </table>
</div>

  </section>

  <section>
    <h3 id="app.use">app.use([path,] function [, function...])</h3>

    <p>Monta as funções do <a href="/guide/using-middleware.html">middleware</a> no caminho <code class="highlighter-rouge">path</code>. Quando <code class="highlighter-rouge">path</code> não for especificado, o valor padrão é de “/”.</p>

    <div class="doc-box doc-info">
      <p>A rota irá corresponder com qualquer caminho que seguir imediatamente com “<code>/</code>”.
  Por exemplo: <code>app.use('/apple', ...)</code> irá corresponder com “/apple”, “/apple/images”,
  “/apple/images/news”, e assim por diante.</p>
    </div>

    <div class="doc-box doc-info">
      <p><code class="highlighter-rouge">req.originalUrl</code> em um <em>middleware</em> é a combinação de <code class="highlighter-rouge">req.baseUrl</code> e <code class="highlighter-rouge">req.path</code>, como mostrado no exemplo a seguir:</p>

      <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/admin'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// GET 'http://www.exemplo.com/admin/new'</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">originalUrl</span><span class="p">);</span> <span class="c1">// '/admin/new'</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">);</span> <span class="c1">// '/admin'</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">path</span><span class="p">);</span> <span class="c1">// '/new'</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
      </div>
    </div>

    <p>A montagem de um <em>middleware</em> em um caminho ‘path’, fará com que a função 
<em>middleware</em> seja executada sempre que o caminho base da requisição corresponder 
com o caminho ‘path’.</p>

    <p>Como o padrão de <code class="highlighter-rouge">path</code> é “/”, os <em>middlewares</em> montados sem um caminho 
específico serão executados em cada requisição do aplicativo.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// esta middleware será executada em cada requisição do aplicativo</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Hora: %d'</span><span class="p">,</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">})</span>
</code></pre>
    </div>

    <p>As funções <em>middlewares</em> são executadas sequencialmente portanto, a ordem 
de inclusão de cada uma é importante.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// esta middleware não irá permitir que a requisição vá além daqui.</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Olá mundo!'</span><span class="p">);</span>
<span class="p">})</span>

<span class="c1">// requisições nunca atingirão esta rota</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Bem vindo'</span><span class="p">);</span>
<span class="p">})</span>
</code></pre>
    </div>
    <p><code class="highlighter-rouge">path</code> pode ser uma <em>string</em> representando a rota, uma <em>string pattern</em>, 
uma expressão regular que irá combinar com as rotas, ou até mesmo uma 
<em>array</em> de combinações.</p>

    <div class="doc-box doc-notice">
      <p>Os <em>middlewares</em> abaixo são simples exemplos:</p>
    </div>

    <div class="table-scroller">
<table class="doctable" border="1">

  <thead>
    <tr>
      <th> Tipo </th>
      <th> Exemplo </th>
    </tr>
  </thead>
  <tbody>

    <tr>
      <td>Path</td>
      <td>
        <pre><code class="language-js">// irá combinar com rotas iniciadas em /abcd
app.use('/abcd', function (req, res, next) {
  next();
})</code></pre>
      </td>
    </tr>

    <tr>
      <td>Path Pattern</td>
      <td>
        <pre><code class="language-js">// irá combinar com rotas iniciadas em /abcd e /abd
app.use('/abc?d', function (req, res, next) {
  next();
})

// irá combinar com rotas iniciadas em /abcd, /abbcd, /abbbbbcd e assim por diante
app.use('/ab+cd', function (req, res, next) {
  next();
})

// irá combinar com rotar iniciadas em /abcd, /abxcd, /abFOOcd, /abbArcd e assim por diante
app.use('/ab\*cd', function (req, res, next) {
  next();
})

// irá combinar com as rotas iniciadas em /ad e /abcd
app.use('/a(bc)?d', function (req, res, next) {
  next();
})</code></pre>
      </td>
    </tr>

    <tr>
      <td>Regular Expression</td>
      <td>
        <pre><code class="language-js">// irá combinar com rotas iniciadas em /abc e /xyz
app.use(/\/abc|\/xyz/, function (req, res, next) {
  next();
})</code></pre>
      </td>
    </tr>

    <tr>
      <td>Array</td>
      <td>
        <pre><code class="language-js">// irá combinar com rotas iniciadas em /abcd, /xyza, /lmn, e /pqr
app.use(['/abcd', '/xyza', /\/lmn|\/pqr/], function (req, res, next) {
  next();
})</code></pre>
      </td>
    </tr>

  </tbody>

</table>
</div>

    <p><code class="highlighter-rouge">function</code> pode ser uma função <em>middleware</em>, uma série de funções <em>middlewares</em>,
uma <em>array</em> de funções <em>middlewares</em>, ou uma combinação de todas elas.
Desde que <a href="#router">router</a> e <a href="#application">app</a> implementem a interface 
<em>middleware</em>, você pode utiliza-las como faria em qualquer outra função 
<em>middleware</em>.</p>

    <table class="doctable" border="1">

  <thead>
    <tr>
      <th>Uso</th>
      <th>Exemplo</th>
    </tr>
  </thead>
  <tbody>

    <tr>
      <td>Middleware Única</td>
      <td>Você pode definir e montar uma middleware localmente.
<pre><code class="language-js">app.use(function (req, res, next) {
  next();
})
</code></pre>
Uma *router* é uma *middleware* válida.

<pre><code class="language-js">var router = express.Router();
router.get('/', function (req, res, next) {
  next();
})
app.use(router);
</code></pre>

Um aplicativo Express é uma *middleware* válida.
<pre><code class="language-js">var subApp = express();
subApp.get('/', function (req, res, next) {
  next();
})
app.use(subApp);
</code></pre>
      </td>
    </tr>

    <tr>
      <td>Série de Middleware</td>
      <td>
      Você pode especificar mais de uma função middleware em uma mesma rota.
<pre><code class="language-js">var r1 = express.Router();
r1.get('/', function (req, res, next) {
  next();
})

var r2 = express.Router();
r2.get('/', function (req, res, next) {
  next();
})

app.use(r1, r2);
</code></pre>
      </td>
    </tr>

    <tr>
      <td>Array</td>
      <td>
      Use uma array para agrupar logicamente *middlewares*.
      Se você passar uma array de middleware como primeiro ou único 
      parâmetro middleware, você deverá especificar a rota montada.
<pre><code class="language-js">var r1 = express.Router();
r1.get('/', function (req, res, next) {
  next();
})

var r2 = express.Router();
r2.get('/', function (req, res, next) {
  next();
})

app.use('/', [r1, r2]);
</code></pre>
      </td>
    </tr>

    <tr>
      <td>Combinação</td>
      <td>
      Você pode combinar todas as formas acima ao montar a middleware.
<pre><code class="language-js">function mw1(req, res, next) { next(); }
function mw2(req, res, next) { next(); }

var r1 = express.Router();
r1.get('/', function (req, res, next) { next(); });

var r2 = express.Router();
r2.get('/', function (req, res, next) { next(); });

var subApp = express();
subApp.get('/', function (req, res, next) { next(); });

app.use(mw1, [mw2, r1, r2], subApp);
</code></pre>
      </td>
    </tr>

  </tbody>

</table>

    <p>Segue alguns exemplos de utilização do <em>middleware</em> <a href="/guide/using-middleware.html#middleware.built-in">express.static</a>
do aplicativo <em>Express</em>.</p>

    <p>Serve conteúdo estático para o aplicativo a partir do diretório “public” da aplicação:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// GET /style.css etc</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public'</span><span class="p">));</span>
</code></pre>
    </div>

    <p>Monta o <em>middleware</em> em “/static” para servir conteúdo estático apenas para requisições com rotas iniciadas em “/static”:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// GET /static/style.css etc.</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/static'</span><span class="p">,</span> <span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public'</span><span class="p">));</span>
</code></pre>
    </div>

    <p>Desabilite o <em>logging</em> para requisições de conteúdos estáticos carregando o <em>logger</em> depois de seu <em>middleware</em>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">logger</span><span class="p">());</span>
</code></pre>
    </div>

    <p>Serve arquivos estáticos a partir de diversos diretórios, mas atribui a procedência de “./public” acima dos outros:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/files'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/uploads'</span><span class="p">));</span>
</code></pre>
    </div>

  </section>

  <p><a id="req" class="h2"></a></p>
  <h2>Request</h2>

  <p>Objeto <code class="highlighter-rouge">req</code> representa a requisição HTTP e possui propriedades para o query string
da requisição, parametros, corpo, cabeçalhos HTTP, e assim por diante. Nessa documentação e por
convenção, o objeto é sempre referido como <code class="highlighter-rouge">req</code> (e a resposta HTTP é <code class="highlighter-rouge">res</code>) mas seu nome atual é determinado
pelos parametros para a função de callback que você está trabalhando.</p>

  <p>Por exemplo:</p>

  <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'user '</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
  </div>

  <p>Mas você poderia muito bem ter:</p>

  <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'user '</span> <span class="o">+</span> <span class="nx">request</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
  </div>

  <h3 id="req.properties">Properties</h3>

  <div class="doc-box doc-notice">
    <p>No Express 4, <code class="highlighter-rouge">req.files</code> não está mais disponível no objeto <code class="highlighter-rouge">req</code> por padrão. Para acessar os arquivos carregados no objeto <code class="highlighter-rouge">req.files</code>,
utilize um middleware de multipart-handling como <a href="https://www.npmjs.com/package/busboy">busboy</a>, <a href="https://www.npmjs.com/package/multer">multer</a>, <a href="https://www.npmjs.com/package/formidable">formidable</a>, <a href="https://www.npmjs.com/package/multiparty">multiparty</a>, <a href="https://www.npmjs.com/package/connect-multiparty">connect-multiparty</a>, ou <a href="https://www.npmjs.com/package/pez">pez</a>.</p>
  </div>

  <section>
    <h3 id="req.app">req.app</h3>
    <p>Esta propriedade faz uma referência à instância da aplicação Express que está utilizando o middleware.</p>

    <p>Se você seguir o padrão em que você cria um módulo que apenas exporta um middleware para requisitá-lo dentro do arquivo principal, então esse middleware pode acessar a instância do Express utilizando <code class="highlighter-rouge">req.app</code>.</p>

    <p>Por exemplo:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">//index.js</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"/viewdirectory"</span><span class="p">,</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"./mymiddleware.js"</span><span class="p">))</span>
</code></pre>
    </div>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">//mymiddleware.js</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s2">"The views directory is "</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"views"</span><span class="p">));</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.baseUrl">req.baseUrl</h3>

    <p>A URL do caminho em que a instância do roteador foi montado.
Por exemplo:
~~~js
var greet = express.Router();</p>

    <p>greet.get(‘/jp’, function (req, res) {
  console.log(req.baseUrl); // /greet
  res.send(‘Konichiwa!’);
});</p>

    <p>app.use(‘/greet’, greet); // Carrega o roteador em ‘/greet’
~~~</p>

    <p>Mesmo se você usar um padrão de caminho ou conjunto de padrões para para
carregar o roteador, a propriedade <code class="highlighter-rouge">baseUrl</code> retorna a string coincidente, não
os padrões. No seguinte exemplo, o roteador <code class="highlighter-rouge">greet</code> é carregador em dois
padrões de caminho.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">([</span><span class="s1">'/gre+t'</span><span class="p">,</span> <span class="s1">'/hel{2}o'</span><span class="p">],</span> <span class="nx">greet</span><span class="p">);</span> <span class="c1">// Carrega o roteador em '/gre+t' e '/hel{2}o'</span>
</code></pre>
    </div>

    <p>Quando uma requisição é feita para <code class="highlighter-rouge">/greet/jp</code>, <code class="highlighter-rouge">req.baseUrl</code> é “/greet”.
Quando uma requisição é feita a <code class="highlighter-rouge">/hello/jp</code>, <code class="highlighter-rouge">req.baseUrl</code> é “/hello”.</p>

    <p><code class="highlighter-rouge">req.baseUrl</code> é similar a propriedade <a href="#app.mountpath">mountpath</a> do objeto
<code class="highlighter-rouge">app</code>, exceto <code class="highlighter-rouge">app.mountpath</code> retorna padrões de caminho coincidente(s).</p>

  </section>

  <section>
    <h3 id="req.body">req.body</h3>

    <p>Contém dados do tipo chave-valor enviados no corpo da requisição.
Por padrão é <code class="highlighter-rouge">undefined</code> e é populado quando você usa um middleware body-parser
como por exemplo <a href="https://www.npmjs.org/package/body-parser">body-parser</a> and <a href="https://www.npmjs.org/package/multer">multer</a>.</p>

    <p>Esse exemplo mostra como usar o middleware body-parser para popular o atributo
<code class="highlighter-rouge">req.body</code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">)();</span>
<span class="kd">var</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'body-parser'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">multer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'multer'</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span> <span class="c1">// para realizar o parsing application/json</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}));</span> <span class="c1">// para realizar o parsing application/x-www-form-urlencoded</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">multer</span><span class="p">());</span> <span class="c1">// para realizar o parsing multipart/form-data</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
<span class="p">})</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.cookies">req.cookies</h3>

    <p>Quando utilizando o middleware <a href="https://www.npmjs.com/package/cookie-parser">cookie-parser</a>,
essa propriedade é um objeto que contém os cookies enviados pela requisição. Se
a requisição não contiver cookies, o padrão é <code class="highlighter-rouge"><span class="p">{}</span></code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Cookie: name=tj</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">cookies</span><span class="p">.</span><span class="nx">name</span>
<span class="c1">// =&gt; "tj"</span>
</code></pre>
    </div>

    <p>Para mais informações ou em caso de problemas veja <a href="https://github.com/expressjs/cookie-parser">cookie-parser</a>.</p>

  </section>

  <section>
    <h3 id="req.fresh">req.fresh</h3>

    <p>Indica se a requisição é “fresh.”. É o oposto de <code class="highlighter-rouge">req.stale</code>.</p>

    <p>É true se o cabeçalho <code class="highlighter-rouge">cache-control</code> da requisição não possui a diretiva <code class="highlighter-rouge">no-cache</code>
e algum dos seguintes é verdadeiro:</p>

    <ul>
      <li>O cabeçalho <code class="highlighter-rouge">if-modified-since</code> da requisição foi especificado e o cabeçalho <code class="highlighter-rouge">last-modified</code> da requisição é igual ou anterior ao cabeçalho <code class="highlighter-rouge">modified</code> da resposta.</li>
      <li>O cabeçalho <code class="highlighter-rouge">if-none-match</code> da requisição é <code class="highlighter-rouge">*</code>.</li>
      <li>O cabeçalho <code class="highlighter-rouge">if-none-match</code> da requisição após ser feito o parse em suas diretivas, não coincide com o cabeçalho <code class="highlighter-rouge">etag</code> da resposta.</li>
    </ul>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">req</span><span class="p">.</span><span class="nx">fresh</span>
<span class="c1">// =&gt; true</span>
</code></pre>
    </div>

    <p>Para mais informações ou em caso de problemas veja <a href="https://github.com/jshttp/fresh">fresh</a>.</p>

  </section>

  <section>
    <h3 id="req.hostname">req.hostname</h3>

    <p>Contém o hostname do cabeçalho HTTP “Host”.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Host: "example.com:3000"</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">hostname</span>
<span class="c1">// =&gt; "example.com"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.ip">req.ip</h3>

    <p>O IP remoto da requisição.
The remote IP address of the request.</p>

    <p>Se a configuração <a href="/4x/api.html#trust.proxy.options.table"><code class="highlighter-rouge">trust proxy</code></a> estiver habilitada, é o endereço upstream; veja <a href="/guide/behind-proxies.html">Express behind proxies</a> para mais informações.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">req</span><span class="p">.</span><span class="nx">ip</span>
<span class="c1">// =&gt; "127.0.0.1"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.ips">req.ips</h3>

    <p>Quando a configuração <a href="/4x/api.html#trust.proxy.options.table"><code class="highlighter-rouge">trust proxy</code></a> é <code class="highlighter-rouge">true</code>, essa propriedade contém um array
de endereços IP especificados no cabeçalho “X-Forwarded-For” da requisição.
Caso contrário ela contém um array vazio.</p>

    <p>Por exemplo, se “X-Forwarded-For” for “client, proxy1, proxy2”, <code class="highlighter-rouge">req.ips</code> seria
<code class="highlighter-rouge">["client", "proxy1", "proxy2"]</code>, onde “proxy2” é o downstream mais distante.</p>

    <p>Para mais informações sobre a configuração <code class="highlighter-rouge">trust proxy</code>, veja <a href="#app.set">app.set</a>.</p>

  </section>

  <section>
    <h3 id="req.originalUrl">req.originalUrl</h3>

    <div class="doc-box doc-notice">
      <p><code class="highlighter-rouge">req.url</code> não é uma propriedade nativa do Express, ela é uma herança do Node <a href="https://nodejs.org/api/http.html#http_message_url">http module</a>.</p>
    </div>

    <p>Esta propriedade é muito parecida com a <code class="highlighter-rouge">req.url</code> do Node; no entanto, mantém a URL da requisição original,
o que lhe permite reescrever <code class="highlighter-rouge">req.url</code> livremente para fins de roteamento interno. Por exemplo,
o recurso de “montagem” de [app.use ()] (# app.use) irá reescrever <code class="highlighter-rouge">req.url</code> para retirar o ponto de montagem.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// GET /search?q=something</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">originalUrl</span>
<span class="c1">// =&gt; "/search?q=something"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.params">req.params</h3>

    <p>Um objeto contendo as propriedades mapeadas para a rota nomeada “parameters”. Por exemplo, caso você passua a rota <code class="highlighter-rouge">/user/:name</code>, então a propriedade “name” estará disponível como <code class="highlighter-rouge">req.params.name</code>. O padrão desse objeto é <code class="highlighter-rouge"><span class="p">{}</span></code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// GET /user/tj</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">name</span>
<span class="c1">// =&gt; "tj"</span>
</code></pre>
    </div>

    <p>Quando você utiliza expressões regulares para a definição da rota, grupos de captura são fornecidos no array usando <code class="highlighter-rouge">req.params[n]</code>, onde <code class="highlighter-rouge">n</code>
é o <i>enésimo</i> grupo de captura. Essa regra é aplicada a correspondencias não nomeadas de caracteres-curinga nas definições das
rotas tais como <code class="highlighter-rouge">/file/*</code>:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// GET /file/javascripts/jquery.js</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1">// =&gt; "javascripts/jquery.js"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.path">req.path</h3>

    <p>Contém a parte “path” da URL de requisição.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// example.com/users?sort=desc</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">path</span>
<span class="c1">// =&gt; "/users"</span>
</code></pre>
    </div>

    <div class="doc-box doc-info">
      <p>Quando chamado de um middleware, o ponto de montagem não é incluído no <code class="highlighter-rouge">req.path</code>. Veja <a href="/4x/api.html#app.use">app.use()</a> para mais detalhes.</p>
    </div>

  </section>

  <section>
    <h3 id="req.protocol">req.protocol</h3>

    <p>A string do protocolo de requisição, “http” ou “https” quando solicitado com TLS. Quando o “trust proxy”
<a href="/4x/api.html#trust.proxy.options.table">setting</a> confia no endereço de socket, o valor do campo do cabeçalho
“X-Forwarded-Proto” (“http” ou “https”) será confiável e utilizado se presente.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">req</span><span class="p">.</span><span class="nx">protocol</span>
<span class="c1">// =&gt; "http"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.query">req.query</h3>

    <p>Um objeto contendo uma propriedade para cada parâmetro string de consulta na rota.
Se não houver string de consulta, será um objeto vazio, <code class="highlighter-rouge"><span class="p">{}</span></code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// GET /search?q=tobi+ferret</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">q</span>
<span class="c1">// =&gt; "tobi ferret"</span>

<span class="c1">// GET /shoes?order=desc&amp;shoe[color]=blue&amp;shoe[type]=converse</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">order</span>
<span class="c1">// =&gt; "desc"</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">shoe</span><span class="p">.</span><span class="nx">color</span>
<span class="c1">// =&gt; "blue"</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">shoe</span><span class="p">.</span><span class="nx">type</span>
<span class="c1">// =&gt; "converse"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.route">req.route</h3>

    <p>A string correspondente a rota atual: Por exemplo:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id?'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">userIdHandler</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">route</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">);</span>
<span class="p">})</span>
</code></pre>
    </div>

    <p>Saída de exemplo do fragmento anterior:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span> <span class="nl">path</span><span class="p">:</span> <span class="s1">'/user/:id?'</span><span class="p">,</span>
  <span class="nx">stack</span><span class="err">:</span>
   <span class="p">[</span> <span class="p">{</span> <span class="na">handle</span><span class="p">:</span> <span class="p">[</span><span class="na">Function</span><span class="p">:</span> <span class="nx">userIdHandler</span><span class="p">],</span>
       <span class="na">name</span><span class="p">:</span> <span class="s1">'userIdHandler'</span><span class="p">,</span>
       <span class="na">params</span><span class="p">:</span> <span class="kc">undefined</span><span class="p">,</span>
       <span class="na">path</span><span class="p">:</span> <span class="kc">undefined</span><span class="p">,</span>
       <span class="na">keys</span><span class="p">:</span> <span class="p">[],</span>
       <span class="na">regexp</span><span class="p">:</span> <span class="sr">/^</span><span class="se">\/?</span><span class="sr">$/i</span><span class="p">,</span>
       <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span> <span class="p">}</span> <span class="p">],</span>
  <span class="nx">methods</span><span class="err">:</span> <span class="p">{</span> <span class="nl">get</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">}</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.secure">req.secure</h3>

    <p>Um Booleano que e true se a conexão TLS for estabelecida. Equivalente a:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="s1">'https'</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">protocol</span><span class="p">;</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.signedCookies">req.signedCookies</h3>

    <p>Quando utilizando o middleware <a href="https://www.npmjs.com/package/cookie-parser">cookie-parser</a>, essa propriedade
contém cookies assinados enviados pela requisição, não assinados e prontos para uso. Cookies assinados
fazem parte de um objeto diferente para mostrar a intenção do desenvolvedor; caso contrário, um ataque
malicioso poderia ser colocado no valor de <code class="highlighter-rouge">req.cookie</code> (o qual é fácil de falsificar). Note que assinar
um cookie não o torna “escondido” o criptografado mas simplesmente previne a adulteração (porque o segredo
usado para a assinatura é privado). Se nenhum cookie assinado for enviado, o valor padrão da propriedade é <code class="highlighter-rouge"><span class="p">{}</span></code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Cookie: user=tobi.CP7AWaXDfAKIRfH49dQzKJx7sKzzSoPq7/AcBBRVwlI3</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">signedCookies</span><span class="p">.</span><span class="nx">user</span>
<span class="c1">// =&gt; "tobi"</span>
</code></pre>
    </div>

    <p>Para mais informações ou em caso de problemas veja <a href="https://github.com/expressjs/cookie-parser">cookie-parser</a>.</p>

  </section>

  <section>
    <h3 id="req.stale">req.stale</h3>

    <p>Indica se a requisição é “stale”, e é o oposto de <code class="highlighter-rouge">req.fresh</code>.
Para mais informações, veja <a href="#req.fresh">req.fresh</a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">req</span><span class="p">.</span><span class="nx">stale</span>
<span class="c1">// =&gt; true</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.subdomains">req.subdomains</h3>

    <p>Um array de subdomínios no nome do domínio da requisição.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Host: "tobi.ferrets.example.com"</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">subdomains</span>
<span class="c1">// =&gt; ["ferrets", "tobi"]</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.xhr">req.xhr</h3>

    <p>Um valor Booleano que é <code class="highlighter-rouge">true</code> se o campo “X-Requested-With” do cabeçalho da resquisição é
“XMLHttpRequest”, indicando que a requisição foi emitida por uma biblioteca cliente como jQuery.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">req</span><span class="p">.</span><span class="nx">xhr</span>
<span class="c1">// =&gt; true</span>
</code></pre>
    </div>

  </section>

  <h3 id="req.methods">Methods</h3>

  <section>
    <h3 id="req.accepts">req.accepts(tipos)</h3>

    <p>Verifica se o conteúdo especificado é aceitával, com base no campo <code class="highlighter-rouge">Accept</code> do cabeçalho da requisição HTTP.</p>

    <p>Este método retorna a melhor combinação ou, se nenhum dos tipos de conteúdo especificado é aceitável, retorna <code class="highlighter-rouge">undefined</code>
(neste caso, a aplicação deve responder com um <code class="highlighter-rouge">406 "Not Acceptable"</code>).</p>

    <p>O tipo de valor pode ser uma simples string MIME type (como “application/json”), um nome de extensão como “json”, uma lista delimitada por vírgula, ou um array. Para uma lista ou array, este método retorna a <em>melhor</em> combinação (se houver).</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Accept: text/html</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">(</span><span class="s1">'html'</span><span class="p">);</span>
<span class="c1">// =&gt; "html"</span>

<span class="c1">// Accept: text/*, application/json</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">(</span><span class="s1">'html'</span><span class="p">);</span>
<span class="c1">// =&gt; "html"</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">(</span><span class="s1">'text/html'</span><span class="p">);</span>
<span class="c1">// =&gt; "text/html"</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">([</span><span class="s1">'json'</span><span class="p">,</span> <span class="s1">'text'</span><span class="p">]);</span>
<span class="c1">// =&gt; "json"</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">(</span><span class="s1">'application/json'</span><span class="p">);</span>
<span class="c1">// =&gt; "application/json"</span>

<span class="c1">// Accept: text/*, application/json</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">(</span><span class="s1">'image/png'</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">(</span><span class="s1">'png'</span><span class="p">);</span>
<span class="c1">// =&gt; undefined</span>

<span class="c1">// Accept: text/*;q=.5, application/json</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">([</span><span class="s1">'html'</span><span class="p">,</span> <span class="s1">'json'</span><span class="p">]);</span>
<span class="c1">// =&gt; "json"</span>
</code></pre>
    </div>

    <p>Para mais informações, veja <a href="https://github.com/expressjs/accepts">accepts</a>.</p>

  </section>

  <section>
    <h3 id="req.acceptsCharsets">req.acceptsCharsets(charset [, ...])</h3>

    <p>Retorna o primeiro caractere aceito dos conjuntos de caracteres especificado,
baseado no campo do cabeçalho da requisição <code class="highlighter-rouge">Accept-Charset</code>.
Caso nenhum dos charsets especificados seja aceito, retorna <code class="highlighter-rouge">false</code>.</p>

    <p>Para mais informações ou caso você tenha problemas ou interesse, veja <a href="https://github.com/expressjs/accepts">accepts</a>.</p>

  </section>

  <section>
    <h3 id="req.acceptsEncodings">req.acceptsEncodings(encoding [, ...])</h3>

    <p>Retorna o primeiro encoding aceito dentre os encodings especificados,
baseado no campo do cabeçalho HTTP <code class="highlighter-rouge">Accept-Encoding</code> da requisição.
Caso nenhum dos encondings especificados seja aceito, retorna <code class="highlighter-rouge">false</code></p>

    <p>Para mais informações ou em caso de problemas veja <a href="https://github.com/expressjs/accepts">accepts</a>.</p>

  </section>

  <section>
    <h3 id="req.acceptsLanguages">req.acceptsLanguages(lang [, ...])</h3>

    <p>Retorna a primeira linguagem aceita da lista de linguagens especificadas,
baseado no campo do cabeçalho HTTP <code class="highlighter-rouge">Accept-Language</code> da requisição.
Caso nenhuma das linguagens especificadas seja aceita, retorna <code class="highlighter-rouge">false</code>.</p>

    <p>Para mais informações ou em caso de problemas veja <a href="https://github.com/expressjs/accepts">accepts</a>.</p>

  </section>

  <section>
    <h3 id="req.get">req.get(field)</h3>
    <p>Retorna o campo solicitado do cabeçalho da requisição HTTP (não sensível a maiúsculas e minúsculas).
Os campos <code class="highlighter-rouge">Referrer</code> e <code class="highlighter-rouge">Referer</code> são intercambiáveis.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">req</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">);</span>
<span class="c1">// =&gt; "text/plain"</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'content-type'</span><span class="p">);</span>
<span class="c1">// =&gt; "text/plain"</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'Something'</span><span class="p">);</span>
<span class="c1">// =&gt; undefined</span>
</code></pre>
    </div>

    <p>Alias com <code class="highlighter-rouge">req.header(field)</code>.</p>

  </section>

  <section>
    <h3 id="req.is">req.is(type)</h3>

    <p>Retorna <code class="highlighter-rouge">true</code> se o cabeçalho “Content-Type” da requisição HTTP de entrada
corresponde o tipo MIME especificado pelo parametro <code class="highlighter-rouge">type</code>. Caso contrário retorna <code class="highlighter-rouge">false</code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Com Content-Type: text/html; charset=utf-8</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">'html'</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">'text/html'</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">'text/*'</span><span class="p">);</span>
<span class="c1">// =&gt; true</span>

<span class="c1">// Quando Content-Type é application/json</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">'json'</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">'application/json'</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">'application/*'</span><span class="p">);</span>
<span class="c1">// =&gt; true</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">'html'</span><span class="p">);</span>
<span class="c1">// =&gt; false</span>
</code></pre>
    </div>

    <p>Para mais informações ou em caso de problemas veja <a href="https://github.com/expressjs/type-is">type-is</a>.</p>

  </section>

  <section>
    <h3 id="req.param">req.param(name [, defaultValue])</h3>

    <div class="doc-box doc-warn">
      <p>Deprecated. Utilize <code class="highlighter-rouge">req.params</code>, <code class="highlighter-rouge">req.body</code> ou <code class="highlighter-rouge">req.query</code>, conforme aplicação.</p>
    </div>

    <p>Retorna o valor do parâmetro <code class="highlighter-rouge">name</code> quando presente.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// ?name=tobi</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span>
<span class="c1">// =&gt; "tobi"</span>

<span class="c1">// POST name=tobi</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span>
<span class="c1">// =&gt; "tobi"</span>

<span class="c1">// /user/tobi for /user/:name</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span>
<span class="c1">// =&gt; "tobi"</span>
</code></pre>
    </div>

    <p>A busca é realizada na seguinte ordem:</p>

    <ul>
      <li><code class="highlighter-rouge">req.params</code></li>
      <li><code class="highlighter-rouge">req.body</code></li>
      <li><code class="highlighter-rouge">req.query</code></li>
    </ul>

    <p>De forma opcional, você pode especificar <code class="highlighter-rouge">defaultValue</code> ara definir um valor padrão
caso o parâmetro não seja encontrado em nenhum dos objetos da requisição.</p>

    <div class="doc-box doc-warn">
      <p>O acesso direto a <code class="highlighter-rouge">req.body</code>, <code class="highlighter-rouge">req.params</code>, e <code class="highlighter-rouge">req.query</code> deve ser favorecido
para maior clareza - a não ser que você verdadeiramente aceite entradas para cada objeto.</p>

      <p>O middleware de Body-parsing deve ser carregado para que <code class="highlighter-rouge">req.param()</code> trabalhe de maneira preditiva.
Veja <a href="#req.body">req.body</a> para maiores detalhes.</p>
    </div>

  </section>

  <p><a id="res" class="h2"></a></p>
  <h2>Response</h2>

  <p>O objeto <code class="highlighter-rouge">res</code> representa a resposta HTTP que uma app Express envia quando recebe uma requisição HTTP.</p>

  <p>Neste documento e por convenção, o objeto de resposta HTTP é sempre referido como <code class="highlighter-rouge">res</code> (e o objeto de requisição HTTP como <code class="highlighter-rouge">req</code> ) mas o nome real é determinado pelo parâmetro da função callback em que você está trabalhando.</p>

  <p>Por exemplo:</p>

  <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'user '</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
  </div>

  <p>Mas você poderia ter:</p>

  <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'user '</span> <span class="o">+</span> <span class="nx">request</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
  </div>

  <h3 id="res.properties">Propriedades</h3>

  <section>
    <h3 id="res.app">res.app</h3>

    <p>Esta propriedade contém uma referência para a instância da aplicação Express que está utilizando o middleware.</p>

    <p><code class="highlighter-rouge">res.app</code> é indêntica à propriedade <a href="#req.app">req.app</a> no objeto request.</p>

  </section>

  <section>
    <h3 id="res.headersSent">res.headersSent</h3>

    <p>Propriedade boleana que indica se a app enviou cabeçalhos HTTP para a resposta.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">headersSent</span><span class="p">);</span> <span class="c1">// false</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'OK'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">headersSent</span><span class="p">);</span> <span class="c1">// true</span>
<span class="p">})</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.locals">res.locals</h3>

    <p>Um objeto que contém variáveis locais no escopo da requisição, e por isso, disponíveis somente durante a renderização das views durante o ciclo requisição/resposta (se houver). Fora isso, esta propriedade é idêntica a <a href="#app.locals">app.locals</a>.</p>

    <p>Esta propriedade é útil para mostrar informações a nível de requisição, como o path da requisição, usuário autenticado, configurações de usuário e assim por diante.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">;</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">authenticated</span> <span class="o">=</span> <span class="o">!</span> <span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">anonymous</span><span class="p">;</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <h3 id="res.methods">Methods</h3>

  <section>
    <h3 id="res.append">res.append(field [, value])</h3>

    <div class="doc-box doc-info">
      <p><code class="highlighter-rouge">res.append()</code> é suportado a partir do Express v4.11.0+</p>
    </div>

    <p>Acrescenta um campo (<code class="highlighter-rouge">field</code>) com o valor (<code class="highlighter-rouge">value</code>) especificado no cabeçalho de resposta HTTP. Se o cabeçalho ainda não foi criado, cria o cabeçalho com campo e valor especificado. O parâmetro <code class="highlighter-rouge">value</code> pode ser uma string ou um array.</p>

    <p>Nota: chamando <code class="highlighter-rouge">res.set()</code> depois de <code class="highlighter-rouge">res.append()</code> você irá resetar os cabeçalhos previamente definidos.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'Link'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'&lt;http://localhost/&gt;'</span><span class="p">,</span> <span class="s1">'&lt;http://localhost:3000/&gt;'</span><span class="p">]);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'Set-Cookie'</span><span class="p">,</span> <span class="s1">'foo=bar; Path=/; HttpOnly'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'Warning'</span><span class="p">,</span> <span class="s1">'199 Miscellaneous warning'</span><span class="p">);</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.attachment">res.attachment([filename])</h3>

    <p>Configura o cabeçalho HTTP response <code class="highlighter-rouge">Content-Disposition</code> para “attachment” (´anexo´). Se <code class="highlighter-rouge">filename</code> é dado, configura o <code class="highlighter-rouge">Content-Type</code> com base no nome de extensão via <code class="highlighter-rouge">res.type()</code>, e configura o parâmetro “filename=” de <code class="highlighter-rouge">Content-Disposition</code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">attachment</span><span class="p">();</span>
<span class="c1">// Content-Disposition: attachment</span>

<span class="nx">res</span><span class="p">.</span><span class="nx">attachment</span><span class="p">(</span><span class="s1">'path/to/logo.png'</span><span class="p">);</span>
<span class="c1">// Content-Disposition: attachment; filename="logo.png"</span>
<span class="c1">// Content-Type: image/png</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.cookie">res.cookie(name, value [, options])</h3>

    <p>Seta o cookie <code class="highlighter-rouge">name</code> com <code class="highlighter-rouge">value</code>.  O parâmetro <code class="highlighter-rouge">value</code> é uma string ou um objeto convertido para JSON.</p>

    <p>O parâmetro <code class="highlighter-rouge">options</code> é um objeto e que pode ter as seguintes propriedades.</p>

    <table>
      <thead>
        <tr>
          <th>Propriedade</th>
          <th>Tipo</th>
          <th>Descrição</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code class="highlighter-rouge">domain</code></td>
          <td>String</td>
          <td>Nome de domínio para o cookie. O valor padrão é o nome do domínio do app.</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">expires</code></td>
          <td>Data</td>
          <td>Data de expiração do cookie em GMT. Se o valor não for especificado ou for 0, cria um cookie de sessão.</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">httpOnly</code></td>
          <td>Boleano</td>
          <td>Flag que torna o cookie acessível somente por servidor web.</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">maxAge</code></td>
          <td>String</td>
          <td>Opção conveniente para configurar o tempo de expiração relativo ao momento atual em milissegundos.</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">path</code></td>
          <td>String</td>
          <td>Caminho para o cookie. O padrão é “/”.</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">secure</code></td>
          <td>Boleano</td>
          <td>Marca o cookie para ser utilizado somente com HTTPS.</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">signed</code></td>
          <td>boleano</td>
          <td>Indica se o cookie deve ser assinado.</td>
        </tr>
      </tbody>
    </table>

    <div class="doc-box doc-notice">
      <p>Toda chamada para <code class="highlighter-rouge">res.cookie()</code> seta o cabeçalho HTTP <code class="highlighter-rouge">Set-Cookie</code> com as opções especificadas.
Qualquer opção não especificada terá por padrão os valores padronizados em <a href="http://tools.ietf.org/html/rfc6265">RFC 6265</a>.</p>
    </div>

    <p>Exemplos:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'tobi'</span><span class="p">,</span> <span class="p">{</span> <span class="na">domain</span><span class="p">:</span> <span class="s1">'.example.com'</span><span class="p">,</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'/admin'</span><span class="p">,</span> <span class="na">secure</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'rememberme'</span><span class="p">,</span> <span class="s1">'1'</span><span class="p">,</span> <span class="p">{</span> <span class="na">expires</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">+</span> <span class="mi">900000</span><span class="p">),</span> <span class="na">httpOnly</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
</code></pre>
    </div>

    <p>O opção <code class="highlighter-rouge">maxAge</code> serve para configurar “expires” relativamente ao tempo atual, em milissegundos.
A linha a seguir é equivalente ao segundo exemplo acima.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'rememberme'</span><span class="p">,</span> <span class="s1">'1'</span><span class="p">,</span> <span class="p">{</span> <span class="na">maxAge</span><span class="p">:</span> <span class="mi">900000</span><span class="p">,</span> <span class="na">httpOnly</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
</code></pre>
    </div>

    <p>Você pode passar um objeto como parâmetro <code class="highlighter-rouge">value</code>, que será serializado como JSON e repassado pelo middleware <code class="highlighter-rouge">bodyParser()</code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'cart'</span><span class="p">,</span> <span class="p">{</span> <span class="na">items</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="p">});</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'cart'</span><span class="p">,</span> <span class="p">{</span> <span class="na">items</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="p">},</span> <span class="p">{</span> <span class="na">maxAge</span><span class="p">:</span> <span class="mi">900000</span> <span class="p">});</span>
</code></pre>
    </div>

    <p>Quando utilizamos o middleware <a href="https://www.npmjs.com/package/cookie-parser">cookie-parser</a>, este método também suporta cookies assinados. Basta incluir a opção <code class="highlighter-rouge">signed</code> definida como <code class="highlighter-rouge">true</code>.
Então <code class="highlighter-rouge">res.cookie()</code> utilizará <code class="highlighter-rouge">cookieParser(secret)</code> para assinar o valor.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'tobi'</span><span class="p">,</span> <span class="p">{</span> <span class="na">signed</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
</code></pre>
    </div>

    <p>Posteriormente você pode acessar o valor utilizando o objeto <a href="#req.signedCookies">req.signedCookie</a>.</p>

  </section>

  <section>
    <h3 id="res.clearCookie">res.clearCookie(name [, options])</h3>

    <p>Limpa o cookie especificado por <code class="highlighter-rouge">name</code>. Para mais detalhes sobre o objeto <code class="highlighter-rouge">options</code>, veja <a href="#res.cookie">res.cookie()</a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'tobi'</span><span class="p">,</span> <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'/admin'</span> <span class="p">});</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">clearCookie</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'/admin'</span> <span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.download">res.download(path [, filename] [, fn])</h3>

    <p>Transfere o arquivo em <code class="highlighter-rouge">path</code> como um anexo. Tipicamente os browsers irão mostrar mostrar o prompt de download para o usuário.
Por padrão, o parâmetro “filename=” do cabeçalho <code class="highlighter-rouge">Content-Disposition é </code>path` (que tipicamente aparece na janela de diálogo para iniciar o download.</p>

    <p>O parâmetro <code class="highlighter-rouge">filename</code> substitue o nome padrão do arquivo fornecido em `path’.</p>

    <p>Quando o download é completado ou quando ocorre algum erro, o método chama a função callback opcional <code class="highlighter-rouge">fn</code>. Este método utiliza <a href="#res.sendFile">res.sendFile()</a> para transferir o arquivo.
~~~js
res.download(‘/report-12345.pdf’);</p>

    <p>res.download(‘/report-12345.pdf’, ‘report.pdf’);</p>

    <p>res.download(‘/report-12345.pdf’, ‘report.pdf’, function(err){
  if (err) {
    // Trata erro, mas lembre-se de que a resposta pode ter sido parcialmente enviada,
    // então verifique res.headersSent.
  } else {
    // decrement a download credit, etc.
  }
});
~~~</p>

  </section>

  <section>
    <h3 id="res.end">res.end([data] [, encoding])</h3>

    <p>Finaliza o processo response. Este método vem do core do Node, especificamente do método <a href="https://nodejs.org/api/http.html#http_response_end_data_encoding_callback">responde.end() de http.ServerResponse</a>.</p>

    <p>Utilize para interromper rapidamente a resposta sem enviar nenhum dado. Se você precisa responder com dados, utilize outros métodos como <a href="#res.send">res.send()</a> e <a href="#res.json">res.json()</a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">end</span><span class="p">();</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.format">res.format(object)</h3>

    <p>Realiza a negociação de conteúdo no cabeçalho HTTP <code class="highlighter-rouge">Accept</code> no objeto request, quando presente.
Utiliza <a href="#req.accepts">req.accepts()</a> para selecionar o <code class="highlighter-rouge">handler</code> (manipulador) para a requisição, com base nos tipos aceitáveis na ordem definida. Se o cabeçalho não for especificado, o primeiro callback é chamado. Quando nenhum caso é encontrado, o servidor responde com um 406 “Not Acceptable”, ou chama o callback <code class="highlighter-rouge">default</code>.</p>

    <p>O cabeçalho de resposta <code class="highlighter-rouge">Content-Type</code> é definido quando um callback é selecionado. No entanto isto pode ser alterado dentro do callback utilizando métodos como <code class="highlighter-rouge">res.set()</code> ou <code class="highlighter-rouge">res.type()</code>.</p>

    <p>O exemplo a seguir responderá com <code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hey"</span><span class="w"> </span><span class="p">}</span></code> quando o cabeçalho <code class="highlighter-rouge">Accept</code> for definido para “application/json” ou “*/json”
The following example would respond with <code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hey"</span><span class="w"> </span><span class="p">}</span></code> when the <code class="highlighter-rouge">Accept</code> header field is set
to “application/json” or “*/json” (porém se este for “*/*”, então a resposta será “hey”).</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">format</span><span class="p">({</span>
  <span class="s1">'text/plain'</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'hey'</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="s1">'text/html'</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'&lt;p&gt;hey&lt;/p&gt;'</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="s1">'application/json'</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="s1">'hey'</span> <span class="p">});</span>
  <span class="p">},</span>

  <span class="s1">'default'</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// log the request and respond with 406</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">406</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Not Acceptable'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Adicionalmente para tipos MIME canonizados, você pode também utilizar os nomes de extensão para simplificar a implementação:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">format</span><span class="p">({</span>
  <span class="na">text</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'hey'</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="na">html</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'&lt;p&gt;hey&lt;/p&gt;'</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="na">json</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="s1">'hey'</span> <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.get">res.get(field)</h3>

    <p>Retorna o cabeçalho de resposta HTTP especificado por <code class="highlighter-rouge">field</code>. O casamento não é sensível a maiúsculas e minúsculas.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">);</span>
<span class="c1">// =&gt; "text/plain"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.json">res.json([body])</h3>

    <p>Envia uma resposta em formato JSON. Este método é idêntico a <code class="highlighter-rouge">res.send()</code> com um objeto ou array como parâmetro.
No entanto, você pode utilizá-lo para converter outros valores como <code class="highlighter-rouge">null</code> e <code class="highlighter-rouge">undefined</code> para JSON (uma vez que tecnicamente estes valores não são JSONs válidos).</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span> <span class="na">user</span><span class="p">:</span> <span class="s1">'tobi'</span> <span class="p">})</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">error</span><span class="p">:</span> <span class="s1">'message'</span> <span class="p">})</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.jsonp">res.jsonp([body])</h3>

    <p>Envia uma resposta JSON com suporte a JSONP. Este método é idêntico a <code class="highlighter-rouge">res.json()</code>, mas dá suporte a callback JSONP.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">jsonp</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
<span class="c1">// =&gt; null</span>

<span class="nx">res</span><span class="p">.</span><span class="nx">jsonp</span><span class="p">({</span> <span class="na">user</span><span class="p">:</span> <span class="s1">'tobi'</span> <span class="p">})</span>
<span class="c1">// =&gt; { "user": "tobi" }</span>

<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">jsonp</span><span class="p">({</span> <span class="na">error</span><span class="p">:</span> <span class="s1">'message'</span> <span class="p">})</span>
<span class="c1">// =&gt; { "error": "message" }</span>
</code></pre>
    </div>

    <p>Por padrão, o callback JSONP é simplesmente chamado <code class="highlighter-rouge">callback</code>. Você pode alterar isto configurando <a href="#app.settings.table">o nome do callback de JSONP.</a></p>

    <p>A seguir alguns exemplos de respostas JSONP utilizando o mesmo código:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// ?callback=foo</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">jsonp</span><span class="p">({</span> <span class="na">user</span><span class="p">:</span> <span class="s1">'tobi'</span> <span class="p">})</span>
<span class="c1">// =&gt; foo({ "user": "tobi" })</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'jsonp callback name'</span><span class="p">,</span> <span class="s1">'cb'</span><span class="p">);</span>

<span class="c1">// ?cb=foo</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">jsonp</span><span class="p">({</span> <span class="na">error</span><span class="p">:</span> <span class="s1">'message'</span> <span class="p">})</span>
<span class="c1">// =&gt; foo({ "error": "message" })</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.links">res.links(links)</h3>

    <p>Define os <code class="highlighter-rouge">links</code> para popular o campo <code class="highlighter-rouge">Link</code>do cabeçalho de resposta HTTP.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">links</span><span class="p">({</span>
  <span class="na">next</span><span class="p">:</span> <span class="s1">'http://api.example.com/users?page=2'</span><span class="p">,</span>
  <span class="na">last</span><span class="p">:</span> <span class="s1">'http://api.example.com/users?page=5'</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Resultado:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">Link</span><span class="err">:</span> <span class="o">&lt;</span><span class="nx">http</span><span class="err">:</span><span class="c1">//api.example.com/users?page=2&gt;; rel="next", </span>
      <span class="o">&lt;</span><span class="nx">http</span><span class="err">:</span><span class="c1">//api.example.com/users?page=5&gt;; rel="last"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.location">res.location(path)</h3>

    <p>Define o cabeçalho HTTP <code class="highlighter-rouge">Location</code> para o parâmetro <code class="highlighter-rouge">path</code> especificado.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">location</span><span class="p">(</span><span class="s1">'/foo/bar'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">location</span><span class="p">(</span><span class="s1">'http://example.com'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">location</span><span class="p">(</span><span class="s1">'back'</span><span class="p">);</span>
</code></pre>
    </div>

    <p>O valor de <code class="highlighter-rouge">path</code> para “back” é um caso especial que se refere à URL especificada no cabeçalho <code class="highlighter-rouge">Referer</code> da requisição. Se <code class="highlighter-rouge">Referer</code> não foi especificado, “back” fará referência a “/”.</p>

    <div class="doc-box doc-warn">
      <p>O Express repassa para o browser a string URL especificada como está no cabeçalho <code class="highlighter-rouge">Location</code> sem fazer qualquer alteração ou validação, exceto no caso de <code class="highlighter-rouge">back</code>.</p>

      <p>Os browsers ficam com a responsabilidade de decifrar a intensão da URL passada a partir da URL atual ou URL de referência, e a URL especificada no cabeçalho <code class="highlighter-rouge">Location</code>; e então redirecionar apropriadamente.</p>
    </div>

  </section>

  <section>
    <h3 id="res.redirect">res.redirect([status,] path)</h3>

    <p>Redireciona para a URL especificada em <code class="highlighter-rouge">path</code> com o <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">HTTP status code</a> especificado em <code class="highlighter-rouge">status</code>. Se <code class="highlighter-rouge">status</code> é omitido o código padrão “302 Found” é aplicado.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'/foo/bar'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'http://example.com'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="mi">301</span><span class="p">,</span> <span class="s1">'http://example.com'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'../login'</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Os redirecionamentos pode feitos para um site diferente, por uma URL completa:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'http://google.com'</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Ou podem ser relativos ao host name root. Por exemplo, se a aplicação está rodando em <code class="highlighter-rouge">http://example.com/admin/post/new</code>, o código a seguir irá redirecionar para a URL <code class="highlighter-rouge">http://example.com/admin</code>:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'/admin'</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Ou podem ser relativos à URL atual. Por exemplo, a partir de <code class="highlighter-rouge">http://example.com/blog/admin/</code> (observe a barra final “/”) o código a seguir redirecionará para a URL <code class="highlighter-rouge">http://example.com/blog/admin/post/new</code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'post/new'</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Redirecionando para <code class="highlighter-rouge">post/new</code> a partir de <code class="highlighter-rouge">http://example.com/blog/admin</code> (sem barra final), iremos redirecionar para <code class="highlighter-rouge">http://example.com/blog/post/new</code>.</p>

    <p>Se você acha o comportamento acima confuso, pensar em seguimentos de path como diretórios (com barras finais) e arquivos, começará a fazer sentido.</p>

    <p>Redirecionamento para path relativas também são possíveis. Se você está em <code class="highlighter-rouge">http://example.com/admin/post/new</code>, o código seguinte irá redirecionar para <code class="highlighter-rouge">http//example.com/admin/post</code>:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'..'</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Um redirecionamento para <code class="highlighter-rouge">back</code> redireciona a requisição para <a href="http://en.wikipedia.org/wiki/HTTP_referer">referer</a>, padronizando para <code class="highlighter-rouge">/</code> quando referer é omitido.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'back'</span><span class="p">);</span>    
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.render">res.render(view [, locals] [, callback])</h3>

    <p>Renderiza a <code class="highlighter-rouge">view</code> e envia a string HTML renderizada para o cliente.
Parâmetros opcionais:</p>

    <ul>
      <li><code class="highlighter-rouge">locals</code>, um objeto cujas propriedades definem variáveis locais para a view.</li>
      <li><code class="highlighter-rouge">callback</code>, uma função callback. Se fornecida, o método retorna tanto um possível erro como a string renderizada, mas não realiza uma resposta automática. Quando um erro ocorre, o método invoca internamente <code class="highlighter-rouge">next(err)</code>.</li>
    </ul>

    <div class="doc-box doc-notice">
      <p>A variável local <code class="highlighter-rouge">cache</code> habilita cacheamento de view. Defina esse parâmetro para <code class="highlighter-rouge">true</code>,
para cachear a view durante o desenvolvimento; cacheamento de view está habilitado por padrão em modo de produção.</p>
    </div>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Envia a view renderizada para o cliente</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">'index'</span><span class="p">);</span>

<span class="c1">// se um callback é especificado, a string HTML renderizada precisa ser enviada explicitamente</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">'index'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// passa uma variável local para a view</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">'user'</span><span class="p">,</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'Tobi'</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.send">res.send([body])</h3>

    <p>Envia a resposta HTTP.
Sends the HTTP response.</p>

    <p>O parâmetro <code class="highlighter-rouge">body</code> pode ser um objeto <code class="highlighter-rouge">Buffer</code>, uma <code class="highlighter-rouge">String</code>, um objeto, ou um <code class="highlighter-rouge">Array</code>.
Por exemplo:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="s1">'whoop'</span><span class="p">));</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="na">some</span><span class="p">:</span> <span class="s1">'json'</span> <span class="p">});</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'&lt;p&gt;some html&lt;/p&gt;'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Sorry, we cannot find that!'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span> <span class="na">error</span><span class="p">:</span> <span class="s1">'something blew up'</span> <span class="p">});</span>
</code></pre>
    </div>

    <p>Este método realiza muitas tarefas usuais para uma resposta <code class="highlighter-rouge">non-streaming</code> simples:
Por exemplo, o campo <code class="highlighter-rouge">Content-Length</code> do cabeçalho HTTO é definido automaticamente (se não foi definido previamente), e fornece suporte automático para HEAD e HTTP cache fresh.</p>

    <p>Quando o parâmetro é um objeto ‘Buffer’, o método define o campo <code class="highlighter-rouge">Content-Type</code> do cabeçalho para “application/octet-stream”, caso não tenha sido definido previamente:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">,</span> <span class="s1">'text/html'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="s1">'&lt;p&gt;some html&lt;/p&gt;'</span><span class="p">));</span>
</code></pre>
    </div>

    <p>Quando o parâmetro é uma <code class="highlighter-rouge">String</code>, o método define <code class="highlighter-rouge">Content-Type</code> para “text/html”:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'&lt;p&gt;some html&lt;/p&gt;'</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Quando o parâretro é um <code class="highlighter-rouge">Array</code> ou um <code class="highlighter-rouge">Object</code>, o Express responde com uma representação JSON:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="na">user</span><span class="p">:</span> <span class="s1">'tobi'</span> <span class="p">});</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]);</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.sendFile">res.sendFile(path [, options] [, fn])</h3>

    <div class="doc-box doc-info">
      <p><code class="highlighter-rouge">res.sendFile()</code> Suportado a partir do Express v4.8.0</p>
    </div>

    <p>Transfere o arquivo dado em <code class="highlighter-rouge">path</code>. Define o campo <code class="highlighter-rouge">Content-Type</code> do cabeçalho de requisição HTTP com base no nome de extensão do arquivo. A menos que a opção <code class="highlighter-rouge">root</code> esteja definida no objeto <code class="highlighter-rouge">options</code>, <code class="highlighter-rouge">path</code> precisa ser um caminho absoluto para o arquivo.</p>

    <p>Os detalhes do objeto <code class="highlighter-rouge">options</code> estão listados na seguinte tabela:</p>

    <div class="table-scroller">

      <table>
        <thead>
          <tr>
            <th>Propriedade</th>
            <th>Descrição</th>
            <th>Padrão</th>
            <th>Disponibilidade</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code class="highlighter-rouge">maxAge</code></td>
            <td>Define a propriedade max-age do cabeçalho <code class="highlighter-rouge">Cache-Control</code> em milissegundos ou uma string em <a href="https://www.npmjs.org/package/ms">formato ms</a></td>
            <td>0</td>
            <td> </td>
          </tr>
          <tr>
            <td><code class="highlighter-rouge">root</code></td>
            <td>Diratório raiz para nomes de arquivos relativos.</td>
            <td> </td>
            <td> </td>
          </tr>
          <tr>
            <td><code class="highlighter-rouge">lastModified</code></td>
            <td>Define o cabeçalho <code class="highlighter-rouge">Last-Modified</code> para a última data de modificação do arquivo no sistema operacional. Defina como <code class="highlighter-rouge">false</code> para desabilitar.</td>
            <td>Enabled</td>
            <td>4.9.0+</td>
          </tr>
          <tr>
            <td><code class="highlighter-rouge">headers</code></td>
            <td>Objeto contento os cabeçalhos HTTP para fornecer com o arquivo.</td>
            <td> </td>
            <td> </td>
          </tr>
          <tr>
            <td><code class="highlighter-rouge">dotfiles</code></td>
            <td>Opção para servir arquivos <code class="highlighter-rouge">dotfiles</code>. Os valores possíveis são “allow”, “deny”, “ignore”.</td>
            <td>“ignore”</td>
            <td> </td>
          </tr>
        </tbody>
      </table>

    </div>

    <p>O método invoca a função callback <code class="highlighter-rouge">fn(err)</code> quando a transferência é completada ou quando ocorre um erro. Se a função callback é especificada e ocorre um erro, a função callback precisa explicitamente manipular o processo de resposta terminando o ciclo de requisição-resposta ou passando o controle para a rota seguinte.</p>

    <p>Aqui está um exemplo de utilização de <code class="highlighter-rouge">res.sendFile</code> com todos estes argumentos.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/file/:name'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">root</span><span class="p">:</span> <span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public/'</span><span class="p">,</span>
    <span class="na">dotfiles</span><span class="p">:</span> <span class="s1">'deny'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">'x-timestamp'</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>
        <span class="s1">'x-sent'</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="kd">var</span> <span class="nx">fileName</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">sendFile</span><span class="p">(</span><span class="nx">fileName</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">status</span><span class="p">).</span><span class="nx">end</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Sent:'</span><span class="p">,</span> <span class="nx">fileName</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>

<span class="p">})</span>
</code></pre>
    </div>

    <p><code class="highlighter-rouge">res.sendFile</code> fornece suporte para baixa granulidade para os arquivos que serve, como ilustrado no exemplo a seguir:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:uid/photos/:file'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">uid</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">uid</span>
    <span class="p">,</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">file</span><span class="p">;</span>

  <span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">mayViewFilesFrom</span><span class="p">(</span><span class="nx">uid</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">yes</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">yes</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">sendFile</span><span class="p">(</span><span class="s1">'/uploads/'</span> <span class="o">+</span> <span class="nx">uid</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">file</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">403</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Sorry! you cant see that.'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
    </div>
    <p>Para mais informações ou se você tiver problemas ou dúvidas, veja <a href="https://github.com/pillarjs/send">send</a>.</p>

  </section>

  <section>
    <h3 id="res.sendStatus">res.sendStatus(statusCode)</h3>

    <p>Define o código de status de resposta HTTP para <code class="highlighter-rouge">statusCode</code> e envia esta string com esta representação como response body.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span> <span class="c1">// equivalent to res.status(200).send('OK')</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">403</span><span class="p">);</span> <span class="c1">// equivalent to res.status(403).send('Forbidden')</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">404</span><span class="p">);</span> <span class="c1">// equivalent to res.status(404).send('Not Found')</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span> <span class="c1">// equivalent to res.status(500).send('Internal Server Error')</span>
</code></pre>
    </div>

    <p>Se um código não suportado é especificado, o status HTTP ainda estará definido para <code class="highlighter-rouge">statusCode</code> e a versão em string do código é enviada como response body.
~~~js
res.sendStatus(2000); // equivalent to res.status(2000).send(‘2000’)
~~~</p>

    <p><a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes">Mais sobre Status Codes HTTP</a></p>

  </section>

  <section>
    <h3 id="res.set">res.set(field [, value])</h3>

    <p>Define o cabeçalho de resposta HTTP <code class="highlighter-rouge">field</code> com <code class="highlighter-rouge">value</code>.
Para definir múltiplos campos de uma vez, passe um objeto como parâmetro.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">,</span> <span class="s1">'text/plain'</span><span class="p">);</span>

<span class="nx">res</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span>
  <span class="s1">'Content-Type'</span><span class="p">:</span> <span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Content-Length'</span><span class="p">:</span> <span class="s1">'123'</span><span class="p">,</span>
  <span class="s1">'ETag'</span><span class="p">:</span> <span class="s1">'12345'</span>
<span class="p">})</span>
</code></pre>
    </div>

    <p>Alias como <code class="highlighter-rouge">res.header(field [, value])</code>.</p>

  </section>

  <section>
    <h3 id="res.status">res.status(code)</h3>

    <p>Use este método para definir o status para a resposta.
Este é um alias para o <a href="http://nodejs.org/api/http.html#http_response_statuscode">response.statusCode</a> do Node.
~~~js
res.status(403).end();
res.status(400).send(‘Bad Request’);
res.status(404).sendFile(‘/absolute/path/to/404.png’);
~~~</p>

  </section>

  <section>
    <h3 id="res.type">res.type(type)</h3>

    <p>Define o cabeçalho HTTP <code class="highlighter-rouge">Content-Type</code> para MIME type como determinado por <a href="https://github.com/broofa/node-mime#mimelookuppath">mime.lookup()</a> para o parâmetro <code class="highlighter-rouge">type</code> especificado.
Se <code class="highlighter-rouge">type</code> contém o caractere “/”, <code class="highlighter-rouge">Content-Type</code> é definido para <code class="highlighter-rouge">type</code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">'.html'</span><span class="p">);</span>              <span class="c1">// =&gt; 'text/html'</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">'html'</span><span class="p">);</span>               <span class="c1">// =&gt; 'text/html'</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">'json'</span><span class="p">);</span>               <span class="c1">// =&gt; 'application/json'</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">'application/json'</span><span class="p">);</span>   <span class="c1">// =&gt; 'application/json'</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">'png'</span><span class="p">);</span>                <span class="c1">// =&gt; image/png:</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.vary">res.vary(field)</h3>

    <p>Adiciona <code class="highlighter-rouge">field</code> no cabeçalho de resposta <code class="highlighter-rouge">Vary</code>, se não está definido.
~~~js
res.vary(‘User-Agent’).render(‘docs’);
~~~</p>

  </section>

  <p><a id="router" class="h2"></a></p>
  <h2>Router</h2>

  <section>
    <p>Um objeto <code class="highlighter-rouge">router</code> é uma instância isolada de middleware e rotas. Você pode considerar isso como uma “mini aplicação”, capaz somente de processar middlewares e funções de roteamento. Toda aplicação Express tem um app router embutido.</p>

    <p>Um router se comporta como o próprio middleware, assim você pode utilizá-lo como um argumento para <a href="#app.use">app.use()</a> ou como argumento de outro método  <a href="#router.use">use()</a> da rota.</p>

    <p>O objeto de alto nível <code class="highlighter-rouge">express</code> tem uma função <code class="highlighter-rouge">Router()</code> que cria um novo objeto <code class="highlighter-rouge">router</code>.</p>

    <h3 id="router">Router([options])</h3>

    <p>Cria um novo Router conforme o seguinte:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">([</span><span class="nx">options</span><span class="p">]);</span>
</code></pre>
    </div>

    <p>O parâmetro opcional <code class="highlighter-rouge">options</code> especifica o comportamento do roteador.</p>

    <div class="table-scroller">

      <table>
        <thead>
          <tr>
            <th>Property</th>
            <th>Description</th>
            <th>Default</th>
            <th>Availability</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code class="highlighter-rouge">caseSensitive</code></td>
            <td>Habilita a diferenciação de maiúsculas e minúsculas.</td>
            <td>Desabilitado por padrão, tratando “/Foo” e “/foo” como o mesmo.</td>
            <td> </td>
          </tr>
          <tr>
            <td><code class="highlighter-rouge">mergeParams</code></td>
            <td>Preserva os valores <code class="highlighter-rouge">req.params</code> do roteador pai. Se o pai e o filho possuem nomes conflitantes, o valor do filho tem precedência.</td>
            <td><code class="highlighter-rouge">false</code></td>
            <td>4.5.0+</td>
          </tr>
          <tr>
            <td><code class="highlighter-rouge">strict</code></td>
            <td>Habilita a rota estrita.</td>
            <td>Desabilitado por padrão, “/foo” e “/foo/” são tratados como o mesmo peo roteador.</td>
            <td> </td>
          </tr>
        </tbody>
      </table>

    </div>

    <p>Você pode adicionar middlewares e métodos de rotas HTTP (tais como <code class="highlighter-rouge">get</code>, <code class="highlighter-rouge">put</code>, <code class="highlighter-rouge">post</code>, e assim por diante)
ao <code class="highlighter-rouge">router</code> assim como uma aplicação.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// invocado para quaisquer requisições passadas a esse router</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// .. alguma lógica aqui .. como qualquer outro middleware</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="c1">// irá tratar qualquer requisição que termine em /events</span>
<span class="c1">// depende onde o roteador é "use()'d"</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/events'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ..</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Você pode usa um roteador para uma URL raiz em particular dessa maneira separando suas rotas em arquivos ou até mini-apps.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// somente requisições para /calendar/* serão enviadas para o nosso "router"</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/calendar'</span><span class="p">,</span> <span class="nx">router</span><span class="p">);</span>
</code></pre>
    </div>

  </section>

  <h3 id="router.methods">Methods</h3>

  <section>
    <h3 id="router.all">router.all(path, [callback, ...] callback)</h3>

    <p>Este método funciona como os métodos <code class="highlighter-rouge">router.METHOD()</code> exceto que casam com todos os verbos HTTP.</p>

    <p>É extremamente útil para mapear lógicas “globais” para casar paths prefixadas ou arbitrárias.</p>

    <p>Por exemplo, se você inserir a seguinte rota no topo de todas as outras definições de rota, isto forçar que qualquer rota exiga autenticação de usuário e automaticamente carregue seus dados. Tendo em mente que esses callbacks não precisam atuar como <code class="highlighter-rouge">end points</code>; <code class="highlighter-rouge">loadUser</code> pode realizar uma tarefa, então chamar <code class="highlighter-rouge">next()</code> para continuar casando as rotas seguintes.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'*'</span><span class="p">,</span> <span class="nx">requireAuthentication</span><span class="p">,</span> <span class="nx">loadUser</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Ou o equivalente:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'*'</span><span class="p">,</span> <span class="nx">requireAuthentication</span><span class="p">)</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'*'</span><span class="p">,</span> <span class="nx">loadUser</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Outro exemplo de uso disto é para criar uma funcionalidade global de “lista branca”. O próximo exemplo é parecido com o anterior, mas ele está restrito a paths prefixadas com “/api”:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'/api/*'</span><span class="p">,</span> <span class="nx">requireAuthentication</span><span class="p">);</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="router.METHOD">router.METHOD(path, [callback, ...] callback)</h3>

    <p>Os métodos <code class="highlighter-rouge">router.METHOD()</code> fornecem a funcionalidade de roteamento no Express, onde METHOD é um dos métodos HTTP, como GET, PUT, POST e assim por diante (todos em minúsculas). Assim, os métodos atualmente disponíveis são <code class="highlighter-rouge">router.get()</code>, <code class="highlighter-rouge">router.post()</code>, <code class="highlighter-rouge">router.put()</code> e etc.</p>

    <p>Você pode fornecer múltiplos callbacks, e todos serão tratatos igualmente, e se comportarão como middlewares, exceto que esses callbacks podem invocar <code class="highlighter-rouge">next('route')</code> para pular os callbacks restantes na rota. Você pode utilizar essa funcionalidade para criar pré condições em uma rota e então passar o controle para rotas seguintes quando não houver mais razão para continuar na rota atual.</p>

    <p>O trecho seguinte ilustra a definição de rota mais simples possível.
O Express traduz a string path para uma expressão regular, usada internamente para casas entradas de requisições.
Query strings <em>não</em> são consideradas quando executando esses casamentos de entradas de requisições, por exemplo, “GET /” casará com a seguinte rota, tal como “GET /?name=tobi”.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'hello world'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Você pode também utilizar expressões regulares — úteis quando você tem uma regra bem específica. O exemplo seguinte casa com “GET /commits/71dbb9c” e também com “GET /commits/71dbb9c..4c084f9”.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sr">/^</span><span class="se">\/</span><span class="sr">commits</span><span class="se">\/(\w</span><span class="sr">+</span><span class="se">)(?:\.\.(\w</span><span class="sr">+</span><span class="se">))?</span><span class="sr">$/</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">from</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">to</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s1">'HEAD'</span><span class="p">;</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'commit range '</span> <span class="o">+</span> <span class="nx">from</span> <span class="o">+</span> <span class="s1">'..'</span> <span class="o">+</span> <span class="nx">to</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="router.param">router.param(name, callback)</h3>

    <p>Adiciona gatilhos de callback para os parametros da rota, onde <code class="highlighter-rouge">name</code> é o nome do parametro e <code class="highlighter-rouge">callback</code> é a função de callback. Os parametros
da função de callback são o objeto da requisição, o objeto de resposta, o próximo middleware, e o valor do parâmetro, nessa ordem. Embora <code class="highlighter-rouge">name</code>
seja tecnicamente opcional, utilizar esse método sem ele ele é deprecated desde Express v4.11.0 (veja abaixo).</p>

    <div class="doc-box doc-info">
      <p>Diferente de <code class="highlighter-rouge">app.param()</code>, <code class="highlighter-rouge">router.param()</code>não aceita um array de parametros de rota.</p>
    </div>

    <p>Por exemplo, quando <code class="highlighter-rouge">:user</code> está presente em um path da rota, você pode mapear a lógica de mapeamento para fornecer automaticamente <code class="highlighter-rouge">req.user</code>
para a rota, ou realizar validações no parametro de entrada.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'user'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// tenta buscar os detalhes do usuário do modelo User e o anexa no objeto da requisição</span>
  <span class="nx">User</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">req</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="nx">user</span><span class="p">;</span>
      <span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'failed to load user'</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Funções de callback de parâmentros são locais ao roteador ao qual foram definidas. Elas não são herdadas por apps montados ou roteadores.
Consequentemente, parâmentros de callback definidos no <code class="highlighter-rouge">router</code> serão desencadeados somente por paramtros de rota definidos nas rotas do <code class="highlighter-rouge">router</code>.</p>

    <p>Um paramentro de callback será chamado somente uma vez em um ciclo de requisição-resposta, mesmo se o parametro coincide com multiplas rotas,
como mostrado nos seguintes exemplos.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'CALLED ONLY ONCE'</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'although this matches'</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'and this matches too'</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Em <code class="highlighter-rouge">GET /user/42</code>, o seguinte é impresso:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>CALLED ONLY ONCE
although this matches
and this matches too
</code></pre>
    </div>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id/:page'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'although this matches'</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id/:page'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'and this matches too'</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Em <code class="highlighter-rouge">GET /user/42/3</code>, o seguinte é impresso:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>although this matches
and this matches too
</code></pre>
    </div>

    <div class="doc-box doc-warn">
      <p>A seção seguinte descreve <code class="highlighter-rouge">router.param(callback)</code>, que está deprecated desde v4.11.0.</p>
    </div>

    <p>O comportamento do método <code class="highlighter-rouge">router.param(name, callback)</code> pode ser alterado completamente aravés da passagem de apenas uma função
para o <code class="highlighter-rouge">router.param()</code>. Essa função é uma implementação personalizada de como <code class="highlighter-rouge">router.param(name, callback)</code> deve se comportar - ela aceita
dois parâmetros e deve retornar um middleware.</p>

    <p>O primeiro parametro dessa função é o nome d parâmetro da URL que deve ser capturado, o segundo parâmetro pode ser qualquer objeto JavaScript suscetível
a utilização para o retorno da implementação do middleware.</p>

    <p>O middleware retornado pela função decide o comportamento do que acontece quando o parâmetro da URL é capturado.</p>

    <p>Nesse exemplo, a assinatura <code class="highlighter-rouge">router.param(name, callback)</code> é modificada para <code class="highlighter-rouge">router.param(name, accessId)</code>. Ao invés de aceitar o nome e o callback,
<code class="highlighter-rouge">router.param()</code> passará a aceitar nome e número.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="c1">// personalizando o comportamento de router.param()</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">param</span><span class="p">,</span> <span class="nx">option</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">val</span> <span class="o">==</span> <span class="nx">option</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">403</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// utilizando o router.param() personalizado</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="mi">1337</span><span class="p">);</span>

<span class="c1">// roteando para desencadear a captura</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'OK'</span><span class="p">);</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">router</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Ready'</span><span class="p">);</span>
<span class="p">})</span>
</code></pre>
    </div>

    <p>Nesse exemplo, a assinatura <code class="highlighter-rouge">router.param(name, callback)</code> se mantém a mesma, mas ao invés de um middleware callback, uma função de verificação personalizada de dados foi definida para validar o tipo de dado do id do usuário.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">param</span><span class="p">,</span> <span class="nx">validator</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">validator</span><span class="p">(</span><span class="nx">val</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">403</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">candidate</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">candidate</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nb">isFinite</span><span class="p">(</span><span class="nx">candidate</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="router.route">router.route(path)</h3>

    <p>Retorna uma instância de uma única rota a qual você pode então usar para manusear
verbos HTTP com um middleware opcional. Use <code class="highlighter-rouge">router.route()</code> para evitar nomes de
rota duplicados e assim erros de grafia.</p>

    <p>Constuído com base no exemplo <code class="highlighter-rouge">router.param()</code> acima, o seguinte código demonstra a
utilização de <code class="highlighter-rouge">router.route()</code> para especificar vários métodos manipuladores HTTP.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'user_id'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// usuário exemplo, seria na verdade buscado do DB, etc...</span>
  <span class="nx">req</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="nx">id</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'TJ'</span>
  <span class="p">};</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">'/users/:user_id'</span><span class="p">)</span>
<span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// roda para todos os verbos HTTP primeiro</span>
  <span class="c1">// pense nisso como uma rota middleware específica!</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">);</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// apenas um exemplo de talvez atualizar o usuário</span>
  <span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
  <span class="c1">// salvando o usuário ... etc</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">);</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'not implemented'</span><span class="p">));</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'not implemented'</span><span class="p">));</span>
<span class="p">})</span>
</code></pre>
    </div>

    <p>Essa abordagem reutiliza o único caminho ‘/users/:user_id’ e adiciona manipuladores
para vários métodos HTTP.</p>

  </section>

  <section>
    <h3 id="router.use">router.use([path], [function, ...] function)</h3>

    <p>Usa a <code class="highlighter-rouge">function</code> middleware passada, com um caminho de montagem opcional <code class="highlighter-rouge">path</code>, que padroniza para “/”.</p>

    <p>Esse método é similar a <a href="#app.use">app.use()</a>. Um exemplo simples e caso de uso é descrito abaixo.
Veja <a href="#app.use">app.use()</a> para mais informações.</p>

    <p>Um Middleware é como um encanamento, a requisição inicia no primeiro middleware que você definiu
e trabalha por toda a pilha de middleware processando para cada caminho que ele encontra.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="c1">// loger simples para as requisições desse roteador</span>
<span class="c1">// todas as requisições para esse roteador irão acertar primeiro esse middleware</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'%s %s %s'</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">method</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">path</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="c1">// isso será chamado apenas se o caminho começar com /bar a partir do ponto de montagem</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/bar'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ... talvez algum log adicional em /bar ...</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="c1">// sempre será chamado</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Hello World'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/foo'</span><span class="p">,</span> <span class="nx">router</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</code></pre>
    </div>

    <p>O caminho “mount” é desmembrado e <em>not</em> visível à <code class="highlighter-rouge">function</code> middleware.
O principal efeito dessa característica é que o middleware montado pode operar sem
mudanças no código independentemente do seu “prefix” no nome do caminho.</p>

    <p>A ordem em que você define o middleware com <code class="highlighter-rouge">router.use()</code> é muito impoertante.
Eles são chamados sequencialmente, assim a ordem define a precedência do middleware.
Por exemplo, geralmente um logger é um primeiro middleware que você usaria, então toda
requisição é logada.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'morgan'</span><span class="p">);</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">logger</span><span class="p">());</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public'</span><span class="p">));</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Hello'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Agora suponha que você queria ignorar requisições de log para arquivos estáticos,
mas continue a logar rotas e middlewares definidos após <code class="highlighter-rouge">logger()</code>. Você simplesmente
move o <code class="highlighter-rouge">static()</code> acima:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public'</span><span class="p">));</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">logger</span><span class="p">());</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Hello'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Outro exemplo concreto é servir arquivos de multiplos diretórios, dando precendência
a “./public” sobre os outros:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/files'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/uploads'</span><span class="p">));</span>
</code></pre>
    </div>

    <p>O método <code class="highlighter-rouge">router.use()</code> também suporta parâmetros nomeados de modo que seus pontos
de montagem para outras rotas podem se beneficiar da precarga utilizando parâmetros nomeados.</p>

  </section>

</div>


    </section>

    <!-- NLS_CHARSET=UTF-8 -->
<noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5XL76H" height="0" width="0" style="display: none; visibility: hidden;"></iframe>
</noscript>
<script>
(function(w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
        '//www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-5XL76H');
</script>
<a id="top" href="#"><img src="/images/arrow.png"></a>

<footer>
    <div id="footer-content">
        <div id="github">
            <iframe src="http://ghbtns.com/github-btn.html?user=strongloop&amp;repo=express&amp;type=watch&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>
        </div>
        <div id="sponsor">O
<a href="https://github.com/strongloop/express/">projeto Express</a>
é patrocinado pelo <a href="http://strongloop.com/">StrongLoop</a>. </div>
        <div id="fork">
<a href="https://github.com/strongloop/expressjs.com">Crie um Fork dowebsite no GitHub</a>.
        </div>
        <div>Copyright &copy; StrongLoop, Inc., e outros
contribuidores do expressjs.com.</div>
    </div>
</footer>


  </body>

</html>
