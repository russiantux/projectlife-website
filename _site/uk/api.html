<!DOCTYPE html>
<html lang="uk">

  <head>
    <title>Express 4.x - API Reference</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/dropit.css">
    <link rel="stylesheet" href="/css/prism.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;amp;subset=latin,latin-ext">
    <link rel="stylesheet" href="/css/uk.css">        
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script data-cfasync="false" src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script data-cfasync="false" src="/js/app.js"></script>
    <script data-cfasync="false" src="/js/retina.js"></script>
    <script data-cfasync="false" src="/js/dropit.js"></script>
    <script data-cfasync="false" src="/js/prism.js"></script>
</head>


  <body>

    <section class="content">

      <header>
  <div id="mobile-menu">
      <div id="nav-button" class="fa fa-bars fa-2x button"></div>
  </div>
  <section id="logo"><a href="/" class="express">Express</a>
  </section>
  <div id="navbar">
      <ul id="navmenu">
          <li><a href="/uk/" id="home-menu">Home</a></li>
          <li>
              <ul id="getting-started-menu" class="menu">
                  <li><a href="/uk/starter/installing.html">Getting started</a>
                      <ul>
                          <li>
                            <a href="/uk/starter/installing.html">
                              Installing
                            </a>
                          </li>
                          <li>
                            <a href="/uk/starter/hello-world.html">
                              Hello world
                            </a>
                          </li>
                          <li>
                          <a href="/uk/starter/generator.html">
                            Express generator
                          </a>
                          </li>
                          <li>
                            <a href="/uk/starter/basic-routing.html">
                              Basic routing
                            </a>
                          </li>
                          <li>
                            <a href="/uk/starter/static-files.html">
                              Static files
                            </a>
                          </li>
                          <li>
                            <a href="/uk/starter/faq.html">
                              FAQ
                            </a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="guide-menu" class="menu">
                  <li><a href="/uk/guide/routing.html">Guide</a>
                      <ul>
                          <li><a href="/uk/guide/routing.html">Routing</a>
                          </li>
                          <li><a href="/uk/guide/writing-middleware.html">Writing middleware</a>
                          </li>
                          <li><a href="/uk/guide/using-middleware.html">Using middleware</a>
                          </li>
                          <li><a href="/uk/guide/using-template-engines.html">Using template engines</a>
                          </li>
                          <li><a href="/uk/guide/error-handling.html">Error handling</a>
                          </li>
                          <li><a href="/uk/guide/debugging.html">Debugging</a>
                          </li>
                          <li><a href="/uk/guide/behind-proxies.html">Express behind proxies</a>
                          </li>
                          <li><a href="/uk/guide/migrating-4.html">Moving to Express 4</a>
                          </li>
                          <li><a href="/uk/guide/migrating-5.html">Moving to Express 5</a>
                          </li>
                          <li><a href="/uk/guide/database-integration.html">Database integration</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="application-menu" class="menu">
                  <li><a href="/uk/4x/api.html">API reference</a>
                      <ul>
                          <li><a href="/uk/4x/api.html">4.x</a>
                          </li>
                          <li><a href="/uk/3x/api.html">3.x (deprecated)</a>
                          </li>
                          <li><a href="/uk/2x/">2.x (deprecated)</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="advanced-topics-menu" class="menu">
                  <li><a href="/uk/advanced/developing-template-engines.html">Advanced topics</a>
                      <ul>
                          <li><a href="/uk/advanced/developing-template-engines.html">Template engines</a>
                          </li>
                          <li><a href="/uk/advanced/pm.html">Using process managers</a>
                          </li>
                          <li><a href="/uk/advanced/security-updates.html">Security updates</a>
                          </li>
                          <li><a href="/uk/advanced/best-practice-security.html">Security best practices</a>
                          </li>
                          <li><a href="/uk/advanced/best-practice-performance.html">Performance best practices</a>
                          </li>

                      </ul>
                  </li>
              </ul>
          </li>
          <li>
              <ul id="resources-menu" class="menu">
                  <li><a href="/uk/resources/glossary.html">Resources</a>
                      <ul>
                          <li><a href="/uk/resources/glossary.html">Glossary</a>
                          </li>
                          <li><a href="/uk/resources/middleware.html">Middleware</a>
                          </li>
                          <li><a href="/uk/resources/community.html">Community</a>
                          </li>
                          <li><a href="/uk/resources/books-blogs.html">Books and blogs</a>
                          </li>
                          <li><a href="/uk/resources/applications.html">Applications</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
      </ul>
  </div><a href="http://strongloop.com/node-js/training/" title="Node and Express Training from StrongLoop" id="strongloop-header">Express and Node.js Training from StrongLoop</a>
</header>


      <ul id="menu">

    <li id="express-api"><a href="#express">express()</a>
    <ul id="express-menu">
        <li><em>Methods</em></li>
        <li id="express-static-middleware"><a href="#express.static">express.static()</a></li>
    </ul>
    </li>

    <li id="app-api"><a href="#app">Application</a>
        <ul id="app-menu">
            <li><em>Properties</em>
            </li>
            <li><a href="#app.locals">app.locals</a>
            </li>
            <li><a href="#app.mountpath">app.mountpath</a>
            </li>
            <li><em>Events</em>
            </li>
            <li><a href="#app.onmount">mount</a>
            </li>
            <li><em>Methods</em>
            </li>
            <li><a href="#app.all">app.all()</a>
            </li>
            <li><a href="#app.delete.method">app.delete()</a>
            </li>
            <li><a href="#app.disable">app.disable()</a>
            </li>
            <li><a href="#app.disabled">app.disabled()</a>
            </li>
            <li><a href="#app.enable">app.enable()</a>
            </li>
            <li><a href="#app.enabled">app.enabled()</a>
            </li>
            <li><a href="#app.engine">app.engine()</a>
            </li>
            <li><a href="#app.get">app.get()</a>
            </li>
            <li><a href="#app.get.method">app.get()</a>
            </li>
            <li><a href="#app.listen">app.listen()</a>
            </li>
            <li><a href="#app.METHOD">app.METHOD()</a>
            </li>
            <li><a href="#app.param">app.param()</a>
            </li>
            <li><a href="#app.path">app.path()</a>
            </li>
            <li><a href="#app.post.method">app.post()</a>
            </li>
            <li><a href="#app.put.method">app.put()</a>
            </li>
            <li><a href="#app.render">app.render()</a>
            </li>
            <li><a href="#app.route">app.route()</a>
            </li>
            <li><a href="#app.set">app.set()</a>
            </li>
            <li><a href="#app.use">app.use()</a>
            </li>
        </ul>
    </li>
    <li id="req-api"><a href="#req">Request</a>
        <ul id="req-menu">
            <li><em>Properties</em>
            </li>
            <li><a href="#req.app">req.app</a>
            </li>
            <li><a href="#req.baseUrl">req.baseUrl</a>
            </li>
            <li><a href="#req.body">req.body</a>
            </li>
            <li><a href="#req.cookies">req.cookies</a>
            </li>
            <li><a href="#req.fresh">req.fresh</a>
            </li>
            <li><a href="#req.hostname">req.hostname</a>
            </li>
            <li><a href="#req.ip">req.ip</a>
            </li>
            <li><a href="#req.ips">req.ips</a>
            </li>
            <li><a href="#req.originalUrl">req.originalUrl</a>
            </li>
            <li><a href="#req.params">req.params</a>
            </li>
            <li><a href="#req.path">req.path</a>
            </li>
            <li><a href="#req.protocol">req.protocol</a>
            </li>
            <li><a href="#req.query">req.query</a>
            </li>
            <li><a href="#req.route">req.route</a>
            </li>
            <li><a href="#req.secure">req.secure</a>
            </li>
            <li><a href="#req.signedCookies">req.signedCookies</a>
            </li>
            <li><a href="#req.stale">req.stale</a>
            </li>
            <li><a href="#req.subdomains">req.subdomains</a>
            </li>
            <li><a href="#req.xhr">req.xhr</a>
            </li>
            <li><em>Methods</em>
            </li>
            <li><a href="#req.accepts">req.accepts()</a>
            </li>
            <li><a href="#req.acceptsCharsets">req.acceptsCharsets()</a>
            </li>
            <li><a href="#req.acceptsEncodings">req.acceptsEncodings()</a>
            </li>
            <li><a href="#req.acceptsLanguages">req.acceptsLanguages()</a>
            </li>
            <li><a href="#req.get">req.get()</a>
            </li>
            <li><a href="#req.is">req.is()</a>
            </li>
            <li><a href="#req.param">req.param()</a>
            </li>
        </ul>
    </li>
    <li id="res-api"><a href="#res">Response</a>
        <ul id="res-menu">
            <li><em>Properties</em>
            </li>
            <li><a href="#res.app">res.app      </a>
            </li>
            <li><a href="#res.headersSent">res.headersSent</a>
            </li>
            <li><a href="#res.locals">res.locals</a>
            </li>
            <li><em>Methods</em>
            </li>
            <li><a href="#res.append">res.append()</a>
            </li>
            <li><a href="#res.attachment">res.attachment()</a>
            </li>
            <li><a href="#res.cookie">res.cookie()</a>
            </li>
            <li><a href="#res.clearCookie">res.clearCookie()</a>
            </li>
            <li><a href="#res.download">res.download()</a>
            </li>
            <li><a href="#res.end">res.end()</a>
            </li>
            <li><a href="#res.format">res.format()</a>
            </li>
            <li><a href="#res.get">res.get()</a>
            </li>
            <li><a href="#res.json">res.json()</a>
            </li>
            <li><a href="#res.jsonp">res.jsonp()</a>
            </li>
            <li><a href="#res.links">res.links()</a>
            </li>
            <li><a href="#res.location">res.location()</a>
            </li>
            <li><a href="#res.redirect">res.redirect()</a>
            </li>
            <li><a href="#res.render">res.render()</a>
            </li>
            <li><a href="#res.send">res.send()</a>
            </li>
            <li><a href="#res.sendFile">res.sendFile()</a>
            </li>
            <li><a href="#res.sendStatus">res.sendStatus()</a>
            </li>
            <li><a href="#res.set">res.set()</a>
            </li>
            <li><a href="#res.status">res.status()</a>
            </li>
            <li><a href="#res.type">res.type()</a>
            </li>
            <li><a href="#res.vary">res.vary()</a>
            </li>
        </ul>
    </li>
    <li id="router-api"><a href="#router">Router</a>
        <ul id="router-menu">
            <li><a href="#router">Router()</a>
            </li>
            <li><em>Methods</em>
            </li>
            <li><a href="#router.all">router.all()</a>
            </li>
            <li><a href="#router.METHOD">router.METHOD()</a>
            </li>
            <li><a href="#router.param">router.param()</a>
            </li>
            <li><a href="#router.route">router.route()</a>
            </li>
            <li><a href="#router.use">router.use()</a>
            </li>
        </ul>
    </li>
</ul>


      <div id="overlay"></div>

      
        <div id="i18n-notice-box" class="doc-box doc-warn">
          <p>This document might be outdated relative to the documentation in English. For the latest updates, please refer to the <a href="/">documentation in English</a>.
</p>
<p>This document might be outdated relative to the documentation in English. For the latest updates, please refer to the <a href="/">documentation in English</a>.
</p>
<div id="close-i18n-notice-box" title="Close">✖</div>

        </div>
      
    
      <div id="api-doc">

  <h1>4.x API</h1>

  <p><a id="express" class="h2"></a></p>
  <h2>express()</h2>

  <p>Creates an Express application. The <code class="highlighter-rouge">express()</code> function is a top-level function exported by the <em>express</em> module.</p>

  <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</code></pre>
  </div>

  <h3 id="express.methods">Methods</h3>

  <section>
    <h3 id="express.static" class="h2">express.static(root, [options])</h3>

    <p><code class="highlighter-rouge">express.static</code> is the only built-in middleware in Express. It is based on <a href="https://github.com/expressjs/serve-static">serve-static</a>, and is responsible for serving the static assets of an Express application.</p>

    <p>The <code class="highlighter-rouge">root</code> argument refers to the root directory from which the static assets are to be served.</p>

    <p>The optional <code class="highlighter-rouge">options</code> object can have the following properties.</p>

    <table>
      <thead>
        <tr>
          <th>Property</th>
          <th>Description</th>
          <th>Type</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code class="highlighter-rouge">dotfiles</code></td>
          <td>Option for serving dotfiles. Possible values are “allow”, “deny”, and “ignore”</td>
          <td>String</td>
          <td>“ignore”</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">etag</code></td>
          <td>Enable or disable etag generation</td>
          <td>Boolean</td>
          <td><code class="highlighter-rouge">true</code></td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">extensions</code></td>
          <td>Sets file extension fallbacks.</td>
          <td>Boolean</td>
          <td><code class="highlighter-rouge">false</code></td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">index</code></td>
          <td>Sends directory index file. Set <code class="highlighter-rouge">false</code> to disable directory indexing.</td>
          <td>Mixed</td>
          <td>“index.html”</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">lastModified</code></td>
          <td>Set the <code class="highlighter-rouge">Last-Modified</code> header to the last modified date of the file on the OS. Possible values are <code class="highlighter-rouge">true</code> or <code class="highlighter-rouge">false</code>.</td>
          <td>Boolean</td>
          <td><code class="highlighter-rouge">true</code></td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">maxAge</code></td>
          <td>Set the max-age property of the Cache-Control header in milliseconds or a string in <a href="https://www.npmjs.org/package/ms">ms format</a></td>
          <td>Number</td>
          <td>0</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">redirect</code></td>
          <td>Redirect to trailing “/” when the pathname is a directory.</td>
          <td>Boolean</td>
          <td><code class="highlighter-rouge">true</code></td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">setHeaders</code></td>
          <td>Function for setting HTTP headers to serve with the file.</td>
          <td>Function</td>
          <td> </td>
        </tr>
      </tbody>
    </table>

    <p>For details on using the middleware, refer <a href="/starter/static-files.html">Serving static files in Express</a>.</p>

  </section>

  <p><a id="application" class="h2"></a></p>
  <h2>Application</h2>

  <p>The <code class="highlighter-rouge">app</code> object conventionally denotes the Express application.
Create it by calling the top-level <code class="highlighter-rouge">express()</code> function exported by the Express module:</p>

  <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'hello world'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</code></pre>
  </div>

  <p>The <code class="highlighter-rouge">app</code> object has methods for</p>

  <ul>
    <li>Routing HTTP requests; see for example, <a href="#app.METHOD">app.METHOD</a> and <a href="#app.param">app.param</a>.</li>
    <li>Configuring middleware; see <a href="#app.route">app.route</a>.</li>
    <li>Rendering HTML views; see <a href="#app.render">app.render</a>.</li>
    <li>Registering a template engine; see <a href="#app.engine">app.engine</a>.</li>
  </ul>

  <p>It also has settings (properties) that affect how the application behaves;
for more information, see <a href="#app.settings.table">Application settings</a>.</p>

  <h3 id="app.properties">Properties</h3>

  <section>
    <h3 id="app.locals">app.locals</h3>

    <p>The <code class="highlighter-rouge">app.locals</code> object is a JavaScript object, and its 
properties are local variables within the application.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">title</span>
<span class="c1">// =&gt; 'My App'</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">email</span>
<span class="c1">// =&gt; 'me@myapp.com'</span>
</code></pre>
    </div>

    <p>Once set, the value of <code class="highlighter-rouge">app.locals</code> properties persist throughout the life of the application,
in contrast with <a href="#res.locals">res.locals</a> properties that
are valid only for the lifetime of the request.</p>

    <p>You can access local variables in templates rendered within the application.
This is useful for providing helper functions to templates, as well as app-level data.
Locals are available in middleware via <code class="highlighter-rouge">req.app.locals</code> (see <a href="#req.app">req.app</a>)</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="s1">'My App'</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">strftime</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'strftime'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">email</span> <span class="o">=</span> <span class="s1">'me@myapp.com'</span><span class="p">;</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.mountpath">app.mountpath</h3>

    <p>The <code class="highlighter-rouge">app.mountpath</code> property is the path pattern(s) on which a sub app was mounted.</p>

    <div class="doc-box doc-info">
      <p>A sub app is an instance of <code class="highlighter-rouge">express</code> which may be used for handling the request to a route.</p>
    </div>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span> <span class="c1">// the main app</span>
<span class="kd">var</span> <span class="nx">admin</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span> <span class="c1">// the sub app</span>

<span class="nx">admin</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">admin</span><span class="p">.</span><span class="nx">mountpath</span><span class="p">);</span> <span class="c1">// /admin</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Admin Homepage'</span><span class="p">);</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/admin'</span><span class="p">,</span> <span class="nx">admin</span><span class="p">);</span> <span class="c1">// mount the sub app</span>
</code></pre>
    </div>

    <p>It is similar to the <a href="#req.baseUrl">baseUrl</a> property of the <code class="highlighter-rouge">req</code> object, except <code class="highlighter-rouge">req.baseUrl</code> returns the matched URL path, instead of the matched pattern(s).</p>

    <p>If a sub-app is mounted on multiple path patterns, <code class="highlighter-rouge">app.mountpath</code> returns the list of patterns it is mounted on, as shown in the following example.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">admin</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">admin</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">admin</span><span class="p">.</span><span class="nx">mountpath</span><span class="p">);</span> <span class="c1">// [ '/adm*n', '/manager' ]</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Admin Homepage'</span><span class="p">);</span>
<span class="p">})</span>

<span class="kd">var</span> <span class="nx">secret</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="nx">secret</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">secret</span><span class="p">.</span><span class="nx">mountpath</span><span class="p">);</span> <span class="c1">// /secr*t</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Admin Secret'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">admin</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/secr*t'</span><span class="p">,</span> <span class="nx">secret</span><span class="p">);</span> <span class="c1">// load the 'secret' router on '/secr*t', on the 'admin' sub app</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">([</span><span class="s1">'/adm*n'</span><span class="p">,</span> <span class="s1">'/manager'</span><span class="p">],</span> <span class="nx">admin</span><span class="p">);</span> <span class="c1">// load the 'admin' router on '/adm*n' and '/manager', on the parent app</span>
</code></pre>
    </div>

  </section>

  <h3 id="app.events">Events</h3>

  <section>
    <h3 id="app.onmount">app.on('mount', callback(parent))</h3>

    <p>The <code class="highlighter-rouge">mount</code> event is fired on a sub-app, when it is mounted on a parent app. The parent app is passed to the callback function.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">admin</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">admin</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'mount'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Admin Mounted'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span> <span class="c1">// refers to the parent app</span>
<span class="p">});</span>

<span class="nx">admin</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Admin Homepage'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/admin'</span><span class="p">,</span> <span class="nx">admin</span><span class="p">);</span>
</code></pre>
    </div>

  </section>

  <h3 id="app.methods">Methods</h3>

  <section>
    <h3 id="app.all">app.all(path, callback [, callback ...])</h3>

    <p>This method is like the standard <a href="#app.METHOD">app.METHOD()</a> methods,
except it matches all HTTP verbs.</p>

    <p>It’s useful for mapping “global” logic for specific path prefixes or arbitrary matches.
For example, if you put the following at the top of all other
route definitions, it requires that all routes from that point on
require authentication, and automatically load a user. Keep in mind
that these callbacks do not have to act as end-points: <code class="highlighter-rouge">loadUser</code>
can perform a task, then call <code class="highlighter-rouge">next()</code> to continue matching subsequent
routes.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'*'</span><span class="p">,</span> <span class="nx">requireAuthentication</span><span class="p">,</span> <span class="nx">loadUser</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Or the equivalent:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'*'</span><span class="p">,</span> <span class="nx">requireAuthentication</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'*'</span><span class="p">,</span> <span class="nx">loadUser</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Another example is white-listed “global” functionality. 
The example is much like before, however it only restricts paths that start with
“/api”:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'/api/*'</span><span class="p">,</span> <span class="nx">requireAuthentication</span><span class="p">);</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.delete.method">app.delete(path, callback [, callback ...])</h3>

    <p>Routes HTTP DELETE requests to the specified path with the specified callback functions.
For more information, see the <a href="/guide/routing.html">routing guide</a>.</p>

    <p>You can provide multiple callback functions that behave just like middleware, except
these callbacks can invoke <code class="highlighter-rouge">next('route')</code> to bypass the remaining route
callback(s). You can use this mechanism to impose pre-conditions on a route, then pass control
to subsequent routes if there’s no reason to proceed with the current route.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'DELETE request to homepage'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.disable">app.disable(name)</h3>

    <p>Sets the Boolean setting <code class="highlighter-rouge">name</code> to <code class="highlighter-rouge">false</code>, where <code class="highlighter-rouge">name</code> is one of the properties from the <a href="#app.settings.table">app settings table</a>.
Calling <code class="highlighter-rouge">app.set('foo', false)</code> for a Boolean property is the same as calling <code class="highlighter-rouge">app.disable('foo')</code>.</p>

    <p>For example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">disable</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="c1">// =&gt; false</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.disabled">app.disabled(name)</h3>

    <p>Returns <code class="highlighter-rouge">true</code> if the Boolean setting <code class="highlighter-rouge">name</code> is disabled (<code class="highlighter-rouge">false</code>), where <code class="highlighter-rouge">name</code> is one of the properties from
the <a href="#app.settings.table">app settings table</a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">disabled</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="c1">// =&gt; true</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">enable</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">disabled</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="c1">// =&gt; false</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.enable">app.enable(name)</h3>

    <p>Sets the Boolean setting <code class="highlighter-rouge">name</code> to <code class="highlighter-rouge">true</code>, where <code class="highlighter-rouge">name</code> is one of the properties from the <a href="#app.settings.table">app settings table</a>.
Calling <code class="highlighter-rouge">app.set('foo', true)</code> for a Boolean property is the same as calling <code class="highlighter-rouge">app.enable('foo')</code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">enable</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="c1">// =&gt; true</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.enabled">app.enabled(name)</h3>

    <p>Returns <code class="highlighter-rouge">true</code> if the setting <code class="highlighter-rouge">name</code> is enabled (<code class="highlighter-rouge">true</code>), where <code class="highlighter-rouge">name</code> is one of the
properties from the <a href="#app.settings.table">app settings table</a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">enabled</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="c1">// =&gt; false</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">enable</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">enabled</span><span class="p">(</span><span class="s1">'trust proxy'</span><span class="p">);</span>
<span class="c1">// =&gt; true</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.engine">app.engine(ext, callback)</h3>

    <p>Registers the given template engine <code class="highlighter-rouge">callback</code> as <code class="highlighter-rouge">ext</code>.</p>

    <p>By default, Express will <code class="highlighter-rouge">require()</code> the engine based on the file extension.
For example, if you try to render a “foo.jade” file, Express invokes the
following internally, and caches the <code class="highlighter-rouge">require()</code> on subsequent calls to increase
performance.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">engine</span><span class="p">(</span><span class="s1">'jade'</span><span class="p">,</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'jade'</span><span class="p">).</span><span class="nx">__express</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Use this method for engines that do not provide <code class="highlighter-rouge">.__express</code> out of the box,
or if you wish to “map” a different extension to the template engine.</p>

    <p>For example, to map the EJS template engine to “.html” files:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">engine</span><span class="p">(</span><span class="s1">'html'</span><span class="p">,</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'ejs'</span><span class="p">).</span><span class="nx">renderFile</span><span class="p">);</span>
</code></pre>
    </div>

    <p>In this case, EJS provides a <code class="highlighter-rouge">.renderFile()</code> method with
the same signature that Express expects: <code class="highlighter-rouge">(path, options, callback)</code>,
though note that it aliases this method as <code class="highlighter-rouge">ejs.__express</code> internally
so if you’re using “.ejs” extensions you don’t need to do anything.</p>

    <p>Some template engines do not follow this convention.  The
<a href="https://github.com/tj/consolidate.js">consolidate.js</a> library maps Node template engines to follow this convention,
so they work seemlessly with Express.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">engines</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'consolidate'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">engine</span><span class="p">(</span><span class="s1">'haml'</span><span class="p">,</span> <span class="nx">engines</span><span class="p">.</span><span class="nx">haml</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">engine</span><span class="p">(</span><span class="s1">'html'</span><span class="p">,</span> <span class="nx">engines</span><span class="p">.</span><span class="nx">hogan</span><span class="p">);</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.get">app.get(name)</h3>

    <p>Returns the value of <code class="highlighter-rouge">name</code> app setting, where <code class="highlighter-rouge">name</code> is one of strings in the
<a href="#app.settings.table">app settings table</a>. For example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'title'</span><span class="p">);</span>
<span class="c1">// =&gt; undefined</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'title'</span><span class="p">,</span> <span class="s1">'My Site'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'title'</span><span class="p">);</span>
<span class="c1">// =&gt; "My Site"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.get.method">app.get(path, callback [, callback ...])</h3>

    <p>Routes HTTP GET requests to the specified path with the specified callback functions.
For more information, see the <a href="/guide/routing.html">routing guide</a>.</p>

    <p>You can provide multiple callback functions that behave just like middleware, except
these callbacks can invoke <code class="highlighter-rouge">next('route')</code> to bypass the remaining route callback(s).
You can use this mechanism to impose pre-conditions on a route, then pass control to
subsequent routes if there’s no reason to proceed with the current route.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'GET request to homepage'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.listen">app.listen(port, [hostname], [backlog], [callback])</h3>

    <p>Binds and listens for connections on the specified host and port.
This method is identical to Node’s <a href="http://nodejs.org/api/http.html#http_server_listen_port_hostname_backlog_callback">http.Server.listen()</a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</code></pre>
    </div>

    <p>The <code class="highlighter-rouge">app</code> returned by <code class="highlighter-rouge">express()</code> is in fact a JavaScript
<code class="highlighter-rouge">Function</code>, designed to be passed to Node’s HTTP servers as a callback
to handle requests. This makes it easy to provide both HTTP and HTTPS versions of
your app with the same code base, as the app does not inherit from these
(it is simply a callback):</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'https'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'http'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">app</span><span class="p">).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">80</span><span class="p">);</span>
<span class="nx">https</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">app</span><span class="p">).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">443</span><span class="p">);</span>
</code></pre>
    </div>

    <p>The <code class="highlighter-rouge">app.listen()</code> method is a convenience method for the following (for HTTP only):</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
<span class="p">};</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.METHOD">app.METHOD(path, callback [, callback ...])</h3>

    <p>Routes an HTTP request, where METHOD is the HTTP method of the request, such as GET,
PUT, POST, and so on, in lowercase. Thus, the actual methods are <code class="highlighter-rouge">app.get()</code>,
<code class="highlighter-rouge">app.post()</code>, <code class="highlighter-rouge">app.put()</code>, and so on.  See below for the complete list.</p>

    <p>For more information, see the <a href="/guide/routing.html">routing guide</a>.</p>

    <p>Express supports the following routing methods corresponding to the HTTP methods of the same names:</p>

    <table style="border: 0px; background: none">
<tr>
<td style="background: none; border: 0px;">
          <ul>
            <li><code class="highlighter-rouge">checkout</code></li>
            <li><code class="highlighter-rouge">connect</code></li>
            <li><code class="highlighter-rouge">copy</code></li>
            <li><code class="highlighter-rouge">delete</code></li>
            <li><code class="highlighter-rouge">get</code></li>
            <li><code class="highlighter-rouge">head</code></li>
            <li><code class="highlighter-rouge">lock</code></li>
            <li><code class="highlighter-rouge">merge</code></li>
            <li><code class="highlighter-rouge">mkactivity</code></li>
          </ul>
        </td>
<td style="background: none; border: 0px;">
          <ul>
            <li><code class="highlighter-rouge">mkcol</code></li>
            <li><code class="highlighter-rouge">move</code></li>
            <li><code class="highlighter-rouge">m-search</code></li>
            <li><code class="highlighter-rouge">notify</code></li>
            <li><code class="highlighter-rouge">options</code></li>
            <li><code class="highlighter-rouge">patch</code></li>
            <li><code class="highlighter-rouge">post</code></li>
            <li><code class="highlighter-rouge">propfind</code></li>
            <li><code class="highlighter-rouge">proppatch</code></li>
          </ul>
        </td>
<td style="background: none; border: 0px;">
          <ul>
            <li><code class="highlighter-rouge">purge</code></li>
            <li><code class="highlighter-rouge">put</code></li>
            <li><code class="highlighter-rouge">report</code></li>
            <li><code class="highlighter-rouge">search</code></li>
            <li><code class="highlighter-rouge">subscribe</code></li>
            <li><code class="highlighter-rouge">trace</code></li>
            <li><code class="highlighter-rouge">unlock</code></li>
            <li><code class="highlighter-rouge">unsubscribe</code></li>
          </ul>
        </td>
</tr>
</table>

    <div class="doc-box doc-info">
      <p>To route methods which translate to invalid JavaScript variable names, use the bracket notation. For example, 
  <code class="highlighter-rouge">app['m-search']('/', function ...</code>.</p>
    </div>

    <p>You can provide multiple callback functions that behave just like middleware, except
that these callbacks can invoke <code class="highlighter-rouge">next('route')</code> to bypass
the remaining route callback(s). You can use this mechanism to impose pre-conditions
on a route, then pass control to subsequent routes if there is no reason to proceed with the current route.</p>

    <div class="doc-box doc-info">
      <p>The API documentation has explicit entries only for the most popular HTTP methods <code class="highlighter-rouge">app.get()</code>,
  <code class="highlighter-rouge">app.post()</code>, <code class="highlighter-rouge">app.put()</code>, and <code class="highlighter-rouge">app.delete()</code>.
  However, the other methods listed above work in exactly the same way.</p>
    </div>

    <p>There is a special routing method, <code class="highlighter-rouge">app.all()</code>, that is not derived from any HTTP method.
It loads middleware at a path for all request methods.</p>

    <p>In the following example, the handler is executed for requests to “/secret” whether using
GET, POST, PUT, DELETE, or any other HTTP request method.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'/secret'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Accessing the secret section ...'</span><span class="p">)</span>
  <span class="nx">next</span><span class="p">()</span> <span class="c1">// pass control to the next handler</span>
<span class="p">})</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.param">app.param([name], callback)</h3>

    <p>Add callback triggers to route parameters, where <code class="highlighter-rouge">name</code> is the name of the parameter or an array of them, and <code class="highlighter-rouge">function</code> is the callback function. The parameters of the callback function are the request object, the response object, the next middleware, the value of the parameter and the name of the parameter, in that order.</p>

    <p>If <code class="highlighter-rouge">name</code> is an array, the <code class="highlighter-rouge">callback</code> trigger is registered for each parameter declared in it, in the order in which they are declared. Furthermore, for each declared parameter except the last one, a call to <code class="highlighter-rouge">next</code> inside the callback will call the callback for the next declared parameter. For the last parameter, a call to <code class="highlighter-rouge">next</code> will call the next middleware in place for the route currently being processed, just like it would if <code class="highlighter-rouge">name</code> were just a string.</p>

    <p>For example, when <code class="highlighter-rouge">:user</code> is present in a route path, you may map user loading logic to automatically provide <code class="highlighter-rouge">req.user</code> to the route, or perform validations on the parameter input.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'user'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// try to get the user details from the User model and attach it to the request object</span>
  <span class="nx">User</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">req</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="nx">user</span><span class="p">;</span>
      <span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'failed to load user'</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Param callback functions are local to the router on which they are defined. They are not inherited by mounted apps or routers. Hence, param callbacks defined on <code class="highlighter-rouge">app</code> will be triggered only by route parameters defined on <code class="highlighter-rouge">app</code> routes.</p>

    <p>All param callbacks will be called before any handler of any route in which the param occurs, and they will each be called only once in a request-response cycle, even if the parameter is matched in multiple routes, as shown in the following examples.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'CALLED ONLY ONCE'</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'although this matches'</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'and this matches too'</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>On <code class="highlighter-rouge">GET /user/42</code>, the following is printed:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>CALLED ONLY ONCE
although this matches
and this matches too
</code></pre>
    </div>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">param</span><span class="p">([</span><span class="s1">'id'</span><span class="p">,</span> <span class="s1">'page'</span><span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'CALLED ONLY ONCE with'</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id/:page'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'although this matches'</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id/:page'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'and this matches too'</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>On <code class="highlighter-rouge">GET /user/42/3</code>, the following is printed:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>CALLED ONLY ONCE with 42
CALLED ONLY ONCE with 3
although this matches
and this matches too
</code></pre>
    </div>

    <div class="doc-box doc-warn">
      <p>The following section describes <code class="highlighter-rouge">app.param(callback)</code>, which is deprecated as of v4.11.0.</p>
    </div>

    <p>The behavior of the <code class="highlighter-rouge">app.param(name, callback)</code> method can be altered entirely by passing only a function to <code class="highlighter-rouge">app.param()</code>. This function is a custom implementation of how <code class="highlighter-rouge">app.param(name, callback)</code> should behave - it accepts two parameters and must return a middleware.</p>

    <p>The first parameter of this function is the name of the URL parameter that should be captured, the second parameter can be any JavaScript object which might be used for returning the middleware implementation.</p>

    <p>The middleware returned by the function decides the behavior of what happens when a URL parameter is captured.</p>

    <p>In this example, the <code class="highlighter-rouge">app.param(name, callback)</code> signature is modified to <code class="highlighter-rouge">app.param(name, accessId)</code>. Instead of accepting a name and a callback, <code class="highlighter-rouge">app.param()</code> will now accept a name and a number.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="c1">// customizing the behavior of app.param()</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">param</span><span class="p">,</span> <span class="nx">option</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">val</span> <span class="o">==</span> <span class="nx">option</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">403</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// using the customized app.param()</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="mi">1337</span><span class="p">);</span>

<span class="c1">// route to trigger the capture</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'OK'</span><span class="p">);</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Ready'</span><span class="p">);</span>
<span class="p">})</span>
</code></pre>
    </div>

    <p>In this example, the <code class="highlighter-rouge">app.param(name, callback)</code> signature remains the same, but instead of a middleware callback, a custom data type checking function has been defined to validate the data type of the user id.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">param</span><span class="p">,</span> <span class="nx">validator</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">validator</span><span class="p">(</span><span class="nx">val</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">403</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">candidate</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">candidate</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nb">isFinite</span><span class="p">(</span><span class="nx">candidate</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

    <div class="doc-box doc-info">
      <p>The ‘<code class="highlighter-rouge">.</code>’ character can’t be used to capture a character in your capturing regexp. For example you can’t use <code class="highlighter-rouge">'/user-.+/'</code> to capture <code class="highlighter-rouge">'users-gami'</code>, use <code class="highlighter-rouge">[\\s\\S]</code> or <code class="highlighter-rouge">[\\w\\W]</code> instead (as in <code class="highlighter-rouge">'/user-[\\s\\S]+/'</code>.</p>

      <p>Examples:</p>

      <pre><code class="language-js">//captures '1-a_6' but not '543-azser-sder'
router.get('/[0-9]+-[[\\w]]*', function); 

//captures '1-a_6' and '543-az(ser"-sder' but not '5-a s'
router.get('/[0-9]+-[[\\S]]*', function); 

//captures all (equivalent to '.*')
router.get('[[\\s\\S]]*', function); 
</code></pre>

    </div>

  </section>

  <section>
    <h3 id="app.path">app.path()</h3>

    <p>Returns the canonical path of the app, a string.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">()</span>
  <span class="p">,</span> <span class="nx">blog</span> <span class="o">=</span> <span class="nx">express</span><span class="p">()</span>
  <span class="p">,</span> <span class="nx">blogAdmin</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/blog'</span><span class="p">,</span> <span class="nx">blog</span><span class="p">);</span>
<span class="nx">blog</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/admin'</span><span class="p">,</span> <span class="nx">blogAdmin</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">app</span><span class="p">.</span><span class="nx">path</span><span class="p">());</span> <span class="c1">// ''</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">blog</span><span class="p">.</span><span class="nx">path</span><span class="p">());</span> <span class="c1">// '/blog'</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">blogAdmin</span><span class="p">.</span><span class="nx">path</span><span class="p">());</span> <span class="c1">// '/blog/admin'</span>
</code></pre>
    </div>

    <p>The behavior of this method can become very complicated in complex cases of mounted apps:
it is usually better to use <a href="#req.baseUrl">req.baseUrl</a> to get the canonical path of the app.</p>

  </section>

  <section>
    <h3 id="app.post.method">app.post(path, callback [, callback ...])</h3>

    <p>Routes HTTP POST requests to the specified path with the specified callback functions.
For more information, see the <a href="/guide/routing.html">routing guide</a>.</p>

    <p>You can provide multiple callback functions that behave just like middleware,
except that these callbacks can invoke <code class="highlighter-rouge">next('route')</code> to bypass the
remaining route callback(s). You can use this mechanism to impose pre-conditions on
a route, then pass control to subsequent routes if there’s no reason to proceed with
the current route.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'POST request to homepage'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.put.method">app.put(path, callback [, callback ...])</h3>

    <p>Routes HTTP PUT requests to the specified path with the specified callback functions.
For more information, see the <a href="/guide/routing.html">routing guide</a>.</p>

    <p>You can provide multiple callback functions that behave just like middleware,
except that these callbacks can invoke <code class="highlighter-rouge">next('route')</code> to bypass the
remaining route callback(s). You can use this mechanism to impose pre-conditions on
a route, then pass control to subsequent routes if there’s no reason to proceed with
the current route.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'PUT request to homepage'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.render">app.render(view, [locals], callback)</h3>

    <p>Returns the rendered HTML of a view via the <code class="highlighter-rouge">callback</code> function. It accepts an optional parameter
that is an object containing local variables for the view. It is like <a href="#res.render">res.render()</a>,
except it cannot send the rendered view to the client on its own.</p>

    <div class="doc-box doc-info">
      <p>Think of <code class="highlighter-rouge">app.render()</code> as a utility function for generating rendered view strings.
Internally <code class="highlighter-rouge">res.render()</code> uses <code class="highlighter-rouge">app.render()</code> to render views.</p>
    </div>

    <div class="doc-box doc-notice">
      <p>The local variable <code class="highlighter-rouge">cache</code> is reserved for enabling view cache. Set it to <code class="highlighter-rouge">true</code>, if you want to
cache view during development; view caching is enabled in production by default.</p>
    </div>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">'email'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">html</span><span class="p">){</span>
  <span class="c1">// ...</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">'email'</span><span class="p">,</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'Tobi'</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">html</span><span class="p">){</span>
  <span class="c1">// ...</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.route">app.route(path)</h3>

    <p>Returns an instance of a single route, which you can then use to handle HTTP verbs with optional middleware.
Use <code class="highlighter-rouge">app.route()</code> to avoid duplicate route names (and thus typo errors).</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">'/events'</span><span class="p">)</span>
<span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// runs for all HTTP verbs first</span>
  <span class="c1">// think of it as route specific middleware!</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(...);</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// maybe add a new event...</span>
<span class="p">})</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="app.set">app.set(name, value)</h3>

    <p>Assigns setting <code class="highlighter-rouge">name</code> to <code class="highlighter-rouge">value</code>, where <code class="highlighter-rouge">name</code> is one of the properties from
the <a href="#app.settings.table">app settings table</a>.</p>

    <p>Calling <code class="highlighter-rouge">app.set('foo', true)</code> for a Boolean property is the same as calling
<code class="highlighter-rouge">app.enable('foo')</code>. Similarly, calling <code class="highlighter-rouge">app.set('foo', false)</code> for a Boolean
property is the same as calling <code class="highlighter-rouge">app.disable('foo')</code>.</p>

    <p>Retrieve the value of a setting with <a href="#app.get"><code class="highlighter-rouge">app.get()</code></a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'title'</span><span class="p">,</span> <span class="s1">'My Site'</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'title'</span><span class="p">);</span> <span class="c1">// "My Site"</span>
</code></pre>
    </div>

    <h4 id="app.settings.table">Application Settings</h4>

    <p>If <code class="highlighter-rouge">name</code> is one of the application settings, it affects the behavior of the application. The following table lists application settings.</p>

    <div class="table-scroller">
  <table class="doctable" border="1">
    <thead><tr><th id="app-settings-property">Property</th><th>Type</th><th>Value</th><th>Default</th></tr></thead>
    <tbody>
    <tr>
  <td>
              <p><code class="highlighter-rouge">case sensitive routing</code></p>
            </td>
      <td>Boolean</td>
      <td>Enable case sensitivity.</td>
      <td>Disabled. Treats "/Foo" and "/foo" as the same.</td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">env</code></p>
            </td>
      <td>String</td>
      <td>Environment mode.</td>
  <td>
              <p><code class="highlighter-rouge">process.env.NODE_ENV</code> (<code class="highlighter-rouge">NODE_ENV</code> environment variable) or “development”.</p>
            </td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">etag</code></p>
            </td>
      <td>Varied</td>
  <td>
              <p>Set the ETag response header. For possible values, see the <a href="#etag.options.table"><code class="highlighter-rouge">etag</code> options table</a>.</p>

              <p><a href="http://en.wikipedia.org/wiki/HTTP_ETag">More about the HTTP ETag header</a>.</p>
            </td>
  <td>
              <p><code class="highlighter-rouge">weak</code></p>
            </td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">jsonp callback name</code></p>
            </td>
      <td>String</td>
      <td>Specifies the default JSONP callback name.</td>
  <td>
              <p><code class="highlighter-rouge">?callback=</code></p>
            </td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">json replacer</code></p>
            </td>
      <td>String</td>
      <td>JSON replacer callback.</td>
  <td>
              <p><code class="highlighter-rouge">null</code></p>
            </td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">json spaces</code></p>
            </td>
      <td>Number</td>
      <td>When set, sends prettified JSON string indented with the specified amount of spaces.</td>
      <td>Disabled.</td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">query parser</code></p>
            </td>
      <td>Varied</td>
  <td>
              <p>Disable query parsing by setting the value to <code class="highlighter-rouge">false</code>, or set the query parser to use either “simple” or “extended” or a custom query string parsing function.</p>

              <p>The simple query parser is based on Node’s native query parser, <a href="http://nodejs.org/api/querystring.html">querystring</a>.</p>

              <p>The extended query parser is based on <a href="https://www.npmjs.org/package/qs">qs</a>.</p>

              <p>A custom query string parsing function will receive the complete query string, and must return an object of query keys and their values.</p>
            </td>
      <td>"extended"</td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">strict routing</code></p>
            </td>
      <td>Boolean</td>
      <td>Enable strict routing.</td>
      <td>Disabled. Treats "/foo" and "/foo/" as the same by the router.</td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">subdomain offset</code></p>
            </td>
      <td>Number</td>
      <td>The number of dot-separated parts of the host to remove to access subdomain.</td>
      <td>2</td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">trust proxy</code></p>
            </td>
      <td>Varied</td>
  <td>
              <p>Indicates the app is behind a front-facing proxy, and to use the <code class="highlighter-rouge">X-Forwarded-*</code> headers to determine the connection and the IP address of the client. NOTE: <code class="highlighter-rouge">X-Forwarded-*</code> headers are easily spoofed and the detected IP addresses are unreliable.</p>

              <p><code class="highlighter-rouge">trust proxy</code> is disabled by default. When enabled, Express attempts to determine the IP address of the client connected through the front-facing proxy, or series of proxies. The <code class="highlighter-rouge">req.ips</code> property, then, contains an array of IP addresses the client is connected through. To enable it, use the values described in the <a href="#trust.proxy.options.table"><code class="highlighter-rouge">trust proxy</code> options table</a>.</p>

              <p>The <code class="highlighter-rouge">trust proxy</code> setting is implemented using the <a href="https://www.npmjs.org/package/proxy-addr">proxy-addr</a> package.  For more information, see its documentation.</p>
            </td>
      <td>Disabled.</td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">views</code></p>
            </td>
      <td>String or Array</td>
      <td>A directory or an array of directories for the application's views. If an array, the views are looked up in the order they occur in the array.</td>
  <td>
              <p><code class="highlighter-rouge">process.cwd() + '/views'</code></p>
            </td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">view cache</code></p>
            </td>
      <td>Boolean</td>
      <td>Enables view template compilation caching.</td>
  <td>
              <p><code class="highlighter-rouge">true</code> in production.</p>
            </td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">view engine</code></p>
            </td>
      <td>String</td>
      <td>The default engine extension to use when omitted.</td>
      <td></td>
    </tr>
    <tr>
  <td>
              <p><code class="highlighter-rouge">x-powered-by</code></p>
            </td>
      <td>Boolean</td>
      <td>Enables the "X-Powered-By: Express" HTTP header.</td>
  <td>
              <p><code class="highlighter-rouge">true</code></p>
            </td>
    </tr>
    </tbody>
  </table>

  <h5 id="trust.proxy.options.table">Options for `trust proxy` setting</h5>

  <p>
  Read <a href="/guide/behind-proxies.html">Express behind proxies</a> for more
  information.
  </p>

  <table class="doctable" border="1">
    <thead><tr><th>Type</th><th>Value</th></tr></thead>
    <tbody>
      <tr>
        <td>Boolean</td>
  <td>
              <p>If <code class="highlighter-rouge">true</code>, the client’s IP address is understood as the left-most entry in the <code class="highlighter-rouge">X-Forwarded-*</code> header.</p>

              <p>If <code class="highlighter-rouge">false</code>, the app is understood as directly facing the Internet and the client’s IP address is derived from <code class="highlighter-rouge">req.connection.remoteAddress</code>. This is the default setting.</p>
            </td>
      </tr>
      <tr>
        <td>IP addresses</td>
  <td>
              <p>An IP address, subnet, or an array of IP addresses, and subnets to trust. The following is the list of pre-configured subnet names.</p>

              <ul>
                <li>loopback - <code class="highlighter-rouge">127.0.0.1/8</code>, <code class="highlighter-rouge">::1/128</code></li>
                <li>linklocal - <code class="highlighter-rouge">169.254.0.0/16</code>, <code class="highlighter-rouge">fe80::/10</code></li>
                <li>uniquelocal - <code class="highlighter-rouge">10.0.0.0/8</code>, <code class="highlighter-rouge">172.16.0.0/12</code>, <code class="highlighter-rouge">192.168.0.0/16</code>, <code class="highlighter-rouge">fc00::/7</code></li>
              </ul>

              <p>Set IP addresses in any of the following ways:</p>

              <pre><code class="language-js">app.set('trust proxy', 'loopback') // specify a single subnet
  app.set('trust proxy', 'loopback, 123.123.123.123') // specify a subnet and an address
  app.set('trust proxy', 'loopback, linklocal, uniquelocal') // specify multiple subnets as CSV
  app.set('trust proxy', ['loopback', 'linklocal', 'uniquelocal']) // specify multiple subnets as an array</code></pre>

              <p>When specified, the IP addresses or the subnets are excluded from the address determination process, and the untrusted IP address nearest to the application server is determined as the client’s IP address.</p>
            </td>
      </tr>
      <tr>
        <td>Number</td>
  <td>
              <p>Trust the <code class="highlighter-rouge">n</code>th hop from the front-facing proxy server as the client.</p>
            </td>
      </tr>
      <tr>
        <td>Function</td>
  <td>
              <p>Custom trust implementation. Use this only if you know what you are doing.</p>
              <pre><code class="language-js">app.set('trust proxy', function (ip) {
    if (ip === '127.0.0.1' || ip === '123.123.123.123') return true; // trusted IPs
    else return false;
  })</code></pre>
            </td>
      </tr>
    </tbody>
  </table>

  <h5 id="etag.options.table">Options for `etag` setting</h5>

  <p>
  The ETag functionality is implemented using the
  <a href="https://www.npmjs.org/package/etag">etag</a> package.
  For more information, see its documentation.
  </p>

  <table class="doctable" border="1">
    <thead><tr><th>Type</th><th>Value</th></tr></thead>
    <tbody>
      <tr>
        <td>Boolean</td>
  <td>
              <p><code class="highlighter-rouge">true</code> enables weak ETag. This is the default setting.<br />
  <code class="highlighter-rouge">false</code> disables ETag altogether.</p>
            </td>
      </tr>
      <tr>
        <td>String</td>
        <td>
            If "strong", enables strong ETag.<br />
            If "weak", enables weak ETag.
        </td>
      </tr>
      <tr>
        <td>Function</td>
  <td>
              <p>Custom ETag function implementation. Use this only if you know what you are doing.</p>

              <pre><code class="language-js">app.set('etag', function (body, encoding) {
  return generateHash(body, encoding); // consider the function is defined
  })</code></pre>

            </td>
      </tr>
    </tbody>
  </table>
</div>

  </section>

  <section>
    <h3 id="app.use">app.use([path,] function [, function...])</h3>

    <p>Mounts the <a href="/guide/using-middleware.html">middleware</a> <code class="highlighter-rouge">function</code>(s) at the <code class="highlighter-rouge">path</code>. If <code class="highlighter-rouge">path</code> is not specified, it defaults to “/”.</p>

    <div class="doc-box doc-info">
      <p>A route will match any path that follows its path immediately with a “<code>/</code>”.
  For example: <code>app.use('/apple', ...)</code> will match “/apple”, “/apple/images”,
  “/apple/images/news”, and so on.</p>
    </div>

    <div class="doc-box doc-info">
      <p><code class="highlighter-rouge">req.originalUrl</code> in a middleware is a combination of <code class="highlighter-rouge">req.baseUrl</code> and <code class="highlighter-rouge">req.path</code>, as shown in the following example.</p>

      <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/admin'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// GET 'http://www.example.com/admin/new'</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">originalUrl</span><span class="p">);</span> <span class="c1">// '/admin/new'</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">);</span> <span class="c1">// '/admin'</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">path</span><span class="p">);</span> <span class="c1">// '/new'</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
      </div>
    </div>

    <p>Mounting a middleware at a <code class="highlighter-rouge">path</code> will cause the middleware function to be executed whenever the base of the requested path matches the <code class="highlighter-rouge">path</code>.</p>

    <p>Since <code class="highlighter-rouge">path</code> defaults to “/”, middleware mounted without a path will be executed for every request to the app.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// this middleware will be executed for every request to the app</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Time: %d'</span><span class="p">,</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">})</span>
</code></pre>
    </div>

    <p>Middleware functions are executed sequentially, therefore the order of middleware inclusion is important.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// this middleware will not allow the request to go beyond it</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Hello World'</span><span class="p">);</span>
<span class="p">})</span>

<span class="c1">// requests will never reach this route</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Welcome'</span><span class="p">);</span>
<span class="p">})</span>
</code></pre>
    </div>

    <p><code class="highlighter-rouge">path</code> can be a string representing a path, a path pattern, a regular expression to match paths,
or an array of combinations thereof.</p>

    <div class="doc-box doc-notice">
      <p>The middleware in the below are simple examples.</p>
    </div>

    <div class="table-scroller">
<table class="doctable" border="1">

  <thead>
    <tr>
      <th> Type </th>
      <th> Example </th>
    </tr>
  </thead>
  <tbody>

    <tr>
      <td>Path</td>
      <td>
        <pre><code class="language-js">// will match paths starting with /abcd
app.use('/abcd', function (req, res, next) {
  next();
})</code></pre>
      </td>
    </tr>

    <tr>
      <td>Path Pattern</td>
      <td>
        <pre><code class="language-js">// will match paths starting with /abcd and /abd
app.use('/abc?d', function (req, res, next) {
  next();
})

// will match paths starting with /abcd, /abbcd, /abbbbbcd and so on
app.use('/ab+cd', function (req, res, next) {
  next();
})

// will match paths starting with /abcd, /abxcd, /abFOOcd, /abbArcd and so on
app.use('/ab\*cd', function (req, res, next) {
  next();
})

// will match paths starting with /ad and /abcd
app.use('/a(bc)?d', function (req, res, next) {
  next();
})</code></pre>
      </td>
    </tr>

    <tr>
      <td>Regular Expression</td>
      <td>
        <pre><code class="language-js">// will match paths starting with /abc and /xyz
app.use(/\/abc|\/xyz/, function (req, res, next) {
  next();
})</code></pre>
      </td>
    </tr>

    <tr>
      <td>Array</td>
      <td>
        <pre><code class="language-js">// will match paths starting with /abcd, /xyza, /lmn, and /pqr
app.use(['/abcd', '/xyza', /\/lmn|\/pqr/], function (req, res, next) {
  next();
})</code></pre>
      </td>
    </tr>

  </tbody>

</table>
</div>

    <p><code class="highlighter-rouge">function</code> can be a middleware function, a series of middleware functions,
an array of middleware functions, or a combination of all of them.
Since <a href="#router">router</a> and <a href="#application">app</a> implement the middleware interface, you can use them
as you would any other middleware function.</p>

    <table class="doctable" border="1">

  <thead>
    <tr>
      <th>Usage</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>

    <tr>
      <td>Single Middleware</td>
      <td>You can define and mount a middleware function locally.
<pre><code class="language-js">app.use(function (req, res, next) {
  next();
})
</code></pre>
A router is valid middleware.

<pre><code class="language-js">var router = express.Router();
router.get('/', function (req, res, next) {
  next();
})
app.use(router);
</code></pre>

An Express app is valid middleware.
<pre><code class="language-js">var subApp = express();
subApp.get('/', function (req, res, next) {
  next();
})
app.use(subApp);
</code></pre>
      </td>
    </tr>

    <tr>
      <td>Series of Middleware</td>
      <td>
        You can specify more than one middleware function at the same mount path.
<pre><code class="language-js">var r1 = express.Router();
r1.get('/', function (req, res, next) {
  next();
})

var r2 = express.Router();
r2.get('/', function (req, res, next) {
  next();
})

app.use(r1, r2);
</code></pre>
      </td>
    </tr>

    <tr>
      <td>Array</td>
      <td>
      Use an array to group middleware logically.
      If you pass an array of middleware as the first or only middleware parameters, then you _must_ specify the mount path.
<pre><code class="language-js">var r1 = express.Router();
r1.get('/', function (req, res, next) {
  next();
})

var r2 = express.Router();
r2.get('/', function (req, res, next) {
  next();
})

app.use('/', [r1, r2]);
</code></pre>
      </td>
    </tr>

    <tr>
      <td>Combination</td>
      <td>
        You can combine all the above ways of mounting middleware.
<pre><code class="language-js">function mw1(req, res, next) { next(); }
function mw2(req, res, next) { next(); }

var r1 = express.Router();
r1.get('/', function (req, res, next) { next(); });

var r2 = express.Router();
r2.get('/', function (req, res, next) { next(); });

var subApp = express();
subApp.get('/', function (req, res, next) { next(); });

app.use(mw1, [mw2, r1, r2], subApp);
</code></pre>
      </td>
    </tr>

  </tbody>

</table>

    <p>Following are some examples of using the <a href="/guide/using-middleware.html#middleware.built-in">express.static</a>
middleware in an Express app.</p>

    <p>Serve static content for the app from the “public” directory in the application directory:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// GET /style.css etc</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public'</span><span class="p">));</span>
</code></pre>
    </div>

    <p>Mount the middleware at “/static” to serve static content only when their request path is prefixed with “/static”:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// GET /static/style.css etc.</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/static'</span><span class="p">,</span> <span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public'</span><span class="p">));</span>
</code></pre>
    </div>

    <p>Disable logging for static content requests by loading the logger middleware after the static middleware:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">logger</span><span class="p">());</span>
</code></pre>
    </div>

    <p>Serve static files from multiple directories, but give precedence to “./public” over the others:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/files'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/uploads'</span><span class="p">));</span>
</code></pre>
    </div>

  </section>

  <p><a id="request" class="h2"></a></p>
  <h2>Request</h2>

  <p>The <code class="highlighter-rouge">req</code> object represents the HTTP request and has properties for the 
request query string, parameters, body, HTTP headers, and so on.  In this documentation and by convention, 
the object is always referred to as <code class="highlighter-rouge">req</code> (and the HTTP response is <code class="highlighter-rouge">res</code>) but its actual name is determined
by the parameters to the callback function in which you’re working.</p>

  <p>For example:</p>

  <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'user '</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
  </div>

  <p>But you could just as well have:</p>

  <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'user '</span> <span class="o">+</span> <span class="nx">request</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
  </div>

  <h3 id="req.properties">Properties</h3>

  <div class="doc-box doc-notice">
    <p>In Express 4, <code class="highlighter-rouge">req.files</code> is no longer available on the <code class="highlighter-rouge">req</code> object by default. To access uploaded files on the <code class="highlighter-rouge">req.files</code> object, use a multipart-handling middleware like <a href="https://www.npmjs.com/package/busboy">busboy</a>, <a href="https://www.npmjs.com/package/multer">multer</a>, <a href="https://www.npmjs.com/package/formidable">formidable</a>, <a href="https://www.npmjs.com/package/multiparty">multiparty</a>, <a href="https://www.npmjs.com/package/connect-multiparty">connect-multiparty</a>, or <a href="https://www.npmjs.com/package/pez">pez</a>.</p>
  </div>

  <section>
    <h3 id="req.app">req.app</h3>

    <p>This property holds a reference to the instance of the express application that is using the middleware.</p>

    <p>If you follow the pattern in which you create a module that just exports a middleware 
in order for requiring it in your main file, then the middleware can access the express instance via <code class="highlighter-rouge">req.app</code></p>

    <p>For example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">//index.js</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/viewdirectory'</span><span class="p">,</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./mymiddleware.js'</span><span class="p">))</span>
</code></pre>
    </div>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">//mymiddleware.js</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'The views directory is '</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'views'</span><span class="p">));</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.baseUrl">req.baseUrl</h3>

    <p>The URL path on which a router instance was mounted.
For example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">greet</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="nx">greet</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/jp'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">);</span> <span class="c1">// /greet</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Konichiwa!'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/greet'</span><span class="p">,</span> <span class="nx">greet</span><span class="p">);</span> <span class="c1">// load the router on '/greet'</span>
</code></pre>
    </div>

    <p>Even if you use a path pattern or a set of path patterns to load the router,
the <code class="highlighter-rouge">baseUrl</code> property returns the matched string, not the pattern(s). In the
following example, the <code class="highlighter-rouge">greet</code> router is loaded on two path patterns.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">([</span><span class="s1">'/gre+t'</span><span class="p">,</span> <span class="s1">'/hel{2}o'</span><span class="p">],</span> <span class="nx">greet</span><span class="p">);</span> <span class="c1">// load the router on '/gre+t' and '/hel{2}o'</span>
</code></pre>
    </div>

    <p>When a request is made to <code class="highlighter-rouge">/greet/jp</code>, <code class="highlighter-rouge">req.baseUrl</code> is “/greet”.  When a request is
made to <code class="highlighter-rouge">/hello/jp</code>, <code class="highlighter-rouge">req.baseUrl</code> is “/hello”.</p>

    <p><code class="highlighter-rouge">req.baseUrl</code> is similar to the <a href="#app.mountpath">mountpath</a> property of the <code class="highlighter-rouge">app</code> object,
except <code class="highlighter-rouge">app.mountpath</code> returns the matched path pattern(s).</p>

  </section>

  <section>
    <h3 id="req.body">req.body</h3>

    <p>Contains key-value pairs of data submitted in the request body.
By default, it is <code class="highlighter-rouge">undefined</code>, and is populated when you use body-parsing middleware such
as <a href="https://www.npmjs.org/package/body-parser">body-parser</a> and <a href="https://www.npmjs.org/package/multer">multer</a>.</p>

    <p>The following example shows how to use body-parsing middleware to populate <code class="highlighter-rouge">req.body</code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">)();</span>
<span class="kd">var</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'body-parser'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">multer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'multer'</span><span class="p">);</span> <span class="c1">// v1.0.5</span>
<span class="kd">var</span> <span class="nx">upload</span> <span class="o">=</span> <span class="nx">multer</span><span class="p">();</span> <span class="c1">// for parsing multipart/form-data</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span> <span class="c1">// for parsing application/json</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="na">extended</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}));</span> <span class="c1">// for parsing application/x-www-form-urlencoded</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/profile'</span><span class="p">,</span> <span class="nx">upload</span><span class="p">.</span><span class="nx">array</span><span class="p">(),</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.cookies">req.cookies</h3>

    <p>When using <a href="https://www.npmjs.com/package/cookie-parser">cookie-parser</a> middleware, this property is an object that
contains cookies sent by the request.  If the request contains no cookies, it defaults to <code class="highlighter-rouge"><span class="p">{}</span></code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Cookie: name=tj</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">cookies</span><span class="p">.</span><span class="nx">name</span>
<span class="c1">// =&gt; "tj"</span>
</code></pre>
    </div>

    <p>For more information, issues, or concerns, see <a href="https://github.com/expressjs/cookie-parser">cookie-parser</a>.</p>

  </section>

  <section>
    <h3 id="req.fresh">req.fresh</h3>

    <p>Indicates whether the request is “fresh.”  It is the opposite of <code class="highlighter-rouge">req.stale</code>.</p>

    <p>It is true if the <code class="highlighter-rouge">cache-control</code> request header doesn’t have a <code class="highlighter-rouge">no-cache</code> directive and any
of the following is true:</p>

    <ul>
      <li>The <code class="highlighter-rouge">if-modified-since</code> request header is specified  and <code class="highlighter-rouge">last-modified</code> request header is equal to or earlier than the <code class="highlighter-rouge">modified</code> response header.</li>
      <li>The <code class="highlighter-rouge">if-none-match</code> request header is <code class="highlighter-rouge">*</code>.</li>
      <li>The <code class="highlighter-rouge">if-none-match</code> request header, after being parsed into its directives, does not
match the <code class="highlighter-rouge">etag</code> response header.</li>
    </ul>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">req</span><span class="p">.</span><span class="nx">fresh</span>
<span class="c1">// =&gt; true</span>
</code></pre>
    </div>

    <p>For more information, issues, or concerns, see <a href="https://github.com/jshttp/fresh">fresh</a>.</p>

  </section>

  <section>
    <h3 id="req.hostname">req.hostname</h3>

    <p>Contains the hostname derived from the <code class="highlighter-rouge">Host</code> HTTP header.</p>

    <p>When the <a href="/4x/api.html#trust.proxy.options.table"><code class="highlighter-rouge">trust proxy</code> setting</a> is set
to a non-falsey value, the value of the <code class="highlighter-rouge">X-Forwarded-Host</code> header field will be
used instead. This header can be set by the client or by the proxy.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Host: "example.com:3000"</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">hostname</span>
<span class="c1">// =&gt; "example.com"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.ip">req.ip</h3>

    <p>The remote IP address of the request.</p>

    <p>When the <a href="/4x/api.html#trust.proxy.options.table"><code class="highlighter-rouge">trust proxy</code> setting</a> is set
to a non-falsey value, the value is derived from the left-most entry in the
<code class="highlighter-rouge">X-Forwarded-For</code> header. This header can be set by the client or by the proxy.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">req</span><span class="p">.</span><span class="nx">ip</span>
<span class="c1">// =&gt; "127.0.0.1"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.ips">req.ips</h3>

    <p>When the <a href="/4x/api.html#trust.proxy.options.table"><code class="highlighter-rouge">trust proxy</code> setting</a> is set
to a non-falsey value, this property contains an array of IP addresses
specified in the <code class="highlighter-rouge">X-Forwarded-For</code> request header. Otherwise, it contains an
empty array. This header can be set by the client or by the proxy.</p>

    <p>For example, if <code class="highlighter-rouge">X-Forwarded-For</code> is <code class="highlighter-rouge">client, proxy1, proxy2</code>, <code class="highlighter-rouge">req.ips</code> would be
<code class="highlighter-rouge">["client", "proxy1", "proxy2"]</code>, where <code class="highlighter-rouge">proxy2</code> is the furthest downstream.</p>

  </section>

  <section>
    <h3 id="req.originalUrl">req.originalUrl</h3>

    <div class="doc-box doc-notice">
      <p><code class="highlighter-rouge">req.url</code> is not a native Express property, it is inherited from Node’s <a href="https://nodejs.org/api/http.html#http_message_url">http module</a>.</p>
    </div>

    <p>This property is much like <code class="highlighter-rouge">req.url</code>; however, it retains the original request URL,
allowing you to rewrite <code class="highlighter-rouge">req.url</code> freely for internal routing purposes. For example,
the “mounting” feature of <a href="#app.use">app.use()</a> will rewrite <code class="highlighter-rouge">req.url</code> to strip the mount point.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// GET /search?q=something</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">originalUrl</span>
<span class="c1">// =&gt; "/search?q=something"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.params">req.params</h3>

    <p>An object containing properties mapped to the named route “parameters”. For example, if you have the route <code class="highlighter-rouge">/user/:name</code>, then the “name” property is available as <code class="highlighter-rouge">req.params.name</code>. This object defaults to <code class="highlighter-rouge"><span class="p">{}</span></code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// GET /user/tj</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">name</span>
<span class="c1">// =&gt; "tj"</span>
</code></pre>
    </div>

    <p>When you use a regular expression for the route definition, capture groups are provided in the array using <code class="highlighter-rouge">req.params[n]</code>, where <code class="highlighter-rouge">n</code> is the n<sup>th</sup> capture group. This rule is applied to unnamed wild card matches with string routes such as <code class="highlighter-rouge">/file/*</code>:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// GET /file/javascripts/jquery.js</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1">// =&gt; "javascripts/jquery.js"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.path">req.path</h3>

    <p>Contains the path part of the request URL.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// example.com/users?sort=desc</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">path</span>
<span class="c1">// =&gt; "/users"</span>
</code></pre>
    </div>

    <div class="doc-box doc-info">
      <p>When called from a middleware, the mount point is not included in <code class="highlighter-rouge">req.path</code>. Look up <a href="/4x/api.html#app.use">app.use()</a> for more details.</p>
    </div>

  </section>

  <section>
    <h3 id="req.protocol">req.protocol</h3>

    <p>The request protocol string, <code class="highlighter-rouge">http</code> or <code class="highlighter-rouge">https</code> when requested with TLS.</p>

    <p>When the <a href="/4x/api.html#trust.proxy.options.table"><code class="highlighter-rouge">trust proxy</code> setting</a> is set
to a non-falsey value, the value of the <code class="highlighter-rouge">X-Forwarded-Proto</code> header field will
be trusted and used if present. This header can be set by the client or by
the proxy.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">req</span><span class="p">.</span><span class="nx">protocol</span>
<span class="c1">// =&gt; "http"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.query">req.query</h3>

    <p>An object containing a property for each query string parameter in the route.
If there is no query string, it is the empty object, <code class="highlighter-rouge"><span class="p">{}</span></code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// GET /search?q=tobi+ferret</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">q</span>
<span class="c1">// =&gt; "tobi ferret"</span>

<span class="c1">// GET /shoes?order=desc&amp;shoe[color]=blue&amp;shoe[type]=converse</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">order</span>
<span class="c1">// =&gt; "desc"</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">shoe</span><span class="p">.</span><span class="nx">color</span>
<span class="c1">// =&gt; "blue"</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">query</span><span class="p">.</span><span class="nx">shoe</span><span class="p">.</span><span class="nx">type</span>
<span class="c1">// =&gt; "converse"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.route">req.route</h3>

    <p>The currently-matched route, a string.  For example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id?'</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">userIdHandler</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">route</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">);</span>
<span class="p">})</span>
</code></pre>
    </div>

    <p>Example output from the previous snippet:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span> <span class="nl">path</span><span class="p">:</span> <span class="s1">'/user/:id?'</span><span class="p">,</span>
  <span class="nx">stack</span><span class="err">:</span>
   <span class="p">[</span> <span class="p">{</span> <span class="na">handle</span><span class="p">:</span> <span class="p">[</span><span class="na">Function</span><span class="p">:</span> <span class="nx">userIdHandler</span><span class="p">],</span>
       <span class="na">name</span><span class="p">:</span> <span class="s1">'userIdHandler'</span><span class="p">,</span>
       <span class="na">params</span><span class="p">:</span> <span class="kc">undefined</span><span class="p">,</span>
       <span class="na">path</span><span class="p">:</span> <span class="kc">undefined</span><span class="p">,</span>
       <span class="na">keys</span><span class="p">:</span> <span class="p">[],</span>
       <span class="na">regexp</span><span class="p">:</span> <span class="sr">/^</span><span class="se">\/?</span><span class="sr">$/i</span><span class="p">,</span>
       <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span> <span class="p">}</span> <span class="p">],</span>
  <span class="nx">methods</span><span class="err">:</span> <span class="p">{</span> <span class="nl">get</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">}</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.secure">req.secure</h3>

    <p>A Boolean that is true if a TLS connection is established. Equivalent to:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="s1">'https'</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">protocol</span><span class="p">;</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.signedCookies">req.signedCookies</h3>

    <p>When using <a href="https://www.npmjs.com/package/cookie-parser">cookie-parser</a> middleware, this property
contains signed cookies sent by the request, unsigned and ready for use. Signed cookies reside
in a different object to show developer intent; otherwise, a malicious attack could be placed on
<code class="highlighter-rouge">req.cookie</code> values (which are easy to spoof). Note that signing a cookie does not make it “hidden”
or encrypted; but simply prevents tampering (because the secret used to sign is private).
If no signed cookies are sent, the property defaults to <code class="highlighter-rouge"><span class="p">{}</span></code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Cookie: user=tobi.CP7AWaXDfAKIRfH49dQzKJx7sKzzSoPq7/AcBBRVwlI3</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">signedCookies</span><span class="p">.</span><span class="nx">user</span>
<span class="c1">// =&gt; "tobi"</span>
</code></pre>
    </div>

    <p>For more information, issues, or concerns, see <a href="https://github.com/expressjs/cookie-parser">cookie-parser</a>.</p>

  </section>

  <section>
    <h3 id="req.stale">req.stale</h3>

    <p>Indicates whether the request is “stale,” and is the opposite of <code class="highlighter-rouge">req.fresh</code>.
For more information, see <a href="#req.fresh">req.fresh</a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">req</span><span class="p">.</span><span class="nx">stale</span>
<span class="c1">// =&gt; true</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.subdomains">req.subdomains</h3>

    <p>An array of subdomains in the domain name of the request.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Host: "tobi.ferrets.example.com"</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">subdomains</span>
<span class="c1">// =&gt; ["ferrets", "tobi"]</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="req.xhr">req.xhr</h3>

    <p>A Boolean value that is <code class="highlighter-rouge">true</code> if the request’s “X-Requested-With” header field is
“XMLHttpRequest”, indicating that the request was issued by a client library such as jQuery.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">req</span><span class="p">.</span><span class="nx">xhr</span>
<span class="c1">// =&gt; true</span>
</code></pre>
    </div>

  </section>

  <h3 id="req.methods">Methods</h3>

  <section>
    <h3 id="req.accepts">req.accepts(types)</h3>

    <p>Checks if the specified content types are acceptable, based on the request’s <code class="highlighter-rouge">Accept</code> HTTP header field.
The method returns the best match, or if none of the specified content types is acceptable, returns 
<code class="highlighter-rouge">false</code> (in which case, the application should respond with <code class="highlighter-rouge">406 "Not Acceptable"</code>).</p>

    <p>The <code class="highlighter-rouge">type</code> value may be a single MIME type string (such as “application/json”),
an extension name such as “json”, a comma-delimited list, or an array. For a
list or array, the method returns the <em>best</em> match (if any).</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// Accept: text/html</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">(</span><span class="s1">'html'</span><span class="p">);</span>
<span class="c1">// =&gt; "html"</span>

<span class="c1">// Accept: text/*, application/json</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">(</span><span class="s1">'html'</span><span class="p">);</span>
<span class="c1">// =&gt; "html"</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">(</span><span class="s1">'text/html'</span><span class="p">);</span>
<span class="c1">// =&gt; "text/html"</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">([</span><span class="s1">'json'</span><span class="p">,</span> <span class="s1">'text'</span><span class="p">]);</span>
<span class="c1">// =&gt; "json"</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">(</span><span class="s1">'application/json'</span><span class="p">);</span>
<span class="c1">// =&gt; "application/json"</span>

<span class="c1">// Accept: text/*, application/json</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">(</span><span class="s1">'image/png'</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">(</span><span class="s1">'png'</span><span class="p">);</span>
<span class="c1">// =&gt; undefined</span>

<span class="c1">// Accept: text/*;q=.5, application/json</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">accepts</span><span class="p">([</span><span class="s1">'html'</span><span class="p">,</span> <span class="s1">'json'</span><span class="p">]);</span>
<span class="c1">// =&gt; "json"</span>
</code></pre>
    </div>

    <p>For more information, or if you have issues or concerns, see <a href="https://github.com/expressjs/accepts">accepts</a>.</p>

  </section>

  <section>
    <h3 id="req.acceptsCharsets">req.acceptsCharsets(charset [, ...])</h3>

    <p>Returns the first accepted charset of the specified character sets,
based on the request’s <code class="highlighter-rouge">Accept-Charset</code> HTTP header field.
If none of the specified charsets is accepted, returns <code class="highlighter-rouge">false</code>.</p>

    <p>For more information, or if you have issues or concerns, see <a href="https://github.com/expressjs/accepts">accepts</a>.</p>

  </section>

  <section>
    <h3 id="req.acceptsEncodings">req.acceptsEncodings(encoding [, ...])</h3>

    <p>Returns the first accepted encoding of the specified encodings,
based on the request’s <code class="highlighter-rouge">Accept-Encoding</code> HTTP header field.
If none of the specified encodings is accepted, returns <code class="highlighter-rouge">false</code>.</p>

    <p>For more information, or if you have issues or concerns, see <a href="https://github.com/expressjs/accepts">accepts</a>.</p>

  </section>

  <section>
    <h3 id="req.acceptsLanguages">req.acceptsLanguages(lang [, ...])</h3>

    <p>Returns the first accepted language of the specified languages,
based on the request’s <code class="highlighter-rouge">Accept-Language</code> HTTP header field.
If none of the specified languages is accepted, returns <code class="highlighter-rouge">false</code>.</p>

    <p>For more information, or if you have issues or concerns, see <a href="https://github.com/expressjs/accepts">accepts</a>.</p>

  </section>

  <section>
    <h3 id="req.get">req.get(field)</h3>

    <p>Returns the specified HTTP request header field (case-insensitive match).
The <code class="highlighter-rouge">Referrer</code> and <code class="highlighter-rouge">Referer</code> fields are interchangeable.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">req</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">);</span>
<span class="c1">// =&gt; "text/plain"</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'content-type'</span><span class="p">);</span>
<span class="c1">// =&gt; "text/plain"</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'Something'</span><span class="p">);</span>
<span class="c1">// =&gt; undefined</span>
</code></pre>
    </div>

    <p>Aliased as <code class="highlighter-rouge">req.header(field)</code>.</p>

  </section>

  <section>
    <h3 id="req.is">req.is(type)</h3>

    <p>Returns <code class="highlighter-rouge">true</code> if the incoming request’s “Content-Type” HTTP header field
matches the MIME type specified by the <code class="highlighter-rouge">type</code> parameter.
Returns <code class="highlighter-rouge">false</code> otherwise.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// With Content-Type: text/html; charset=utf-8</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">'html'</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">'text/html'</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">'text/*'</span><span class="p">);</span>
<span class="c1">// =&gt; true</span>

<span class="c1">// When Content-Type is application/json</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">'json'</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">'application/json'</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">'application/*'</span><span class="p">);</span>
<span class="c1">// =&gt; true</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">'html'</span><span class="p">);</span>
<span class="c1">// =&gt; false</span>
</code></pre>
    </div>

    <p>For more information, or if you have issues or concerns, see <a href="https://github.com/expressjs/type-is">type-is</a>.</p>

  </section>

  <section>
    <h3 id="req.param">req.param(name [, defaultValue])</h3>

    <div class="doc-box doc-warn">
      <p>Deprecated. Use either <code class="highlighter-rouge">req.params</code>, <code class="highlighter-rouge">req.body</code> or <code class="highlighter-rouge">req.query</code>, as applicable.</p>
    </div>

    <p>Return the value of param <code class="highlighter-rouge">name</code> when present.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// ?name=tobi</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span>
<span class="c1">// =&gt; "tobi"</span>

<span class="c1">// POST name=tobi</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span>
<span class="c1">// =&gt; "tobi"</span>

<span class="c1">// /user/tobi for /user/:name </span>
<span class="nx">req</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span>
<span class="c1">// =&gt; "tobi"</span>
</code></pre>
    </div>

    <p>Lookup is performed in the following order:</p>

    <ul>
      <li><code class="highlighter-rouge">req.params</code></li>
      <li><code class="highlighter-rouge">req.body</code></li>
      <li><code class="highlighter-rouge">req.query</code></li>
    </ul>

    <p>Optionally, you can specify <code class="highlighter-rouge">defaultValue</code> to set a default value if the parameter is not found in any of the request objects.</p>

    <div class="doc-box doc-warn">
      <p>Direct access to <code class="highlighter-rouge">req.body</code>, <code class="highlighter-rouge">req.params</code>, and <code class="highlighter-rouge">req.query</code> should be favoured for clarity - unless you truly accept input from each object.</p>

      <p>Body-parsing middleware must be loaded for <code class="highlighter-rouge">req.param()</code> to work predictably. Refer <a href="#req.body">req.body</a> for details.</p>
    </div>

  </section>

  <p><a id="response" class="h2"></a></p>
  <h2>Response</h2>

  <p>The <code class="highlighter-rouge">res</code> object represents the HTTP response that an Express app sends when it gets an HTTP request.</p>

  <p>In this documentation and by convention, 
the object is always referred to as <code class="highlighter-rouge">res</code> (and the HTTP request is <code class="highlighter-rouge">req</code>) but its actual name is determined
by the parameters to the callback function in which you’re working.</p>

  <p>For example:</p>

  <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'user '</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
  </div>

  <p>But you could just as well have:</p>

  <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'user '</span> <span class="o">+</span> <span class="nx">request</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
  </div>

  <h3 id="res.properties">Properties</h3>

  <section>
    <h3 id="res.app">res.app</h3>

    <p>This property holds a reference to the instance of the express application that is using the middleware.</p>

    <p><code class="highlighter-rouge">res.app</code> is identical to the <a href="#req.app">req.app</a> property in the request object.</p>

  </section>

  <section>
    <h3 id="res.headersSent">res.headersSent</h3>

    <p>Boolean property that indicates if the app sent HTTP headers for the response.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">headersSent</span><span class="p">);</span> <span class="c1">// false</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'OK'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">headersSent</span><span class="p">);</span> <span class="c1">// true</span>
<span class="p">})</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.locals">res.locals</h3>

    <p>An object that contains response local variables scoped to the request, and therefore available only to
the view(s) rendered during that request / response cycle (if any). Otherwise,
this property is identical to <a href="#app.locals">app.locals</a>.</p>

    <p>This property is useful for exposing request-level information such as the request path name,
authenticated user, user settings, and so on.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">;</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">locals</span><span class="p">.</span><span class="nx">authenticated</span> <span class="o">=</span> <span class="o">!</span> <span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">anonymous</span><span class="p">;</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <h3 id="res.methods">Methods</h3>

  <section>
    <h3 id="res.append">res.append(field [, value])</h3>

    <div class="doc-box doc-info">
      <p><code class="highlighter-rouge">res.append()</code> is supported by Express v4.11.0+</p>
    </div>

    <p>Appends the specified <code class="highlighter-rouge">value</code> to the HTTP response header <code class="highlighter-rouge">field</code>.  If the header is not already set,
it creates the header with the specified value.  The <code class="highlighter-rouge">value</code> parameter can be a string or an array.</p>

    <p>Note: calling <code class="highlighter-rouge">res.set()</code> after <code class="highlighter-rouge">res.append()</code> will reset the previously-set header value.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'Link'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'&lt;http://localhost/&gt;'</span><span class="p">,</span> <span class="s1">'&lt;http://localhost:3000/&gt;'</span><span class="p">]);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'Set-Cookie'</span><span class="p">,</span> <span class="s1">'foo=bar; Path=/; HttpOnly'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">'Warning'</span><span class="p">,</span> <span class="s1">'199 Miscellaneous warning'</span><span class="p">);</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.attachment">res.attachment([filename])</h3>

    <p>Sets the HTTP response <code class="highlighter-rouge">Content-Disposition</code> header field to “attachment”. If a <code class="highlighter-rouge">filename</code> is given,
then it sets the Content-Type based on the extension name via <code class="highlighter-rouge">res.type()</code>,
and sets the <code class="highlighter-rouge">Content-Disposition</code> “filename=” parameter.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">attachment</span><span class="p">();</span>
<span class="c1">// Content-Disposition: attachment</span>

<span class="nx">res</span><span class="p">.</span><span class="nx">attachment</span><span class="p">(</span><span class="s1">'path/to/logo.png'</span><span class="p">);</span>
<span class="c1">// Content-Disposition: attachment; filename="logo.png"</span>
<span class="c1">// Content-Type: image/png</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.cookie">res.cookie(name, value [, options])</h3>

    <p>Sets cookie <code class="highlighter-rouge">name</code> to <code class="highlighter-rouge">value</code>.  The <code class="highlighter-rouge">value</code> parameter may be a string or object converted to JSON.</p>

    <p>The <code class="highlighter-rouge">options</code> parameter is an object that can have the following properties.</p>

    <table>
      <thead>
        <tr>
          <th>Property</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code class="highlighter-rouge">domain</code></td>
          <td>String</td>
          <td>Domain name for the cookie. Defaults to the domain name of the app.</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">expires</code></td>
          <td>Date</td>
          <td>Expiry date of the cookie in GMT. If not specified or set to 0, creates a session cookie.</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">httpOnly</code></td>
          <td>Boolean</td>
          <td>Flags the cookie to be accessible only by the web server.</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">maxAge</code></td>
          <td>String</td>
          <td>Convenient option for setting the expiry time relative to the current time in milliseconds.</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">path</code></td>
          <td>String</td>
          <td>Path for the cookie. Defaults to “/”.</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">secure</code></td>
          <td>Boolean</td>
          <td>Marks the cookie to be used with HTTPS only.</td>
        </tr>
        <tr>
          <td><code class="highlighter-rouge">signed</code></td>
          <td>Boolean</td>
          <td>Indicates if the cookie should be signed.</td>
        </tr>
      </tbody>
    </table>

    <div class="doc-box doc-notice">
      <p>All <code class="highlighter-rouge">res.cookie()</code> does is set the HTTP <code class="highlighter-rouge">Set-Cookie</code> header with the options provided.
Any option not specified defaults to the value stated in <a href="http://tools.ietf.org/html/rfc6265">RFC 6265</a>.</p>
    </div>

    <p>For example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'tobi'</span><span class="p">,</span> <span class="p">{</span> <span class="na">domain</span><span class="p">:</span> <span class="s1">'.example.com'</span><span class="p">,</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'/admin'</span><span class="p">,</span> <span class="na">secure</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'rememberme'</span><span class="p">,</span> <span class="s1">'1'</span><span class="p">,</span> <span class="p">{</span> <span class="na">expires</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">+</span> <span class="mi">900000</span><span class="p">),</span> <span class="na">httpOnly</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
</code></pre>
    </div>

    <p>The <code class="highlighter-rouge">maxAge</code> option is a convenience option for setting “expires” relative to the current time in milliseconds.
The following is equivalent to the second example above.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'rememberme'</span><span class="p">,</span> <span class="s1">'1'</span><span class="p">,</span> <span class="p">{</span> <span class="na">maxAge</span><span class="p">:</span> <span class="mi">900000</span><span class="p">,</span> <span class="na">httpOnly</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
</code></pre>
    </div>

    <p>You can pass an object as the <code class="highlighter-rouge">value</code> parameter; it is then serialized as JSON and parsed by <code class="highlighter-rouge">bodyParser()</code> middleware.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'cart'</span><span class="p">,</span> <span class="p">{</span> <span class="na">items</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="p">});</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'cart'</span><span class="p">,</span> <span class="p">{</span> <span class="na">items</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="p">},</span> <span class="p">{</span> <span class="na">maxAge</span><span class="p">:</span> <span class="mi">900000</span> <span class="p">});</span>
</code></pre>
    </div>

    <p>When using <a href="https://www.npmjs.com/package/cookie-parser">cookie-parser</a> middleware, this method also
supports signed cookies. Simply include the <code class="highlighter-rouge">signed</code> option set to <code class="highlighter-rouge">true</code>.
Then <code class="highlighter-rouge">res.cookie()</code> will use the secret passed to <code class="highlighter-rouge">cookieParser(secret)</code> to sign the value.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'tobi'</span><span class="p">,</span> <span class="p">{</span> <span class="na">signed</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
</code></pre>
    </div>

    <p>Later you may access this value through the <a href="#req.signedCookies">req.signedCookie</a> object.</p>

  </section>

  <section>
    <h3 id="res.clearCookie">res.clearCookie(name [, options])</h3>

    <p>Clears the cookie specified by <code class="highlighter-rouge">name</code>. For details about the <code class="highlighter-rouge">options</code> object, see <a href="#res.cookie">res.cookie()</a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">cookie</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'tobi'</span><span class="p">,</span> <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'/admin'</span> <span class="p">});</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">clearCookie</span><span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'/admin'</span> <span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.download">res.download(path [, filename] [, fn])</h3>

    <p>Transfers the file at <code class="highlighter-rouge">path</code> as an “attachment”. Typically, browsers will prompt the user for download.
By default, the <code class="highlighter-rouge">Content-Disposition</code> header “filename=” parameter is <code class="highlighter-rouge">path</code> (this typically appears in the browser dialog).
Override this default with the <code class="highlighter-rouge">filename</code> parameter.</p>

    <p>When an error ocurrs or transfer is complete, the method calls the optional callback function <code class="highlighter-rouge">fn</code>.
This method uses <a href="#res.sendFile">res.sendFile()</a> to transfer the file.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">download</span><span class="p">(</span><span class="s1">'/report-12345.pdf'</span><span class="p">);</span>

<span class="nx">res</span><span class="p">.</span><span class="nx">download</span><span class="p">(</span><span class="s1">'/report-12345.pdf'</span><span class="p">,</span> <span class="s1">'report.pdf'</span><span class="p">);</span>

<span class="nx">res</span><span class="p">.</span><span class="nx">download</span><span class="p">(</span><span class="s1">'/report-12345.pdf'</span><span class="p">,</span> <span class="s1">'report.pdf'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle error, but keep in mind the response may be partially-sent</span>
    <span class="c1">// so check res.headersSent</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// decrement a download credit, etc.</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.end">res.end([data] [, encoding])</h3>

    <p>Ends the response process. This method actually comes from Node core, specifically the <a href="https://nodejs.org/api/http.html#http_response_end_data_encoding_callback">response.end() method of  http.ServerResponse</a>.</p>

    <p>Use to quickly end the response without any data. If you need to respond with data, instead use methods such as <a href="#res.send">res.send()</a> and <a href="#res.json">res.json()</a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">end</span><span class="p">();</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.format">res.format(object)</h3>

    <p>Performs content-negotiation on the <code class="highlighter-rouge">Accept</code> HTTP header on the request object, when present.
It uses <a href="#req.accepts">req.accepts()</a> to select a handler for the request, based on the acceptable
types ordered by their quality values. If the header is not specified, the first callback is invoked.
When no match is found, the server responds with 406 “Not Acceptable”, or invokes the <code class="highlighter-rouge">default</code> callback.</p>

    <p>The <code class="highlighter-rouge">Content-Type</code> response header is set when a callback is selected. However, you may alter
this within the callback using methods such as <code class="highlighter-rouge">res.set()</code> or <code class="highlighter-rouge">res.type()</code>.</p>

    <p>The following example would respond with <code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hey"</span><span class="w"> </span><span class="p">}</span></code> when the <code class="highlighter-rouge">Accept</code> header field is set
to “application/json” or “*/json” (however if it is “*/*”, then the response will be “hey”).</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">format</span><span class="p">({</span>
  <span class="s1">'text/plain'</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'hey'</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="s1">'text/html'</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'&lt;p&gt;hey&lt;/p&gt;'</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="s1">'application/json'</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="s1">'hey'</span> <span class="p">});</span>
  <span class="p">},</span>

  <span class="s1">'default'</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// log the request and respond with 406</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">406</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Not Acceptable'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>In addition to canonicalized MIME types, you may also use extension names mapped
to these types for a slightly less verbose implementation:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">format</span><span class="p">({</span>
  <span class="na">text</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'hey'</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="na">html</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'&lt;p&gt;hey&lt;/p&gt;'</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="na">json</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="s1">'hey'</span> <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.get">res.get(field)</h3>

    <p>Returns the HTTP response header specified by <code class="highlighter-rouge">field</code>.
The match is case-insensitive.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">);</span>
<span class="c1">// =&gt; "text/plain"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.json">res.json([body])</h3>

    <p>Sends a JSON response. This method is identical to <code class="highlighter-rouge">res.send()</code> with an object or array as the parameter.
However, you can use it to convert other values to JSON, such as <code class="highlighter-rouge">null</code>, and <code class="highlighter-rouge">undefined</code>.
(although these are technically not valid JSON).</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span> <span class="na">user</span><span class="p">:</span> <span class="s1">'tobi'</span> <span class="p">})</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">error</span><span class="p">:</span> <span class="s1">'message'</span> <span class="p">})</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.jsonp">res.jsonp([body])</h3>

    <p>Sends a JSON response with JSONP support. This method is identical to <code class="highlighter-rouge">res.json()</code>,
except that it opts-in to JSONP callback support.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">jsonp</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
<span class="c1">// =&gt; null</span>

<span class="nx">res</span><span class="p">.</span><span class="nx">jsonp</span><span class="p">({</span> <span class="na">user</span><span class="p">:</span> <span class="s1">'tobi'</span> <span class="p">})</span>
<span class="c1">// =&gt; { "user": "tobi" }</span>

<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">jsonp</span><span class="p">({</span> <span class="na">error</span><span class="p">:</span> <span class="s1">'message'</span> <span class="p">})</span>
<span class="c1">// =&gt; { "error": "message" }</span>
</code></pre>
    </div>

    <p>By default, the JSONP callback name is simply <code class="highlighter-rouge">callback</code>. Override this with the
<a href="#app.settings.table">jsonp callback name</a> setting.</p>

    <p>The following are some examples of JSONP responses using the same code:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// ?callback=foo</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">jsonp</span><span class="p">({</span> <span class="na">user</span><span class="p">:</span> <span class="s1">'tobi'</span> <span class="p">})</span>
<span class="c1">// =&gt; foo({ "user": "tobi" })</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'jsonp callback name'</span><span class="p">,</span> <span class="s1">'cb'</span><span class="p">);</span>

<span class="c1">// ?cb=foo</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">jsonp</span><span class="p">({</span> <span class="na">error</span><span class="p">:</span> <span class="s1">'message'</span> <span class="p">})</span>
<span class="c1">// =&gt; foo({ "error": "message" })</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.links">res.links(links)</h3>

    <p>Joins the <code class="highlighter-rouge">links</code> provided as properties of the parameter to populate the response’s
<code class="highlighter-rouge">Link</code> HTTP header field.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">links</span><span class="p">({</span>
  <span class="na">next</span><span class="p">:</span> <span class="s1">'http://api.example.com/users?page=2'</span><span class="p">,</span>
  <span class="na">last</span><span class="p">:</span> <span class="s1">'http://api.example.com/users?page=5'</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>yields:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">Link</span><span class="err">:</span> <span class="o">&lt;</span><span class="nx">http</span><span class="err">:</span><span class="c1">//api.example.com/users?page=2&gt;; rel="next", </span>
      <span class="o">&lt;</span><span class="nx">http</span><span class="err">:</span><span class="c1">//api.example.com/users?page=5&gt;; rel="last"</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.location">res.location(path)</h3>

    <p>Sets the response <code class="highlighter-rouge">Location</code> HTTP header to the specified <code class="highlighter-rouge">path</code> parameter.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">location</span><span class="p">(</span><span class="s1">'/foo/bar'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">location</span><span class="p">(</span><span class="s1">'http://example.com'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">location</span><span class="p">(</span><span class="s1">'back'</span><span class="p">);</span>
</code></pre>
    </div>

    <p>A <code class="highlighter-rouge">path</code> value of “back” has a special meaning, it refers to the URL specified in the <code class="highlighter-rouge">Referer</code> header of the request. If the <code class="highlighter-rouge">Referer</code> header was not specified, it refers to “/”.</p>

    <div class="doc-box doc-warn">
      <p>Express passes the specified URL string as-is to the browser in the <code class="highlighter-rouge">Location</code> header,
without any validation or manipulation, except in case of <code class="highlighter-rouge">back</code>.</p>

      <p>Browsers take the responsibility of deriving the intended URL from the current URL
or the referring URL, and the URL specified in the <code class="highlighter-rouge">Location</code> header; and redirect the user accordingly.</p>
    </div>

  </section>

  <section>
    <h3 id="res.redirect">res.redirect([status,] path)</h3>

    <p>Redirects to the URL derived from the specified <code class="highlighter-rouge">path</code>, with specified
<a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">HTTP status code</a> <code class="highlighter-rouge">status</code>.
If you don’t specify <code class="highlighter-rouge">status</code>, the status code defaults to “302 “Found”.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'/foo/bar'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'http://example.com'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="mi">301</span><span class="p">,</span> <span class="s1">'http://example.com'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'../login'</span><span class="p">);</span>
</code></pre>
    </div>
    <p>Redirects can be a fully-qualified URL for redirecting to a different site:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'http://google.com'</span><span class="p">);</span>
</code></pre>
    </div>
    <p>Redirects can be relative to the root of the host name. For example, if the
application is on <code class="highlighter-rouge">http://example.com/admin/post/new</code>, the following
would redirect to the URL <code class="highlighter-rouge">http://example.com/admin</code>:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'/admin'</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Redirects can be relative to the current URL. For example, 
from <code class="highlighter-rouge">http://example.com/blog/admin/</code> (notice the trailing slash), the following
would redirect to the URL <code class="highlighter-rouge">http://example.com/blog/admin/post/new</code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'post/new'</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Redirecting to <code class="highlighter-rouge">post/new</code> from <code class="highlighter-rouge">http://example.com/blog/admin</code> (no trailing slash),
will redirect to <code class="highlighter-rouge">http://example.com/blog/post/new</code>.</p>

    <p>If you found the above behavior confusing, think of path segments as directories
(with trailing slashes) and files, it will start to make sense.</p>

    <p>Path-relative redirects are also possible. If you were on
<code class="highlighter-rouge">http://example.com/admin/post/new</code>, the following would redirect to
<code class="highlighter-rouge">http//example.com/admin/post</code>:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'..'</span><span class="p">);</span>
</code></pre>
    </div>

    <p>A <code class="highlighter-rouge">back</code> redirection redirects the request back to the <a href="http://en.wikipedia.org/wiki/HTTP_referer">referer</a>,
defaulting to <code class="highlighter-rouge">/</code> when the referer is missing.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">'back'</span><span class="p">);</span>    
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.render">res.render(view [, locals] [, callback])</h3>

    <p>Renders a <code class="highlighter-rouge">view</code> and sends the rendered HTML string to the client.
Optional parameters:</p>

    <ul>
      <li><code class="highlighter-rouge">locals</code>, an object whose properties define local variables for the view.</li>
      <li><code class="highlighter-rouge">callback</code>, a callback function. If provided, the method returns both the possible error and rendered string, but does not perform an automated response. When an error occurs, the method invokes <code class="highlighter-rouge">next(err)</code> internally.</li>
    </ul>

    <div class="doc-box doc-notice">
      <p>The local variable <code class="highlighter-rouge">cache</code> enables view caching. Set it to <code class="highlighter-rouge">true</code>,
to cache the view during development; view caching is enabled in production by default.</p>
    </div>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// send the rendered view to the client</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">'index'</span><span class="p">);</span>

<span class="c1">// if a callback is specified, the rendered HTML string has to be sent explicitly</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">'index'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// pass a local variable to the view</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">'user'</span><span class="p">,</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'Tobi'</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.send">res.send([body])</h3>

    <p>Sends the HTTP response.</p>

    <p>The <code class="highlighter-rouge">body</code> parameter can be a <code class="highlighter-rouge">Buffer</code> object, a <code class="highlighter-rouge">String</code>, an object, or an <code class="highlighter-rouge">Array</code>.
For example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="s1">'whoop'</span><span class="p">));</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="na">some</span><span class="p">:</span> <span class="s1">'json'</span> <span class="p">});</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'&lt;p&gt;some html&lt;/p&gt;'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Sorry, we cannot find that!'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span> <span class="na">error</span><span class="p">:</span> <span class="s1">'something blew up'</span> <span class="p">});</span>
</code></pre>
    </div>

    <p>This method performs many useful tasks for simple non-streaming responses:
For example, it automatically assigns the <code class="highlighter-rouge">Content-Length</code> HTTP response header field
(unless previously defined) and provides automatic HEAD and HTTP cache freshness support.</p>

    <p>When the parameter is a <code class="highlighter-rouge">Buffer</code> object, the method sets the <code class="highlighter-rouge">Content-Type</code>
response header field  to “application/octet-stream”, unless previously defined as shown below:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">,</span> <span class="s1">'text/html'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="s1">'&lt;p&gt;some html&lt;/p&gt;'</span><span class="p">));</span>
</code></pre>
    </div>

    <p>When the parameter is a <code class="highlighter-rouge">String</code>, the method sets the <code class="highlighter-rouge">Content-Type</code> to “text/html”:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'&lt;p&gt;some html&lt;/p&gt;'</span><span class="p">);</span>
</code></pre>
    </div>

    <p>When the parameter is an <code class="highlighter-rouge">Array</code> or <code class="highlighter-rouge">Object</code>, Express responds with the JSON representation:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="na">user</span><span class="p">:</span> <span class="s1">'tobi'</span> <span class="p">});</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]);</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.sendFile">res.sendFile(path [, options] [, fn])</h3>

    <div class="doc-box doc-info">
      <p><code class="highlighter-rouge">res.sendFile()</code> is supported by Express v4.8.0 onwards</p>
    </div>

    <p>Transfers the file at the given <code class="highlighter-rouge">path</code>. Sets the <code class="highlighter-rouge">Content-Type</code> response HTTP header field
based on the filename’s extension. Unless the <code class="highlighter-rouge">root</code> option is set in
the options object, <code class="highlighter-rouge">path</code> must be an absolute path to the file.</p>

    <p>The following table provides details on the <code class="highlighter-rouge">options</code> parameter.</p>

    <div class="table-scroller">

      <table>
        <thead>
          <tr>
            <th>Property</th>
            <th>Description</th>
            <th>Default</th>
            <th>Availability</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code class="highlighter-rouge">maxAge</code></td>
            <td>Sets the max-age property of the <code class="highlighter-rouge">Cache-Control</code> header in milliseconds or a string in <a href="https://www.npmjs.org/package/ms">ms format</a></td>
            <td>0</td>
            <td> </td>
          </tr>
          <tr>
            <td><code class="highlighter-rouge">root</code></td>
            <td>Root directory for relative filenames.</td>
            <td> </td>
            <td> </td>
          </tr>
          <tr>
            <td><code class="highlighter-rouge">lastModified</code></td>
            <td>Sets the <code class="highlighter-rouge">Last-Modified</code> header to the last modified date of the file on the OS. Set <code class="highlighter-rouge">false</code> to disable it.</td>
            <td>Enabled</td>
            <td>4.9.0+</td>
          </tr>
          <tr>
            <td><code class="highlighter-rouge">headers</code></td>
            <td>Object containing HTTP headers to serve with the file.</td>
            <td> </td>
            <td> </td>
          </tr>
          <tr>
            <td><code class="highlighter-rouge">dotfiles</code></td>
            <td>Option for serving dotfiles. Possible values are “allow”, “deny”, “ignore”.</td>
            <td>“ignore”</td>
            <td> </td>
          </tr>
        </tbody>
      </table>

    </div>

    <p>The method invokes the callback function <code class="highlighter-rouge">fn(err)</code> when the transfer is complete
or when an error occurs. If the callback function is specified and an error occurs,
the callback function must explicitly handle the response process either by
ending the request-response cycle, or by passing control to the next route.</p>

    <p>Here is an example of using <code class="highlighter-rouge">res.sendFile</code> with all its arguments.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/file/:name'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">root</span><span class="p">:</span> <span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public/'</span><span class="p">,</span>
    <span class="na">dotfiles</span><span class="p">:</span> <span class="s1">'deny'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">'x-timestamp'</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>
        <span class="s1">'x-sent'</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="kd">var</span> <span class="nx">fileName</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">sendFile</span><span class="p">(</span><span class="nx">fileName</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">status</span><span class="p">).</span><span class="nx">end</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Sent:'</span><span class="p">,</span> <span class="nx">fileName</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>

<span class="p">})</span>
</code></pre>
    </div>

    <p><code class="highlighter-rouge">res.sendFile</code> provides fine-grained support for file serving as illustrated in the following example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:uid/photos/:file'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">uid</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">uid</span>
    <span class="p">,</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">file</span><span class="p">;</span>

  <span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">mayViewFilesFrom</span><span class="p">(</span><span class="nx">uid</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">yes</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">yes</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">sendFile</span><span class="p">(</span><span class="s1">'/uploads/'</span> <span class="o">+</span> <span class="nx">uid</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">file</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">403</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Sorry! you cant see that.'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
    </div>
    <p>For more information, or if you have issues or concerns, see <a href="https://github.com/pillarjs/send">send</a>.</p>

  </section>

  <section>
    <h3 id="res.sendStatus">res.sendStatus(statusCode)</h3>

    <p>Set the response HTTP status code to <code class="highlighter-rouge">statusCode</code> and send its string representation as the response body.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span> <span class="c1">// equivalent to res.status(200).send('OK')</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">403</span><span class="p">);</span> <span class="c1">// equivalent to res.status(403).send('Forbidden')</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">404</span><span class="p">);</span> <span class="c1">// equivalent to res.status(404).send('Not Found')</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span> <span class="c1">// equivalent to res.status(500).send('Internal Server Error')</span>
</code></pre>
    </div>

    <p>If an unsupported status code is specified, the HTTP status is still set to <code class="highlighter-rouge">statusCode</code> and the string version of the code is sent as the response body.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span> <span class="c1">// equivalent to res.status(2000).send('2000')</span>
</code></pre>
    </div>

    <p><a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes">More about HTTP Status Codes</a></p>

  </section>

  <section>
    <h3 id="res.set">res.set(field [, value])</h3>

    <p>Sets the response’s HTTP header <code class="highlighter-rouge">field</code> to <code class="highlighter-rouge">value</code>.
To set multiple fields at once, pass an object as the parameter.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">,</span> <span class="s1">'text/plain'</span><span class="p">);</span>

<span class="nx">res</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span>
  <span class="s1">'Content-Type'</span><span class="p">:</span> <span class="s1">'text/plain'</span><span class="p">,</span>
  <span class="s1">'Content-Length'</span><span class="p">:</span> <span class="s1">'123'</span><span class="p">,</span>
  <span class="s1">'ETag'</span><span class="p">:</span> <span class="s1">'12345'</span>
<span class="p">})</span>
</code></pre>
    </div>

    <p>Aliased as <code class="highlighter-rouge">res.header(field [, value])</code>.</p>

  </section>

  <section>
    <h3 id="res.status">res.status(code)</h3>

    <p>Use this method to set the HTTP status for the response.
It is a chainable alias of Node’s <a href="http://nodejs.org/api/http.html#http_response_statuscode">response.statusCode</a>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">403</span><span class="p">).</span><span class="nx">end</span><span class="p">();</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">400</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Bad Request'</span><span class="p">);</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">404</span><span class="p">).</span><span class="nx">sendFile</span><span class="p">(</span><span class="s1">'/absolute/path/to/404.png'</span><span class="p">);</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.type">res.type(type)</h3>

    <p>Sets the <code class="highlighter-rouge">Content-Type</code> HTTP header to the MIME type as determined by
<a href="https://github.com/broofa/node-mime#mimelookuppath">mime.lookup()</a> for the specified <code class="highlighter-rouge">type</code>.
If <code class="highlighter-rouge">type</code> contains the “/” character, then it sets the <code class="highlighter-rouge">Content-Type</code> to <code class="highlighter-rouge">type</code>.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">'.html'</span><span class="p">);</span>              <span class="c1">// =&gt; 'text/html'</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">'html'</span><span class="p">);</span>               <span class="c1">// =&gt; 'text/html'</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">'json'</span><span class="p">);</span>               <span class="c1">// =&gt; 'application/json'</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">'application/json'</span><span class="p">);</span>   <span class="c1">// =&gt; 'application/json'</span>
<span class="nx">res</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="s1">'png'</span><span class="p">);</span>                <span class="c1">// =&gt; image/png:</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="res.vary">res.vary(field)</h3>

    <p>Adds the field to the <code class="highlighter-rouge">Vary</code> response header, if it is not there already.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">vary</span><span class="p">(</span><span class="s1">'User-Agent'</span><span class="p">).</span><span class="nx">render</span><span class="p">(</span><span class="s1">'docs'</span><span class="p">);</span>
</code></pre>
    </div>

  </section>

  <p><a id="router" class="h2"></a></p>
  <h2>Router</h2>

  <section>
    <p>A <code class="highlighter-rouge">router</code> object is an isolated instance of middleware and routes. You can think of it
as a “mini-application,” capable only of performing middleware and routing
functions. Every Express application has a built-in app router.</p>

    <p>A router behaves like middleware itself, so you can use it as an argument to
<a href="#app.use">app.use()</a> or as the argument to another router’s  <a href="#router.use">use()</a> method.</p>

    <p>The top-level <code class="highlighter-rouge">express</code> object has a <code class="highlighter-rouge">Router()</code> function that creates a new <code class="highlighter-rouge">router</code> object.</p>

    <h3 id="router">Router([options])</h3>

    <p>Create a new router as follows:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">([</span><span class="nx">options</span><span class="p">]);</span>
</code></pre>
    </div>

    <p>The optional <code class="highlighter-rouge">options</code> parameter specifies the behavior of the router.</p>

    <div class="table-scroller">

      <table>
        <thead>
          <tr>
            <th>Property</th>
            <th>Description</th>
            <th>Default</th>
            <th>Availability</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code class="highlighter-rouge">caseSensitive</code></td>
            <td>Enable case sensitivity.</td>
            <td>Disabled by default, treating “/Foo” and “/foo” as the same.</td>
            <td> </td>
          </tr>
          <tr>
            <td><code class="highlighter-rouge">mergeParams</code></td>
            <td>Preserve the <code class="highlighter-rouge">req.params</code> values from the parent router. If the parent and the child have conflicting param names, the child’s value take precedence.</td>
            <td><code class="highlighter-rouge">false</code></td>
            <td>4.5.0+</td>
          </tr>
          <tr>
            <td><code class="highlighter-rouge">strict</code></td>
            <td>Enable strict routing.</td>
            <td>Disabled by default, “/foo” and “/foo/” are treated the same by the router.</td>
            <td> </td>
          </tr>
        </tbody>
      </table>

    </div>

    <p>You can add middleware and HTTP method routes (such as <code class="highlighter-rouge">get</code>, <code class="highlighter-rouge">put</code>, <code class="highlighter-rouge">post</code>, and
so on) to <code class="highlighter-rouge">router</code> just like an application.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// invoked for any requests passed to this router</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// .. some logic here .. like any other middleware</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="c1">// will handle any request that ends in /events</span>
<span class="c1">// depends on where the router is "use()'d"</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/events'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ..</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>You can then use a router for a particular root URL in this way separating your routes into files or even mini-apps.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// only requests to /calendar/* will be sent to our "router"</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/calendar'</span><span class="p">,</span> <span class="nx">router</span><span class="p">);</span>
</code></pre>
    </div>

  </section>

  <h3 id="router.methods">Methods</h3>

  <section>
    <h3 id="router.all">router.all(path, [callback, ...] callback)</h3>

    <p>This method functions just like the <code class="highlighter-rouge">router.METHOD()</code> methods, except that it matches all HTTP verbs.</p>

    <p>This method is extremely useful for
mapping “global” logic for specific path prefixes or arbitrary matches.
For example, if you placed the following route at the top of all other
route definitions, it would require that all routes from that point on
would require authentication, and automatically load a user. Keep in mind
that these callbacks do not have to act as end points; <code class="highlighter-rouge">loadUser</code>
can perform a task, then call <code class="highlighter-rouge">next()</code> to continue matching subsequent
routes.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'*'</span><span class="p">,</span> <span class="nx">requireAuthentication</span><span class="p">,</span> <span class="nx">loadUser</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Or the equivalent:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'*'</span><span class="p">,</span> <span class="nx">requireAuthentication</span><span class="p">)</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'*'</span><span class="p">,</span> <span class="nx">loadUser</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Another example of this is white-listed “global” functionality. Here
the example is much like before, but it only restricts paths prefixed with
“/api”:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">'/api/*'</span><span class="p">,</span> <span class="nx">requireAuthentication</span><span class="p">);</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="router.METHOD">router.METHOD(path, [callback, ...] callback)</h3>

    <p>The <code class="highlighter-rouge">router.METHOD()</code> methods provide the routing functionality in Express,
where METHOD is one of the HTTP methods, such as GET, PUT, POST, and so on,
in lowercase.  Thus, the actual methods are <code class="highlighter-rouge">router.get()</code>, <code class="highlighter-rouge">router.post()</code>,
<code class="highlighter-rouge">router.put()</code>, and so on.</p>

    <p>You can provide multiple callbacks, and all are treated equally, and behave just
like middleware, except that these callbacks may invoke <code class="highlighter-rouge">next('route')</code>
to bypass the remaining route callback(s).  You can use this mechanism to perform
pre-conditions on a route then pass control to subsequent routes when there is no
reason to proceed with the route matched.</p>

    <p>The following snippet illustrates the most simple route definition possible.
Express translates the path strings to regular expressions, used internally
to match incoming requests. Query strings are <em>not</em> considered when performing
these matches, for example “GET /” would match the following route, as would
“GET /?name=tobi”.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'hello world'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>You can also use regular expressions—useful if you have very specific
constraints, for example the following would match “GET /commits/71dbb9c” as well
as “GET /commits/71dbb9c..4c084f9”.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sr">/^</span><span class="se">\/</span><span class="sr">commits</span><span class="se">\/(\w</span><span class="sr">+</span><span class="se">)(?:\.\.(\w</span><span class="sr">+</span><span class="se">))?</span><span class="sr">$/</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">from</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">to</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s1">'HEAD'</span><span class="p">;</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'commit range '</span> <span class="o">+</span> <span class="nx">from</span> <span class="o">+</span> <span class="s1">'..'</span> <span class="o">+</span> <span class="nx">to</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="router.param">router.param(name, callback)</h3>

    <p>Add callback triggers to route parameters, where <code class="highlighter-rouge">name</code> is the name of the parameter and <code class="highlighter-rouge">callback</code> is the callback function. The parameters of the callback function are the request object, the response object, the next middleware, the value of the parameter and the name of the parameter, in that order.  Although <code class="highlighter-rouge">name</code> is technically optional, using this method without it is deprecated starting with Express v4.11.0 (see below).</p>

    <div class="doc-box doc-info">
      <p>Unlike <code class="highlighter-rouge">app.param()</code>, <code class="highlighter-rouge">router.param()</code> does not accept an array of route parameters.</p>
    </div>

    <p>For example, when <code class="highlighter-rouge">:user</code> is present in a route path, you may map user loading logic to automatically provide <code class="highlighter-rouge">req.user</code> to the route, or perform validations on the parameter input.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'user'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// try to get the user details from the User model and attach it to the request object</span>
  <span class="nx">User</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">req</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="nx">user</span><span class="p">;</span>
      <span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'failed to load user'</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Param callback functions are local to the router on which they are defined. They are not inherited by mounted apps or routers. Hence, param callbacks defined on <code class="highlighter-rouge">router</code> will be triggered only by route parameters defined on <code class="highlighter-rouge">router</code> routes.</p>

    <p>A param callback will be called only once in a request-response cycle, even if the parameter is matched in multiple routes, as shown in the following examples.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'CALLED ONLY ONCE'</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">})</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'although this matches'</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'and this matches too'</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>On <code class="highlighter-rouge">GET /user/42</code>, the following is printed:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>CALLED ONLY ONCE
although this matches
and this matches too
</code></pre>
    </div>

    <div class="doc-box doc-warn">
      <p>The following section describes <code class="highlighter-rouge">router.param(callback)</code>, which is deprecated as of v4.11.0.</p>
    </div>

    <p>The behavior of the <code class="highlighter-rouge">router.param(name, callback)</code> method can be altered entirely by passing only a function to <code class="highlighter-rouge">router.param()</code>. This function is a custom implementation of how <code class="highlighter-rouge">router.param(name, callback)</code> should behave - it accepts two parameters and must return a middleware.</p>

    <p>The first parameter of this function is the name of the URL parameter that should be captured, the second parameter can be any JavaScript object which might be used for returning the middleware implementation.</p>

    <p>The middleware returned by the function decides the behavior of what happens when a URL parameter is captured.</p>

    <p>In this example, the <code class="highlighter-rouge">router.param(name, callback)</code> signature is modified to <code class="highlighter-rouge">router.param(name, accessId)</code>. Instead of accepting a name and a callback, <code class="highlighter-rouge">router.param()</code> will now accept a name and a number.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="c1">// customizing the behavior of router.param()</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">param</span><span class="p">,</span> <span class="nx">option</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">val</span> <span class="o">==</span> <span class="nx">option</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">403</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// using the customized router.param()</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="mi">1337</span><span class="p">);</span>

<span class="c1">// route to trigger the capture</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/user/:id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'OK'</span><span class="p">);</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">router</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Ready'</span><span class="p">);</span>
<span class="p">})</span>
</code></pre>
    </div>

    <p>In this example, the <code class="highlighter-rouge">router.param(name, callback)</code> signature remains the same, but instead of a middleware callback, a custom data type checking function has been defined to validate the data type of the user id.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">param</span><span class="p">,</span> <span class="nx">validator</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">validator</span><span class="p">(</span><span class="nx">val</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">403</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">candidate</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">candidate</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nb">isFinite</span><span class="p">(</span><span class="nx">candidate</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

  </section>

  <section>
    <h3 id="router.route">router.route(path)</h3>

    <p>Returns an instance of a single route which you can then use to handle HTTP verbs
with optional middleware. Use <code class="highlighter-rouge">router.route()</code> to avoid duplicate route naming and
thus typo errors.</p>

    <p>Building on the <code class="highlighter-rouge">router.param()</code> example above, the following code shows how to use
<code class="highlighter-rouge">router.route()</code> to specify various HTTP method handlers.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span><span class="s1">'user_id'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// sample user, would actually fetch from DB, etc...</span>
  <span class="nx">req</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="nx">id</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'TJ'</span>
  <span class="p">};</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">'/users/:user_id'</span><span class="p">)</span>
<span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// runs for all HTTP verbs first</span>
  <span class="c1">// think of it as route specific middleware!</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">);</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// just an example of maybe updating the user</span>
  <span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
  <span class="c1">// save user ... etc</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">);</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'not implemented'</span><span class="p">));</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'not implemented'</span><span class="p">));</span>
<span class="p">})</span>
</code></pre>
    </div>

    <p>This approach re-uses the single ‘/users/:user_id’ path and add handlers for
various HTTP methods.</p>

  </section>

  <section>
    <h3 id="router.use">router.use([path], [function, ...] function)</h3>

    <p>Uses the given middleware <code class="highlighter-rouge">function</code>, with optional mount path <code class="highlighter-rouge">path</code>, that defaults to “/”.</p>

    <p>This method is similar to <a href="#app.use">app.use()</a>. A simple example and usecase is described below.
See <a href="#app.use">app.use()</a> for more information.</p>

    <p>Middleware is like a plumbing pipe, requests start at the first middleware you define
and work their way “down” the middleware stack processing for each path they match.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>

<span class="c1">// simple logger for this router's requests</span>
<span class="c1">// all requests to this router will first hit this middleware</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'%s %s %s'</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">method</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">path</span><span class="p">);</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="c1">// this will only be invoked if the path starts with /bar from the mount point</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/bar'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ... maybe some additional /bar logging ...</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">});</span>

<span class="c1">// always invoked</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Hello World'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s1">'/foo'</span><span class="p">,</span> <span class="nx">router</span><span class="p">);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>
</code></pre>
    </div>

    <p>The “mount” path is stripped and is <em>not</em> visible to the middleware <code class="highlighter-rouge">function</code>.
The main effect of this feature is that mounted middleware may operate without
code changes regardless of its “prefix” pathname.</p>

    <p>The order in which you define middleware with <code class="highlighter-rouge">router.use()</code> is very important.
They are invoked sequentially, thus the order defines middleware precedence. For example,
usually a logger is the very first middleware you would use, so every request is logged.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'morgan'</span><span class="p">);</span>

<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">logger</span><span class="p">());</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public'</span><span class="p">));</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Hello'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Now suppose you wanted to ignore logging requests for static files, but to continue
logging routes and middleware defined after <code class="highlighter-rouge">logger()</code>.  You would simply move <code class="highlighter-rouge">static()</code> above:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public'</span><span class="p">));</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">logger</span><span class="p">());</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'Hello'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>Another concrete example is serving files from multiple directories,
giving precedence to “./public” over the others:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/public'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/files'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">'/uploads'</span><span class="p">));</span>
</code></pre>
    </div>

    <p>The <code class="highlighter-rouge">router.use()</code> method also supports named parameters so that your mount points
for other routers can benefit from preloading using named parameters.</p>

  </section>

</div>


    </section>

    <noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5XL76H" height="0" width="0" style="display: none; visibility: hidden;"></iframe>
</noscript>
<script>
(function(w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
        '//www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
})(window, document, 'script', 'dataLayer', 'GTM-5XL76H');
</script>
<a id="top" href="#"><img src="/images/arrow.png"></a>

<footer>
    <div id="footer-content">
        <div id="github">
            <iframe src="http://ghbtns.com/github-btn.html?user=strongloop&amp;repo=express&amp;type=watch&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>
        </div>
        <div id="sponsor">The <a href="https://github.com/strongloop/express/">Express project</a> is sponsored by <a href="http://strongloop.com/">StrongLoop</a>. </div>
        <div id="fork"><a href="https://github.com/strongloop/expressjs.com">Fork the website on GitHub</a>.
        </div>
        <div>Copyright &copy; StrongLoop, Inc., and other expressjs.com contributors.</div>
    </div>
</footer>


  </body>

</html>
